import{_ as D}from"./tslib-B7h_6RO2.js";import{c as st}from"./content-type-CRVRK5yJ.js";var g=new Map,Y=function(t){return t.cloneNode(!0)},z=function(){return window.location.protocol==="file:"},Z=function(t,o,n){var e=new XMLHttpRequest;e.onreadystatechange=function(){try{if(!/\.svg/i.test(t)&&e.readyState===2){var u=e.getResponseHeader("Content-Type");if(!u)throw new Error("Content type not found");var i=st.parse(u).type;if(!(i==="image/svg+xml"||i==="text/plain"))throw new Error("Invalid content type: ".concat(i))}if(e.readyState===4){if(e.status===404||e.responseXML===null)throw new Error(z()?"Note: SVG injection ajax calls do not work locally without adjusting security settings in your browser. Or consider using a local webserver.":"Unable to load SVG file: "+t);if(e.status===200||z()&&e.status===0)n(null,e);else throw new Error("There was a problem injecting the SVG: "+e.status+" "+e.statusText)}}catch(a){if(e.abort(),a instanceof Error)n(a,e);else throw a}},e.open("GET",t),e.withCredentials=o,e.overrideMimeType&&e.overrideMimeType("text/xml"),e.send()},v={},B=function(t,o){v[t]=v[t]||[],v[t].push(o)},ft=function(t){for(var o=function(i,a){setTimeout(function(){if(Array.isArray(v[t])){var s=g.get(t),p=v[t][i];s instanceof SVGSVGElement&&p(null,Y(s)),s instanceof Error&&p(s),i===v[t].length-1&&delete v[t]}},0)},n=0,e=v[t].length;n<e;n++)o(n)},lt=function(t,o,n){if(g.has(t)){var e=g.get(t);if(e===void 0){B(t,n);return}if(e instanceof SVGSVGElement){n(null,Y(e));return}}g.set(t,void 0),B(t,n),Z(t,o,function(u,i){var a;u?g.set(t,u):((a=i.responseXML)===null||a===void 0?void 0:a.documentElement)instanceof SVGSVGElement&&g.set(t,i.responseXML.documentElement),ft(t)})},ct=function(t,o,n){Z(t,o,function(e,u){var i;e?n(e):((i=u.responseXML)===null||i===void 0?void 0:i.documentElement)instanceof SVGSVGElement&&n(null,u.responseXML.documentElement)})},dt=0,vt=function(){return++dt},l=[],J={},pt="http://www.w3.org/2000/svg",F="http://www.w3.org/1999/xlink",K=function(t,o,n,e,u,i,a){var s=t.getAttribute("data-src")||t.getAttribute("src");if(!s){a(new Error("Invalid data-src or src attribute"));return}if(l.indexOf(t)!==-1){l.splice(l.indexOf(t),1),t=null;return}l.push(t),t.setAttribute("src","");var p=e?lt:ct;p(s,u,function(j,r){if(!r){l.splice(l.indexOf(t),1),t=null,a(j);return}var w=t.getAttribute("id");w&&r.setAttribute("id",w);var S=t.getAttribute("title");S&&r.setAttribute("title",S);var E=t.getAttribute("width");E&&r.setAttribute("width",E);var y=t.getAttribute("height");y&&r.setAttribute("height",y);var G=Array.from(new Set(D(D(D([],(r.getAttribute("class")||"").split(" "),!0),["injected-svg"],!1),(t.getAttribute("class")||"").split(" "),!0))).join(" ").trim();r.setAttribute("class",G);var b=t.getAttribute("style");b&&r.setAttribute("style",b),r.setAttribute("data-src",s);var R=[].filter.call(t.attributes,function(f){return/^data-\w[\w-]*$/.test(f.name)});if(Array.prototype.forEach.call(R,function(f){f.name&&f.value&&r.setAttribute(f.name,f.value)}),n){var h={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],path:[],pattern:["fill","stroke"],radialGradient:["fill","stroke"]},C,d,m,T,k;Object.keys(h).forEach(function(f){C=f,m=h[f],d=r.querySelectorAll(C+"[id]");for(var nt=function(I,mt){T=d[I].id,k=T+"-"+vt();var M;Array.prototype.forEach.call(m,function(W){M=r.querySelectorAll("["+W+'*="'+T+'"]');for(var O=0,ut=M.length;O<ut;O++){var $=M[O].getAttribute(W);$&&!$.match(new RegExp('url\\("?#'+T+'"?\\)'))||M[O].setAttribute(W,"url(#"+k+")")}});for(var U=r.querySelectorAll("[*|href]"),H=[],N=0,at=U.length;N<at;N++){var P=U[N].getAttributeNS(F,"href");P&&P.toString()==="#"+d[I].id&&H.push(U[N])}for(var Q=0,ot=H.length;Q<ot;Q++)H[Q].setAttributeNS(F,"href","#"+k);d[I].id=k},_=0,it=d.length;_<it;_++)nt(_)})}r.removeAttribute("xmlns:a");for(var x=r.querySelectorAll("script"),L=[],V,q,A=0,tt=x.length;A<tt;A++)q=x[A].getAttribute("type"),(!q||q==="application/ecmascript"||q==="application/javascript"||q==="text/javascript")&&(V=x[A].innerText||x[A].textContent,V&&L.push(V),r.removeChild(x[A]));if(L.length>0&&(o==="always"||o==="once"&&!J[s])){for(var X=0,et=L.length;X<et;X++)new Function(L[X])(window);J[s]=!0}var rt=r.querySelectorAll("style");if(Array.prototype.forEach.call(rt,function(f){f.textContent+=""}),r.setAttribute("xmlns",pt),r.setAttribute("xmlns:xlink",F),i(r),!t.parentNode){l.splice(l.indexOf(t),1),t=null,a(new Error("Parent node is null"));return}t.parentNode.replaceChild(r,t),l.splice(l.indexOf(t),1),t=null,a(null,r)})},wt=function(t,o){var n=o===void 0?{}:o,e=n.afterAll,u=e===void 0?function(){}:e,i=n.afterEach,a=i===void 0?function(){}:i,s=n.beforeEach,p=s===void 0?function(){}:s,j=n.cacheRequests,r=j===void 0?!0:j,w=n.evalScripts,S=w===void 0?"never":w,E=n.httpRequestWithCredentials,y=E===void 0?!1:E,G=n.renumerateIRIElements,b=G===void 0?!0:G;if(t&&"length"in t)for(var R=0,h=0,C=t.length;h<C;h++)K(t[h],S,b,r,y,p,function(d,m){a(d,m),t&&"length"in t&&t.length===++R&&u(R)});else t?K(t,S,b,r,y,p,function(d,m){a(d,m),u(1),t=null}):u(0)};export{wt as S};
