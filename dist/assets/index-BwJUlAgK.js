import{j as e,r as s,$ as ns}from"./react-CNM1HoWL.js";import{c as sa}from"./react-dom-BOIVV1z1.js";import{F as Ze,B as Xe,a as es,H as Se,R as js,b as gs,c as Ue,I as le,M as ws,C as ge,d as is,e as Ss,f as cs,g as Cs,h as aa,i as ta,j as na,k as ia,l as ca,m as ks,n as _s,o as Ps,p as Ds,q as $s,r as la,s as ra,t as oa,u as da,v as ma,w as ha,x as ua}from"./react-icons-B12MF4Wr.js";import{j as As}from"./jwt-decode-VWaDGczM.js";import"./js-cookie-Z_8Sd105.js";import{u as pe,a as ie,L as o,O as Te,b as He,c as xa,B as pa,R as ja,d as U}from"./react-router-C8wfXhDr.js";import{D as Ce}from"./react-datepicker-Lne575pU.js";import{R as ga}from"./react-svg-Dk5hlgX3.js";import{M as va}from"./react-tooltip-DFEWqLc3.js";import{a as I}from"./axios-upsvKRUO.js";import{S as Na}from"./react-slick-BORqh8gw.js";/* empty css                       *//* empty css                  */import{E as ls}from"./@tinymce-C8oFIJuF.js";import{L as fa,B as ba}from"./react-chartjs-2-CvGC60DC.js";import{C as ya,a as wa,b as Sa,c as Ca,d as ka,P as _a,p as Pa,e as Da,f as $a,L as Aa,B as Ta}from"./chart.js-C2sAV-MR.js";import{H as Ma}from"./date-fns-N9xYdMXO.js";import{N as vs,C as Ts,D as Ne,a as Fa}from"./react-bootstrap-DU-ABRFa.js";import{E as Ea}from"./jspdf-BjVRK6Fd.js";import La from"./html2canvas-DtF4syFK.js";import"./canvg-B4kmEYKc.js";import"./@babel-ZR4Keixg.js";import"./raf-BKXN45_c.js";import"./performance-now-DzowmezO.js";import"./rgbcolor-DgwxTvYr.js";import"./svg-pathdata-Dw-rkvb0.js";import"./stackblur-canvas-CBjRDurV.js";import"./scheduler-vn6Di64w.js";import"./cookie--_YQFYBD.js";import"./clsx-B-dksMZM.js";import"./@floating-ui-BGbYgb87.js";import"./@tanem-BFu4Q50P.js";import"./tslib-B7h_6RO2.js";import"./content-type-CRVRK5yJ.js";import"./prop-types-DQw5ku1y.js";import"./classnames-BSFcTwti.js";import"./lodash.debounce-BmNA28iP.js";import"./resize-observer-polyfill-rjV_tUOs.js";import"./json2mq-DmRDQ8Ce.js";import"./string-convert-Bhuo--sE.js";import"./enquire.js-B8qsBZnP.js";import"./@kurkle-D8fDXNIl.js";import"./@restart-D0btDtrk.js";import"./dom-helpers-Dz-xhkrQ.js";import"./dequal-tFQomdd2.js";import"./@popperjs-DGdShOKc.js";import"./warning-ILz9hylb.js";import"./@react-aria-D0sI0td-.js";import"./uncontrollable-DEQSrhJd.js";import"./react-transition-group-ez8xThlr.js";import"./fflate-BO5HMHBV.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const p of i.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&u(p)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function u(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();const Ra="/End_OFlifeTestBuild/assets/logo-h3YsNc2S.webp",de=({show:l,onConfirm:t,onCancel:a,message:u})=>l?e.jsx("div",{className:"cus-modal-overlay",children:e.jsxs("div",{className:"cus-modal glass",children:[" ",e.jsx("button",{onClick:a,className:"cus-modal-close-btn",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})}),e.jsx("div",{className:"cus-modal-header"}),e.jsx("div",{className:"cus-modal-content",children:e.jsx("p",{children:u})}),e.jsxs("div",{className:"cus-modal-actions",children:[e.jsx("button",{onClick:a,className:"secondary-button",children:"Cancel"}),e.jsx("button",{onClick:t,className:"primary-button",children:"Confirm"})]})]})}):null,Ba=({token:l,user:t,role:a,setToken:u,setUser:n,setRole:i})=>{const[p,b]=s.useState(!1),[r,f]=s.useState(!0),[y,c]=s.useState(0),[g,v]=s.useState(!1),N=pe();s.useEffect(()=>{const d=sessionStorage.getItem("token");if(d)try{u(d);const $=As(d),_=$.role,z=$.username;i(_),n(z)}catch($){console.error("Error decoding token:",$)}},[N]);const C=()=>{b(!p)},w=ie(),j=()=>{sessionStorage.removeItem("token"),w("/home"),window.location.reload()},m=()=>{l&&a==="user"?w("/user/addnotice"):l&&a==="directory"?w("/directory/deatnotice"):l&&a==="service provider"?w("/service/servicefrom"):M()},A=()=>{const d=window.scrollY;d>y&&d>50?f(!1):f(!0),c(d)};ns.useEffect(()=>(window.addEventListener("scroll",A),()=>{window.removeEventListener("scroll",A)}),[y]);const M=()=>v(!0),h=()=>v(!1),S=()=>{w("/login",{state:{user:"user"}}),v(!1)};return e.jsxs("div",{className:`cus-navbar ${r?"visible":"hidden"}`,children:[e.jsx("div",{className:`navbar-min  ${r?"visible":"hidden"}`,children:e.jsxs("div",{className:"nav-center",children:[e.jsxs("div",{className:"nav-row",children:[e.jsx(o,{className:"min-nav-link",to:"#",children:"FAQ"}),e.jsx(o,{className:"min-nav-link",to:"#",children:"Practical Information"}),e.jsx(o,{className:"min-nav-link",to:"#",children:"Donate"})]}),e.jsxs("div",{className:"nav-row2",children:[e.jsx(o,{className:"min-nav-link",to:"#",children:t}),!l&&e.jsx(o,{className:"min-nav-link",to:"login",state:{user:"user"},children:"User Login/Signup"}),l&&e.jsx("div",{style:{maxWidth:"24px"},children:e.jsxs("div",{className:"dropdown text-algin-left",children:[e.jsxs("button",{className:"btn btn-default dropdown-bs-toggle cus-drop-btn",type:"button",id:"menu1","data-bs-toggle":"dropdown","aria-expanded":"false",children:[e.jsx(Ze,{className:"user-icon",color:"#f6efe7",size:34}),e.jsx("span",{className:"caret"})]}),e.jsxs("ul",{className:"dropdown-menu cus-drop",role:"menu","aria-labelledby":"menu1",children:[e.jsxs("li",{className:"drop-cus-link",role:"presentation",children:[e.jsx("span",{children:e.jsx(Xe,{className:"drop-down-icon",size:24,color:"#e2cb80"})}),e.jsx(o,{to:"#",className:`nav-link ${N.pathname==="/#"?"nav-link-active":""}`,role:"menuitem",tabindex:"-1",href:"#",children:"Personal data"})]}),e.jsxs("li",{className:"drop-cus-link",role:"presentation",children:[e.jsx("span",{children:e.jsx(es,{className:"drop-down-icon",size:24,color:"#e2cb80"})}),e.jsx(o,{className:`nav-link ${N.pathname==="/#"?"nav-link-active":""}`,role:"menuitem",tabindex:"-1",href:"#",children:"Saved Notices"})]}),a==="user"&&e.jsxs("li",{className:"drop-cus-link",role:"presentation",children:[e.jsx("span",{children:e.jsx(Se,{className:"drop-down-icon",size:24,color:"#e2cb80"})}),e.jsx(o,{to:"user/myfamilynotices",className:"nav-link",role:"menuitem",tabindex:"-1",href:"#",children:"My Family Notice"})]}),a==="directory"&&e.jsxs("li",{className:"drop-cus-link",role:"presentation",children:[e.jsx("span",{children:e.jsx(Se,{className:"drop-down-icon",size:24,color:"#e2cb80"})}),e.jsx(o,{to:"directory/mydeathnotices",className:"nav-link",role:"menuitem",tabindex:"-1",href:"#",children:"Death Notices"})]}),a==="service provider"&&e.jsxs("li",{className:"drop-cus-link",role:"presentation",children:[e.jsx("span",{children:e.jsx(Se,{className:"drop-down-icon",size:24,color:"#e2cb80"})}),e.jsx(o,{to:"service/myservice",className:"nav-link",role:"menuitem",tabindex:"-1",href:"#",children:"My Services"})]}),e.jsx("li",{className:"drop-cus-link divider",role:"presentation"}),e.jsxs("li",{className:"drop-cus-link",role:"presentation",onClick:j,children:[e.jsx("span",{children:e.jsx(js,{size:24,color:"#e2cb80"})}),e.jsx(o,{className:`nav-link ${N.pathname==="/#"?"nav-link-active":""}`,role:"menuitem",tabindex:"-1",href:"#",children:"Logout"})]})]})]})}),a==="directory"?e.jsx("button",{onClick:m,className:"nav_button",children:"+ Add Death Notice"}):a==="service provider"?e.jsx("button",{onClick:m,className:"nav_button",children:"+ Add New Service"}):e.jsx("button",{onClick:m,className:"nav_button",children:"+ Add Family Notice"})]})]})}),e.jsxs("div",{className:"navbar-main",children:[e.jsx("div",{className:"nav-icon",children:e.jsxs(o,{to:"/",children:[" ",e.jsx("img",{src:Ra,alt:"logo",className:"nav-logo"})]})}),a==="null"&&e.jsxs("div",{className:`nav-link-box ${p?"open":""}`,children:[e.jsx(o,{to:"/",className:`nav-link ${N.pathname==="/"?"nav-link-active":""}`,children:"Home"}),e.jsx(o,{to:"/deathnotice",className:`nav-link ${N.pathname==="/deathnotice"?"nav-link-active":""}`,children:"Death Notices"}),e.jsx(o,{to:"/familynotices",className:`nav-link ${N.pathname==="/familynotices"?"nav-link-active":""}`,children:"Family Notices"}),e.jsx(o,{to:"/service-directory",className:`nav-link ${N.pathname==="/service-directory"?"nav-link-active":""}`,children:"Services Directory"}),e.jsx(o,{to:"/#",className:`nav-link ${N.pathname==="/#"?"nav-link-active":""}`,children:"Resources"})]}),a==="admin"&&e.jsxs("div",{className:`nav-link-box ${p?"open":""}`,children:[e.jsx(o,{to:"/",className:`nav-link ${N.pathname==="/"?"nav-link-active":""}`,children:"Home"}),e.jsx(o,{to:"/admin/dashboard",className:`nav-link ${N.pathname==="/admin/dashboard"?"nav-link-active":""}`,children:"Dashboard"}),e.jsx(o,{to:"/familynotices",className:`nav-link ${N.pathname==="/familynotices"?"nav-link-active":""}`,children:"Family Notices"}),e.jsx(o,{to:"/admin/service-directory",className:`nav-link ${N.pathname==="/admin/service-directory"?"nav-link-active":""}`,children:"Services Directory"}),e.jsx(o,{to:"/deathnotice",className:`nav-link ${N.pathname==="/deathnotice"?"nav-link-active":""}`,children:"Resources"})]}),a==="directory"&&e.jsxs("div",{className:`nav-link-box ${p?"open":""}`,children:[e.jsx(o,{to:"/",className:`nav-link ${N.pathname==="/"?"nav-link-active":""}`,children:"Home"}),e.jsx(o,{to:"directory/dashboard",className:`nav-link ${N.pathname==="/"?"nav-link-active":""}`,children:"Dashboard"}),e.jsx(o,{to:"/familynotices",className:`nav-link ${N.pathname==="/"?"nav-link-active":""}`,children:"Family Notices"}),e.jsx(o,{to:"/directory/service-directory",className:`nav-link ${N.pathname==="/"?"nav-link-active":""}`,children:"Services Directory"}),e.jsx(o,{to:"/deathnotice",className:`nav-link ${N.pathname==="/deathnotice"?"nav-link-active":""}`,children:"Resources"})]}),a==="user"&&e.jsxs("div",{className:`nav-link-box ${p?"open":""}`,children:[e.jsx(o,{to:"/",className:`nav-link ${N.pathname==="/"?"nav-link-active":""}`,children:"Home"}),e.jsx(o,{to:"/deathnotice",className:`nav-link ${N.pathname==="/"?"nav-link-active":""}`,children:"Death Notices"}),e.jsx(o,{to:"/familynotices",className:`nav-link ${N.pathname==="/familynotices"?"nav-link-active":""}`,children:"Family Notices"}),e.jsx(o,{to:"/service-directory",className:`nav-link ${N.pathname==="/service-directory"?"nav-link-active":""}`,children:"Services Directory"}),e.jsx(o,{to:"/deathnotice",className:`nav-link ${N.pathname==="/deathnotice"?"nav-link-active":""}`,children:"Resources"})]}),a==="service provider"&&e.jsxs("div",{className:`nav-link-box ${p?"open":""}`,children:[e.jsx(o,{to:"/",className:`nav-link ${N.pathname==="/"?"nav-link-active":""}`,children:"Home"}),e.jsx(o,{to:"/service/deathnotice",className:`nav-link ${N.pathname==="/service/deathnotice"?"nav-link-active":""}`,children:"Death Notices"}),e.jsx(o,{to:"/familynotices",className:`nav-link ${N.pathname==="/familynotices"?"nav-link-active":""}`,children:"Family Notices"}),e.jsx(o,{to:"/service/service-directory",className:`nav-link ${N.pathname==="/service/service-directory"?"nav-link-active":""}`,children:"Services Directory"}),e.jsx(o,{to:"/deathnotice",className:`nav-link ${N.pathname==="/deathnotice"?"nav-link-active":""}`,children:"Resources"})]}),e.jsxs("div",{className:"icon-box",children:[e.jsxs("div",{className:"mobile-user",children:[!l&&e.jsx(o,{className:"min-nav-link",to:"login",state:{user:"user"},style:{color:"black"},children:"Login/Signup"}),l&&e.jsx("div",{style:{maxWidth:"40px"},children:e.jsxs("div",{className:"dropdown text-algin-left",children:[e.jsxs("button",{className:"btn btn-default dropdown-bs-toggle cus-drop-btn",type:"button",id:"menu1","data-bs-toggle":"dropdown","aria-expanded":"false",children:[e.jsx(Ze,{className:"user-icon",color:"#f6efe7",size:30}),e.jsx("span",{className:"caret"})]}),e.jsxs("ul",{className:"dropdown-menu cus-drop",role:"menu","aria-labelledby":"menu1",children:[e.jsxs("li",{className:"drop-cus-link",role:"presentation",children:[e.jsx("span",{children:e.jsx(Xe,{className:"drop-down-icon",size:24,color:"#e2cb80"})}),e.jsx(o,{to:"#",className:`nav-link ${N.pathname==="/#"?"nav-link-active":""}`,role:"menuitem",tabindex:"-1",href:"#",children:"Personal data"})]}),e.jsxs("li",{className:"drop-cus-link",role:"presentation",children:[e.jsx("span",{children:e.jsx(es,{className:"drop-down-icon",size:24,color:"#e2cb80"})}),e.jsx(o,{className:`nav-link ${N.pathname==="/#"?"nav-link-active":""}`,role:"menuitem",tabindex:"-1",href:"#",children:"Saved Notices"})]}),a==="user"&&e.jsxs("li",{className:"drop-cus-link",role:"presentation",children:[e.jsx("span",{children:e.jsx(Se,{className:"drop-down-icon",size:24,color:"#e2cb80"})}),e.jsx(o,{to:"user/myfamilynotices",className:"nav-link",role:"menuitem",tabindex:"-1",href:"#",children:"My Family Notice"})]}),a==="directory"&&e.jsxs("li",{className:"drop-cus-link",role:"presentation",children:[e.jsx("span",{children:e.jsx(Se,{className:"drop-down-icon",size:24,color:"#e2cb80"})}),e.jsx(o,{to:"directory/mydeathnotices",className:"nav-link",role:"menuitem",tabindex:"-1",href:"#",children:"Death Notices"})]}),a==="service provider"&&e.jsxs("li",{className:"drop-cus-link",role:"presentation",children:[e.jsx("span",{children:e.jsx(Se,{className:"drop-down-icon",size:24,color:"#e2cb80"})}),e.jsx(o,{to:"service/myservice",className:"nav-link",role:"menuitem",tabindex:"-1",href:"#",children:"My Services"})]}),e.jsx("li",{className:"drop-cus-link divider",role:"presentation"}),e.jsxs("li",{className:"drop-cus-link",role:"presentation",onClick:j,children:[e.jsx("span",{children:e.jsx(js,{size:24,color:"#e2cb80"})}),e.jsx(o,{className:`nav-link ${N.pathname==="/#"?"nav-link-active":""}`,role:"menuitem",tabindex:"-1",href:"#",children:"Logout"})]})]})]})})]}),e.jsx("button",{className:"toggle-button",onClick:C,children:"☰"})]})]}),g&&e.jsx(de,{show:g,onConfirm:S,onCancel:h,message:"Please login to add notice"})]})},Ge=({search:l,onSearch:t,nothome:a,insetp:u,para:n})=>{const[i,p]=s.useState({FristName:"",SurName:"",Nee:"",County:"",Town:"",From:"",To:""}),b=ie(),r=c=>{const{name:g,value:v}=c.target;p(N=>({...N,[g]:v}))},f=c=>{c.preventDefault();const g={name:i.FristName,surname:i.SurName,nee:i.Nee,county:i.County,town:i.Town,createdAt:i.From,updatedAt:i.To};a?t(g):b("/deathnotice",{state:{data:g}})},y=(c,g)=>{p(v=>({...v,[g]:c}))};return e.jsxs("form",{className:`serachBox ${a?"":"nothome"}`,onSubmit:f,children:[e.jsx("h1",{className:u?"text-center select-type":"search-heading",children:l}),n&&e.jsx("p",{className:"select-type-para text-center",children:n}),e.jsxs("div",{className:"row",style:{marginBottom:"25px"},children:[e.jsx("div",{className:"col-md-2 col-lg-4 col-sm-12",children:e.jsx("div",{className:"serachinputdiv",children:e.jsx("input",{placeholder:"First Name",className:"fristRowinput",type:"text",name:"FristName",value:i.FristName,onChange:r})})}),e.jsx("div",{className:"col-md-2 col-lg-4 col-sm-12",children:e.jsx("div",{className:"serachinputdiv",children:e.jsx("input",{placeholder:"Surname",className:"fristRowinput",type:"text",name:"SurName",value:i.SurName,onChange:r})})}),e.jsx("div",{className:"col-md-2 col-lg-4 col-sm-12",children:e.jsx("div",{className:"serachinputdiv",children:e.jsx("input",{placeholder:"Nee",className:"fristRowinput",type:"text",name:"Nee",value:i.Nee,onChange:r})})})]}),e.jsxs("div",{className:"row",style:{marginBottom:"40px"},children:[e.jsx("div",{className:"col-lg-3 col-md-2 col-sm-12",children:e.jsx("div",{className:"serachinputdiv",children:e.jsx("input",{placeholder:" County",className:"secondRowinput",type:"text",name:"County",value:i.County,onChange:r})})}),e.jsx("div",{className:"col-lg-3 col-md-2 col-sm-12",children:e.jsx("div",{className:"serachinputdiv",children:e.jsx("input",{placeholder:"Town",className:"secondRowinput",type:"text",name:"Town",value:i.Town,onChange:r})})}),e.jsx("div",{className:"col-lg-3 col-md-2 col-sm-12",children:e.jsxs("div",{className:"searchinputdiv",children:[e.jsx(Ce,{placeholderText:"Select From Date",selected:i.From,onChange:c=>y(c,"From"),className:"secondRowinput"}),e.jsx("div",{className:"dateicon",children:e.jsx(gs,{size:16,style:{color:"#3a2f49",fontFamily:"Cormorant Garamond"}})})]})}),e.jsx("div",{className:"col-lg-3 col-md-2 col-sm-12 ",children:e.jsxs("div",{className:"searchinputdiv",children:[e.jsx(Ce,{value:i.To,placeholderText:"Select To Date",selected:i.To,onChange:c=>y(c,"To"),className:"secondRowinput"}),e.jsx("div",{className:"dateicon",children:e.jsx(gs,{size:16,style:{color:"#3a2f49",fontFamily:"Cormorant Garamond"}})})]})})]}),e.jsxs("button",{className:"short-cut-card-button ",type:"submit",children:[" ",e.jsx("span",{children:" SEARCH NOTICES "})," ",e.jsx("span",{className:"btn-para",children:"->"})]})]})},Ia=()=>e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"heading-text",children:[e.jsx("h1",{className:"heading",children:"Honoring Lives, Preserving Memories"}),e.jsx("p",{className:"para-text",children:"Find recent death, notice share family notices and access helpfull resources"})]}),e.jsx(Ge,{search:"Search For Death Notices",nothome:!1})]}),ss="/End_OFlifeTestBuild/assets/ob-D87Z7LdM.svg",as="/End_OFlifeTestBuild/assets/pr-B6jiC6JF.svg",ts="/End_OFlifeTestBuild/assets/me-BiM7PZWy.svg",Ns="/End_OFlifeTestBuild/assets/desktop_map-CfR3F64v.svg",Oa="/End_OFlifeTestBuild/assets/tablet_map-Dw_h6toF.svg",za="/End_OFlifeTestBuild/assets/mobile_map-CCM4NQf-.svg",Ua=()=>{const[l,t]=s.useState(Ns),a=ie(),u=s.useRef(null),[n,i]=s.useState({DeathNotices:[]}),[p,b]=s.useState([]);s.useEffect(()=>{const c=()=>{const g=window.innerWidth;g<=768?t(za):g<=1024?t(Oa):t(Ns)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const r=c=>{var v;const g=((v=c.target.getAttribute("id"))==null?void 0:v.split("-")[0])||"";g&&a(`/deathnotice/${g}`,{state:{countyName:g}})},f=async()=>{try{const c=await I.get("http://192.168.1.15:5000/directore/notices/week");i(c.data)}catch(c){console.error("Error fetching county data:",c),i({DeathNotices:[]})}},y=async()=>{try{const c=await I.get("http://192.168.1.15:5000/service/county");b(c.data.services)}catch(c){console.error("Error fetching county data:",c),b([])}};return s.useEffect(()=>{f(),y()},[i]),e.jsxs("div",{className:"map-container",ref:u,children:[e.jsx(ga,{src:l,beforeInjection:c=>{c.querySelectorAll("path").forEach(v=>{var C;v.addEventListener("click",r);const N=((C=v.getAttribute("id"))==null?void 0:C.split("-")[0])||"";v.setAttribute("data-tooltip-id","county-tooltip"),v.setAttribute("data-county",N)})}}),e.jsx(va,{id:"county-tooltip",place:"top",style:{backgroundColor:"#e8e8e7",color:"#000",borderRadius:"15px",padding:"13px",width:"285px",boxShadow:"inset 0 0 3.5px rgba(255, 255, 255, 0.93)",backgroundImage:"linear-gradient(0deg, #d8d8d6 0%, #fffeff 100%)",border:"1px solid #155c78",zIndex:1e3},render:({activeAnchor:c})=>{const g=c==null?void 0:c.getAttribute("data-county"),v=n.DeathNotices.filter(C=>C.county===g).length,N=p.filter(C=>C.county===g).length;return e.jsxs("div",{children:[e.jsx("p",{className:"map-countyName",children:g}),e.jsxs("p",{className:"map-notices",children:[e.jsx("b",{children:v})," Notices This Week"]}),e.jsxs("p",{className:"map-services",children:[e.jsx("b",{children:N})," Services Director"]})]})}})]})},Ha=()=>{const[l,t]=s.useState([]),[a,u]=s.useState(!0),[n,i]=s.useState(null);return s.useEffect(()=>{(async()=>{try{const b=await I.get("http://192.168.1.15:5000/directore/notices/recent");t(b.data.recentDeathNotices)}catch(b){i("Failed to fetch death notices."),console.error(b)}finally{u(!1)}})()},[]),a?e.jsx("div",{children:"Loading..."}):n?e.jsx("div",{children:n}):e.jsxs("div",{className:"death-notices",children:[e.jsx("h2",{className:"death-header",children:"Featured Death Notices"}),e.jsx("div",{className:"death-notices-container",children:e.jsx("div",{className:"notices-scroll",children:l.map((p,b)=>e.jsx(o,{to:`/noticesview/${encodeURIComponent(p.name)}-${encodeURIComponent(p.surname)}-${encodeURIComponent(p.notice_number)}`,children:e.jsxs("div",{className:"notice-card",children:[e.jsx("img",{className:"notice-image",src:`http://192.168.1.15:5000/${p.frist_image.slice(7).replace(/\\/g,"/")}`,alt:p.name}),e.jsxs("div",{className:"notice-details",children:[e.jsx("h4",{children:p.name}),e.jsx("p",{children:p.county})]})]})},b))})})]})},Ga=()=>{const l=[{icon:ss,heading:"Obituaries Archive",para:"Access past obituaries by year or name. Useful for those looking for older notices or conducting genealogical research.",button:"View Obituaries"},{icon:as,heading:"Practical Information",para:"A dedicated page listing upcoming funerals with dates, times, and locations. Provides convenience for people planning to attend services.",button:"Read More"},{icon:ts,heading:"Memorial Pages",para:"A section allowing families to create permanent digital memorials.Includes photos, stories, and tributes from loved ones.",button:"Create Memorial"}];return e.jsxs("div",{className:"short-cute",children:[e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justify-content-around",children:l.map((t,a)=>e.jsx("div",{className:"col-lg-4 col-md-6 col-sm-12",children:e.jsxs("div",{className:"short-cut-box",children:[e.jsx("img",{src:t.icon,alt:"icon",className:"short-cut-icon"}),e.jsx("h2",{className:"short-cut-card-heading",children:t.heading}),e.jsx("p",{className:"short-cut-card-para",children:t.para}),e.jsxs("button",{className:"short-cut-card-button",children:[`${t.button}`,e.jsx("p",{className:"btn-para",children:"->"})]})]})},a))})}),e.jsx("div",{className:"map-death-notice",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row d-flex justify-content-between",children:[e.jsx("div",{className:"col-lg-6 col-md-12 col-sm-12",children:e.jsx(Ua,{})}),e.jsx("div",{className:"col-lg-6 col-md-12 col-sm-12",children:e.jsx(Ha,{})})]})})})]})};function Ms({ata:l}){const[t,a]=s.useState([]),[u,n]=s.useState(!0),[i,p]=s.useState(null),b={dots:!0,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:4,margin:10,arrows:!1,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]};return s.useEffect(()=>{(async()=>{try{const f=await I.get("http://192.168.1.15:5000/directore/notices/recent");a(f.data.recentDeathNotices)}catch(f){p("Failed to fetch death notices."),console.error(f)}finally{n(!1)}})()},[]),u?e.jsx("div",{children:"Loading..."}):i?e.jsx("div",{children:i}):e.jsx("div",{className:"recent-death-notice",style:l?{paddingBottom:"20px"}:{paddingBottom:"350px"},children:e.jsxs("div",{className:"container custom-center-all",children:[e.jsx("h1",{className:"recent-death-notice-heading",children:"Recent Death Notices"}),e.jsx("div",{className:"slider-container",children:e.jsx(Na,{...b,children:t.map((r,f)=>e.jsx("div",{className:"card-custom",children:e.jsxs(o,{to:`/noticesview/${encodeURIComponent(r.name)}-${encodeURIComponent(r.surname)}-${encodeURIComponent(r.notice_number)}`,children:[e.jsx("div",{className:"img-div",children:e.jsx("img",{src:`http://192.168.1.15:5000/${r.frist_image.slice(7).replace(/\\/g,"/")}`,alt:r.name,className:"card-img"})}),e.jsxs("div",{className:"card-text",children:[e.jsx("h3",{className:"card-name",children:r.name}),e.jsx("p",{className:"card-text",children:r.town+" "+r.county})]})]})},f))})})]})})}const Va=({token:l,role:t})=>{const[a,u]=s.useState([]),n=ie(),i=async()=>{try{const f=await I.get("http://192.168.1.15:5000/user/recent/category");u(f.data.data)}catch(f){console.log(f)}};s.useEffect(()=>{i()},[]);const p=async f=>{try{const c=(await I.post("http://192.168.1.15:5000/service/list",{county:"",business_type:f})).data.service;console.log(c),n("/service-list",{state:{services:c}})}catch(y){console.error("Error fetching filtered services:",y)}},b=f=>{p(f)},r=()=>{console.log("clicking......"),t!=="user"&&n("/login",{state:{user:"user"}}),t==="user"&&n("/user/addnotice")};return e.jsxs("div",{className:"noticebord",children:[e.jsx("div",{className:"container notice-bord-container",children:e.jsxs("div",{className:"noticeboard-body",children:[e.jsx("h1",{className:"noticeboard-title",children:"Celebrate a Life, Share a Memory"}),e.jsx("p",{className:"noticeboard-para",children:"Create a heartfelt notice to honor your loved one. Share their story, cherish their memory, and keep their legacy alive with family and friends."}),e.jsx("button",{onClick:r,className:"noticeboard-btn",children:"Create A Family Notice"})]})}),e.jsx("div",{className:"service-list",children:e.jsxs("div",{className:"container custom-center-all",children:[e.jsx("h1",{className:"service-our-text",children:"Our Services"}),e.jsx("div",{className:"row cus-block",children:a.map(f=>e.jsx("div",{className:"col-lg-3 col-md-4 col-sm-6",onClick:()=>b(f.serviceName),children:e.jsx("div",{className:"service-card ",children:e.jsx("div",{className:"main-service-card",children:e.jsxs("div",{className:"service-card-body",children:[e.jsx("img",{src:`http://192.168.1.15:5000/${f.icon.slice(7).replace(/\\/g,"/")}`,alt:f.serviceName,className:"card-img-top"}),e.jsxs("div",{className:"service-card-body",children:[e.jsx("h5",{className:"srevice-card-title",children:f.serviceName}),e.jsxs("p",{className:"service-offer",children:["  ",f.offers," Offers"]}),e.jsxs("button",{className:"service-card-btn",children:[f.viewMoreText,e.jsx("p",{className:"service-btn-para",children:"->"})]})]})]})})})},f.id))}),e.jsxs(o,{to:"/service-directory",style:{margin:"20px"},className:"short-cut-card-button",children:["View All Services",e.jsx("p",{className:"btn-para",children:"->"})]})]})})]})},fs=({setRole:l,role:t})=>{const a=pe(),u=sessionStorage.getItem("token");return s.useEffect(()=>{const n=sessionStorage.getItem("token");if(console.log("HOmepage",n),n)try{const p=As(n).role;l(p)}catch(i){console.error("Error decoding token:",i)}},[a]),e.jsxs("div",{className:"cus-mt-0",children:[e.jsx(Ia,{}),e.jsx(Ga,{}),e.jsx(Ms,{token:u}),e.jsx(Va,{token:u,role:t})]})},Wa=()=>{var c;const t=(c=pe().state)==null?void 0:c.user,[a,u]=s.useState({email:"",password:"",role:t}),[n,i]=s.useState(!1),[p,b]=s.useState(),r=ie();s.useEffect(()=>{t&&u(g=>({...g,role:t}))},[t]);const f=g=>{const{name:v,value:N}=g.target;u(C=>({...C,[v]:N}))},y=async g=>{g.preventDefault();try{let v;t==="admin"?v=await I.post("http://192.168.1.15:5000/admin/login",a,{withCredentials:!0}):v=await I.post("http://192.168.1.15:5000/auth/login",a,{withCredentials:!0}),v.data.message==="Logged in successfully"&&(t==="admin"?(sessionStorage.setItem("token",v.data.token),r("/admin/dashboard")):(console.log(v),sessionStorage.setItem("token",v.data.token),window.location.href="http://192.168.56.1:3000/"))}catch(v){console.error("Error during login:",v),b("invalid email or password"),i(!0)}};return e.jsxs("div",{className:"login cus-mt-170",children:[e.jsx("div",{className:"container",children:e.jsx("div",{className:"row d-flex justify-content-center",children:e.jsx("div",{className:"col-lg-8 col-md-6 col-sm-12",children:e.jsxs("div",{className:"login-content",onClick:g=>g.stopPropagation(),children:[t==="user"&&e.jsx("h2",{className:"text-center my-5 add-famaily",children:"Login to Your Account"}),t==="service provider"&&e.jsx("h2",{className:"text-center my-3 add-famaily",children:"List A Service"}),t==="service provider"&&e.jsx("h2",{className:"text-center my-5 login-para",children:"Log in to access your account and add your service to our trusted directory."}),t==="admin"&&e.jsx("h2",{className:"text-center my-5 add-famaily",children:"Login to Admin Account"}),t==="directory"&&e.jsx("h2",{className:"text-center my-3 add-famaily",children:"Funeral Director Login"}),t==="directory"&&e.jsx("h2",{className:"text-center my-5 login-para",children:"Access your dashboard to manage and publish death notices."}),e.jsx("form",{className:"login-from",onSubmit:y,children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row g-3 justify-content-center",children:[e.jsx("div",{className:"col-lg-12 col-md-12 col-sm-12",children:e.jsx("input",{type:"email",name:"email",placeholder:"Enter your email",required:!0,className:"form-control",value:a.email,onChange:f})}),e.jsx("div",{className:"col-lg-12 col-md-12 col-sm-12",children:e.jsx("input",{type:"password",name:"password",placeholder:"Enter your password",required:!0,className:"form-control",value:a.password,onChange:f})}),e.jsx("div",{className:"col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center",children:e.jsx("button",{type:"submit",className:"link_btn",children:e.jsxs("p",{children:["Login ",e.jsx("span",{children:"->"})," "]})})})]})})}),t==="user"&&e.jsxs("div",{className:"register-div",children:[e.jsx("h4",{children:"Don't have an account yet?  "}),e.jsx(o,{className:"register-link",to:"/register",state:{user:t},children:"Sign Up here"})]}),t==="service provider"&&e.jsxs("div",{className:"register-div",children:[e.jsx("h4",{children:"Don't have an account yet? "}),e.jsx(o,{className:"register-link",to:"/register",state:{user:t},children:"Register"})]}),e.jsx(o,{to:"#",className:"support-link",children:"Need help? Contact Support for assistance."})]})})})}),e.jsx(de,{show:n,onConfirm:()=>i(!1),onCancel:()=>{i(!1)},message:p,title:"Error"})]})};function Ka(){return e.jsx("div",{children:e.jsx(Te,{})})}const Ya="/End_OFlifeTestBuild/assets/footerlogo-gzknoLiv.webp",qa="/End_OFlifeTestBuild/assets/liberatinglogo-DYAbJBra.webp",Ja=()=>e.jsx("div",{className:"footer-container",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:Ya,alt:"End of Life Logo",className:"custom-footer-logo"}),e.jsx(o,{className:"min-nav-link",to:"login",state:{user:"admin"},children:"Admin Login "}),e.jsx(o,{className:"min-nav-link",to:"login",state:{user:"service provider"},children:"Service  Login/Signup"}),e.jsx(o,{className:"min-nav-link",to:"login",state:{user:"directory"},children:"Funeral Directory Login"})]}),e.jsxs("div",{className:"custom-row",children:[e.jsxs("div",{className:"quick-links-div",children:[e.jsx("h5",{className:"mb-3 footer-links-heading",children:"Quick Links"}),e.jsxs("ul",{className:"quick-list-ul",children:[e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/",children:"Home"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/deathnotice",children:"Death Notices"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/familynotices",children:"Family Notices"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/",children:"Resources"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/",children:"About Us"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/service-list",children:"Services"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/",children:"FAQ"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/",children:"Contact Us"})})]})]}),e.jsxs("div",{className:"service-link-div",children:[e.jsx("h5",{className:"mb-3 footer-links-heading",children:"Services"}),e.jsxs("div",{className:"custom-row left",children:[e.jsx("div",{className:"frist-service-div",children:e.jsxs("ul",{className:"list-unstyled",children:[e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/service-directory",state:{category:"Auctioneers & Valuers"},children:"Auctioneers & Valuers"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/service-directory",state:{category:"Bereavement Counselling"},children:"Bereavement Counselling"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/service-directory",state:{category:"Caterers"},children:"Caterers"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/service-directory",state:{category:"Cemeteries and Memorial Parks"},children:"Cemeteries and Memorial Parks"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/service-directory",state:{category:"Charities"},children:"Charities"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/service-directory",state:{category:"Civil & Humanist Funerals"},children:"Civil & Humanist Funerals"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/service-directory",state:{category:"Florists"},children:"Florists"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/service-directory",state:{category:"Funeral Director"},children:"Funeral Director"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/service-directory",state:{category:"Funeral Plans"},children:"Funeral Plans"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/service-directory",state:{category:"Funeral Video & Streaming"},children:"Funeral Video & Streaming"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/service-directory",state:{category:"Grave Maintenance"},children:"Grave Maintenance"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/service-directory",state:{category:"Grave Markers, Plaques & Ornaments"},children:"Grave Markers, Plaques & Ornaments"})})]})}),e.jsx("div",{className:"sceond-service-div",children:e.jsxs("ul",{className:"list-unstyled",children:[e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/headstones-monuments",children:"Headstones & Monuments"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/homecare-support",children:"Homecare & Support"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/hotels-restaurants-venues",children:"Hotels, Restaurants & Venues"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/house-clearance-renovations",children:"House Clearance & Renovations"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/memorial-cards-keyrings",children:"Memorial Cards & Keyrings"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/repatriation",children:"Repatriation"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/singers-musicians",children:"Singers and Musicians"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/suit-hire-funeral-attire",children:"Suit Hire - Funeral Attire"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/sympathy-cards-memorial-gifts",children:"Sympathy Cards & Memorial Gifts"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/trace-your-ancestors",children:"Trace Your Ancestors"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/urns-keepsakes",children:"Urns & Keepsakes"})})]})})]})]}),e.jsxs("div",{className:"death-links",children:[e.jsx("h5",{className:"mb-3 footer-links-heading",children:"Family Notices"}),e.jsxs("ul",{className:"list-unstyled",children:[e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/familynotices",children:"View All"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/familynotices",state:{Tab:"Acknowledgement"},children:"Acknowledgement"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/familynotices",state:{Tab:"Anniversary"},children:"Anniversary"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/familynotices",state:{Tab:"Month's Mind"},children:"Month's Mind"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/familynotices",state:{Tab:"Birthday Memorial"},children:"Birthday Memorial"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/familynotices",state:{Tab:"Memorial Mass"},children:"Memorial Mass"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/familynotices",state:{Tab:"Memorial Services"},children:"Memorial Services"})})]})]}),e.jsxs("div",{className:"county-links",children:[e.jsx("h5",{className:"mb-3 footer-links-heading",children:"By County"}),e.jsxs("ul",{className:"list-unstyled",children:[e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/deathnotice",children:"View All"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/deathnotice/Antrim",children:"Antrim"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/deathnotice/Armagh",children:"Armagh"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/deathnotice/Carlow",children:"Carlow"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/deathnotice/Cavan",children:"Cavan"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/deathnotice/Clare",children:"Clare"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/deathnotice/Cork",children:"Cork"})}),e.jsx("li",{children:e.jsx(o,{className:"footer-link",to:"/deathnotice/Derry",children:"Derry"})})]})]})]}),e.jsxs("div",{className:"text-center mt-4 footerbottom ",children:[e.jsxs("div",{className:"mb-0 d-flex justify-content-center my-5 ",children:[" ",e.jsx(o,{className:"footer-link mx-3",to:"#",children:"Terms & Conditions "}),"  ",e.jsx(o,{className:"footer-link mx-3",to:"#",children:" Privacy Policy "})," ",e.jsx(o,{className:"footer-link mx-3",to:"#",children:" Contact "})," ",e.jsx(o,{className:"footer-link mx-3",to:"#",children:"Donate "})," "]}),e.jsx("div",{className:"liberating_logo_div my-3",children:e.jsx("img",{src:qa})})]})]})}),Qa=()=>{var N;const t=(N=pe().state)==null?void 0:N.user,a=ie(),[u,n]=s.useState({username:"",email:"",password:"",role:t||"",termsAccepted:!1}),[i,p]=s.useState(!1),[b,r]=s.useState(!1),[f,y]=s.useState();s.useEffect(()=>{t&&n(C=>({...C,role:t}))},[t]);const c=C=>{const{name:w,value:j,type:m,checked:A}=C.target;n(M=>({...M,[w]:m==="checkbox"?A:j}))},g=async C=>{if(C.preventDefault(),!u.termsAccepted){alert("You must accept the terms and conditions.");return}try{const w=await I.post("http://192.168.1.15:5000/auth/register",u);y(t+"registered successfully"),p(!0),r(!0)}catch(w){console.error("Error during registration:",w),y(w.response.data.message),r(!0)}},v=()=>{a("/login",{state:{user:t}}),r(!1),p(!1)};return e.jsxs("div",{className:"register-container cus-mt-170",children:[e.jsx("div",{className:"container",children:e.jsx("div",{className:"row d-flex justify-content-center",children:e.jsx("div",{className:"col-lg-8 col-md-6 col-sm-12",children:e.jsxs("div",{className:"login-content",onClick:C=>C.stopPropagation(),children:[e.jsx("h2",{className:"text-center my-5 add-famaily",children:"Create your account"}),e.jsx("form",{className:"login-from",onSubmit:g,children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-lg12 colmd-12 col-sm-12",children:e.jsx("input",{type:"text",id:"username",name:"username",value:u.username,onChange:c,className:"form-control",placeholder:"Enter your Username",required:!0})}),e.jsx("div",{className:"col-lg-12 col-md-12 col-sm-12",children:e.jsx("input",{type:"email",id:"email",name:"email",value:u.email,onChange:c,required:!0,className:"form-control",placeholder:"Enter your email"})}),e.jsx("div",{className:"col-lg-12 col-md-12 col-sm-12",children:e.jsx("input",{type:"password",id:"password",name:"password",value:u.password,onChange:c,className:"form-control",placeholder:"Enter your Password",required:!0})}),e.jsx("div",{className:"col-lg-12 col-md-12 col-sm-12",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"termsAccepted",checked:u.termsAccepted,onChange:c}),"I accept the terms and conditions"]})}),e.jsx("div",{className:"col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center",children:e.jsx("button",{type:"submit",className:" link_btn",children:e.jsxs("p",{children:["  Create Account ",e.jsx("span",{children:"->"})," "]})})})]})})}),e.jsxs("div",{className:"register-div",children:[e.jsx("h4",{children:"Already have an account? "}),e.jsx(o,{className:"register-link",to:"/login",state:{user:t},children:"Login"})]})]})})})}),!i&&e.jsx(de,{show:b,onConfirm:()=>r(!1),onCancel:()=>{r(!1)},message:f,title:"Error"}),i&&e.jsx(de,{show:b,onConfirm:v,onCancel:()=>{r(!1)},message:f,title:"Error"})]})},ue=[{county:"Antrim",towns:["Ballymena","Larne","Antrim","Carrickfergus","Ballymoney","Crumlin","Randalstown"]},{county:"Armagh",towns:["Armagh City","Portadown","Lurgan","Markethill","Keady","Tandragee","Richhill"]},{county:"Carlow",towns:["Carlow Town","Bagenalstown","Tullow","Muine Bheag","Graiguecullen","Borris"]},{county:"Cavan",towns:["Cavan Town","Belturbet","Bailieborough","Virginia","Cootehill","Kingscourt","Shercock"]},{county:"Clare",towns:["Ennis","Shannon","Kilrush","Lahinch","Scariff","Miltown Malbay","Tulla"]},{county:"Cork",towns:["Cork City","Mallow","Bandon","Kinsale","Cobh","Clonakilty","Bantry","Skibbereen","Blarney"]},{county:"Derry",towns:["Londonderry","Coleraine","Limavady","Dungiven","Maghera","Portstewart","Castlerock"]},{county:"Donegal",towns:["Letterkenny","Buncrana","Donegal Town","Bundoran","Killybegs","Carndonagh","Milford","Lifford"]},{county:"Down",towns:["Newry","Bangor","Holywood","Downpatrick","Warrenpoint","Kilkeel","Lisburn"]},{county:"Dublin",towns:["Dublin City","Dún Laoghaire","Tallaght","Blanchardstown","Clondalkin","Lucan","Skerries","Swords"]},{county:"Fermanagh",towns:["Enniskillen","Lisnaskea","Irvinestown","Derrylin","Ballyshannon","Kesh","Belcoo"]},{county:"Galway",towns:["Galway City","Tuam","Loughrea","Athenry","Ballinasloe","Oranmore","Clifden","Gort"]},{county:"Kerry",towns:["Tralee","Killarney","Listowel","Castleisland","Killorglin","Dingle","Brosna","Ballybunion"]},{county:"Kildare",towns:["Naas","Newbridge","Kildare Town","Athy","Maynooth","Kilcock","Leixlip","Monasterevin"]},{county:"Kilkenny",towns:["Kilkenny City","Thomastown","Callan","Graiguenamanagh","Castlecomer","Freshford","Kilmacow"]},{county:"Laois",towns:["Portlaoise","Mountmellick","Abbeyleix","Mountrath","Borris-in-Ossory","Ballinakill"]},{county:"Leitrim",towns:["Carrick-on-Shannon","Ballinamore","Dromod","Drumshanbo","Mohill","Leitrim Village"]},{county:"Limerick",towns:["Limerick City","Kilmallock","Newcastle West","Adare","Croom","Pallasgreen"]},{county:"Longford",towns:["Longford Town","Ballymahon","Granard","Lanesborough","Kenagh","Abbeylara"]},{county:"Louth",towns:["Drogheda","Dundalk","Ardee","Dunleer","Carlingford","Tullyallen","Termonfeckin"]},{county:"Mayo",towns:["Castlebar","Ballina","Westport","Claremorris","Kilmovee","Balla","Foxford","Belmullet"]},{county:"Meath",towns:["Navan","Dunshaughlin","Kells","Trim","Ashbourne","Ratoath","Summerhill"]},{county:"Monaghan",towns:["Monaghan Town","Carrickmacross","Castleblayney","Clones","Scotstown","Ballybay"]},{county:"Offaly",towns:["Tullamore","Birr","Edenderry","Clara","Rahan","Shannonbridge"]},{county:"Roscommon",towns:["Roscommon Town","Boyle","Castlerea","Ballaghaderreen","Strokestown","Tarmonbarry"]},{county:"Sligo",towns:["Sligo Town","Ballymote","Tubbercurry","Enniscrone","Grange","Coolaney"]},{county:"Tipperary",towns:["Clonmel","Nenagh","Thurles","Tipperary Town","Cashel","Cahir","Fethard"]},{county:"Tyrone",towns:["Omagh","Dungannon","Strabane","Cookstown","Dungannon","Enniskillen"]},{county:"Waterford",towns:["Waterford City","Dungarvan","Tramore","Tallow","Lismore","Kilmeaden"]},{county:"Westmeath",towns:["Athlone","Mullingar","Moate","Kinnegad","Rochfortbridge","Castlepollard"]},{county:"Wexford",towns:["Wexford Town","Gorey","Enniscorthy","New Ross","Ferns","Rosslare"]},{county:"Wicklow",towns:["Wicklow Town","Arklow","Bray","Blessington","Greystones","Baltinglass"]}],Za=()=>{const l=[{icon:ss,heading:"Long Duration",para:"List notice for up to 5 weeks under Family Notices section",button:"Read More"},{icon:as,heading:"Death Notice Link",para:"Permanently link Acknowledgement to death notice - view",button:"Read More"},{icon:ts,heading:"Verses & Gallery",para:"Add up to 3 photos and a verse",button:"Read More"},{icon:ss,heading:"Month’s Mind Link",para:"Show Month s Mind link on death notice for up to 5 wks - view",button:"Read More"},{icon:as,heading:"Sharing",para:"Share on Social Media",button:"Read More"},{icon:ts,heading:"Editable",para:"Save a draft notice & edit errors or omissions immediately",button:"Read More"}];return e.jsx("div",{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justify-content-around",children:l.map((t,a)=>e.jsx("div",{className:"col-lg-4 col-md-6 col-sm-12",children:e.jsxs("div",{className:"short-cut-box-cus",children:[e.jsx("img",{src:t.icon,alt:"icon",className:"short-cut-icon"}),e.jsx("h3",{className:"short-cut-card-heading",children:t.heading}),e.jsx("p",{className:"short-cut-card-para",children:t.para}),e.jsxs("button",{className:"short-cut-card-button",children:[`${t.button}`,e.jsx("p",{className:"btn-para",children:"->"})]})]})},a))})})})},Xa=({previewData:l,onClose:t})=>{const{name:a,surname:u,item:n,price:i,content:p,images:b,county:r}=l;return e.jsx("div",{className:"preview-modal",children:e.jsx("div",{className:"modal-content-privew",children:e.jsxs("section",{className:"acknowledgement a-privew",children:[e.jsx("button",{onClick:t,className:"cus-modal-close-btn cus-close-btn",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:"box",children:[e.jsxs("div",{className:"top-panel",children:[e.jsx("h3",{className:"acknowledgement-title",children:n}),e.jsx("div",{className:"user-img",children:e.jsx("div",{className:"photo",children:b&&b.length>0?e.jsx("img",{className:"perimg",src:URL.createObjectURL(b[0]),alt:"preview"}):e.jsx("div",{children:"No image available"})})})]}),e.jsxs("div",{className:"middle-panel",children:[e.jsx("h3",{className:"acknowledgement-title",children:a}),e.jsx("p",{children:r})]}),e.jsx("div",{className:"bottom-panel",dangerouslySetInnerHTML:{__html:p}})]})})]})})})};function et({token:l}){var xs;const[t,a]=s.useState(1),u=ie(),[n,i]=s.useState(!1),[p,b]=s.useState([]),[r,f]=s.useState(null),[y,c]=s.useState([]),[g,v]=s.useState(1),[N,C]=s.useState(!1),[w,j]=s.useState(!0),[m,A]=s.useState(1),[M,h]=s.useState({}),[S,d]=s.useState(null),[$,_]=s.useState(""),[z,F]=s.useState("<p>This is the initial content of the editor.</p>"),[E,D]=s.useState(""),[k,O]=s.useState(""),[T,Z]=s.useState({county:"",town:""}),[X,se]=s.useState(""),[q,Q]=s.useState({town:"Town 1"}),[L,R]=s.useState([{county:"",town:""}]),[ee,ce]=s.useState(!1),[re,ve]=s.useState(!1),[ne,ae]=s.useState(!1),[fe,me]=s.useState(),[be,ke]=s.useState(!1),[he,_e]=s.useState(),[ye,Ve]=s.useState(),[we,Me]=s.useState(),[te,We]=s.useState({category:"",county:"",church:""}),[Pe,Ke]=s.useState(!1),[xe,oe]=s.useState({frist_img:"",sceond_img:"",third_img:""}),[De,Ye]=s.useState(!1),[Fe,$e]=s.useState(!1),[Ae,Ee]=s.useState(null),[P,V]=s.useState(!1),[J,K]=s.useState(),[W,Le]=s.useState({From:"",To:""}),Re=(x,B)=>{Le(Y=>({...Y,[B]:x}))},Be=s.useRef(null);s.useEffect(()=>{(async()=>{try{const B=await I.get("http://192.168.1.15:5000/user/service/type");console.log(B.data),b(B.data.data)}catch{}})()},[]);const Rs=()=>{if(r&&t===1){a(t+1);return}if($&&E&&T.county&&T.town&&t===2){a(t+1);return}he&&t===3?a(t+1):(!r&&t===1&&me("Select Type of Notice"),!$&&t===2&&me("Enter the Name "),!E&&t===2&&me("Enter Sur name"),!T.county&&t===2&&me("Select County"),!T.town&&t===2&&me("Select Town"),!he&&t===3&&me("Upload Images"),ae(!0))},Bs=()=>{a(t-1)},Is=x=>{f(x)},Os=()=>{i(!0),n&&q.length<2&&Q([...q,{town:""}])},zs=x=>{Q({town:""}),i(!1)},Us=()=>{ce(!0),ee&&L.length<2&&R([...L,{county:"",town:""}])},Hs=x=>{const B=L.filter((Y,H)=>H!==x);R(B)},rs=(x,B,Y)=>{const H=[...L];H[x][B]=Y,R(H)},Gs=x=>{Q({town:x})},Vs=x=>{const{files:B}=x.target,Y=B[0];if(Y){const H=Y.name.split(".").pop().toLowerCase();if(Y.size>2*1024*1024){oe(G=>({...G,frist_img:"file size exceeds 2MB. Please upload a smaller file."}));return}if(H!=="png"&&H!=="jpg"&&H!=="jpeg"){oe(G=>({...G,frist_img:" file must be a PNG or JPG image."}));return}oe(G=>({...G,frist_img:""}))}_e(x.target.files)},Ws=x=>{const{files:B}=x.target,Y=B[0];if(Y){const H=Y.name.split(".").pop().toLowerCase();if(Y.size>2*1024*1024){oe(G=>({...G,sceond_img:" file size exceeds 2MB. Please upload a smaller file."}));return}if(H!=="png"&&H!=="jpg"&&H!=="jpeg"){oe(G=>({...G,sceond_img:" file must be a PNG or JPG image."}));return}oe(G=>({...G,sceond_img:""}))}Ve(x.target.files)},Ks=x=>{const{files:B}=x.target,Y=B[0];if(Y){const H=Y.name.split(".").pop().toLowerCase();if(Y.size>2*1024*1024){oe(G=>({...G,third_img:"file size exceeds 2MB. Please upload a smaller file."}));return}if(H!=="png"&&H!=="jpg"&&H!=="jpeg"){oe(G=>({...G,third_img:" file must be a PNG or JPG image."}));return}oe(G=>({...G,third_img:""}))}Me(x.target.files)},os=x=>{const{name:B,value:Y}=x.target;Z({...T,[B]:Y})},qe=x=>{const{name:B,value:Y}=x.target;We({...te,[B]:Y})},Ys=()=>{const x={name:$||"",nee:k||"",surname:E||"",item:r?r.item:"",price:r?r.price:0,content:z,payment:r?r.price:0,status:!1,town:T.town,frist_another_town:L&&L[0]?L[0].town:"",sceond_another_town:L&&L[1]?L[1].town:"",frist_another_county:L&&L[0]?L[0].county:"",another_town:q?q.town:"",street:X,category:te?te.category:"",county:te?te.county:"",church:te?te.church:"",images:he};$&&he&&r&&T.county&&T.town&&E&&(Ee(x),V(!0))},qs=x=>{F(x)},Js=async(x,B,Y)=>{const H=parseInt(B,10);if(isNaN(H)){console.error("Invalid amount:",B);return}console.log(typeof H,H);try{const G=await fetch("http://192.168.1.15:5000/user/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({noticeId:x,amount:H,item:Y})}),je=await G.json();if(!G.ok){console.error("Payment error:",je.error);return}console.log(je.sessionUrl),window.location.href=je.sessionUrl}catch(G){console.error("Payment request failed:",G)}},Qs=async()=>{var B,Y,H;const x={name:$||"",nee:k||"",surname:E||"",item:r?r.item:"",price:r?r.price:0,content:z,payment:r?r.price:0,status:!1,town:T.town,county:T.county,frist_another_town:((B=L==null?void 0:L[0])==null?void 0:B.town)||"",sceond_another_town:((Y=L==null?void 0:L[1])==null?void 0:Y.town)||"",frist_another_county:((H=L==null?void 0:L[0])==null?void 0:H.county)||"",another_town:(q==null?void 0:q.town)||"",street:X,category:(te==null?void 0:te.category)||"",church_county:te.county,church:(te==null?void 0:te.church)||"",period_from:W.From,period_to:W.To};try{const G=new FormData;Object.keys(x).forEach(ps=>{G.append(ps,x[ps])}),he&&G.append("first_image",he[0]),ye&&G.append("second_image",ye[0]),we&&G.append("third_image",we[0]);const je=await fetch("http://192.168.1.15:5000/user/add",{method:"POST",body:G,headers:{Authorization:`Bearer ${l}`}}),Ie=await je.json();if(!je.ok){me(Ie.error),ae(!0);return}Js(Ie.familyNoticeId,Ie.price,Ie.item)}catch(G){console.error("Form submission error:",G)}},ds=async(x,B=!1)=>{C(!0);try{const Y=await I.get("http://192.168.1.15:5000/user/notices/pagination",{params:{page:x,limit:10,item:"",...M}});if(B)c(Y.data.notices),A(Y.data.totalPages);else{const H=Y.data.notices.filter(G=>!y.some(je=>je.id===G.id));c(G=>[...G,...H])}j(Y.data.notices.length>0)}catch(Y){console.error(Y)}finally{C(!1)}},Zs=x=>{h(x)},Xs=x=>{d(x),_(x.name),D(x.surname),Z({county:x.county,town:x.town}),ve(!1),console.log("Selected Row Data:",x)};s.useEffect(()=>{c([]),v(1),ds(1,!0)},[M]);const ms=x=>{v(x),ds(x)},hs=()=>{u("/"),ke(!1),ae(!1)},ea=()=>{Ye(!De),$e(!De)},us=((xs=ue.find(x=>x.county===T.county))==null?void 0:xs.towns)||[];return e.jsxs("div",{className:"notice-from cus-mt-170",children:[e.jsxs("div",{className:"container mt-5",children:[e.jsx("h2",{className:"text-center my-5 add-famaily",children:" Add Family Notice"}),e.jsxs("div",{className:"d-flex justify-content-evenly mb-4 line-hide",children:[e.jsxs("div",{className:`step1-indicator ${t>=1?"active":""}`,children:[e.jsxs("p",{className:`p-number  ${t>=1?"p-number-active":""}`,children:[" ",t>1?e.jsx("span",{className:"span-number",children:"1"}):e.jsx("span",{className:"span-number",children:"1"})]})," ",e.jsxs("p",{className:"mx-2 p-line",children:[" Select Type of ",e.jsx("br",{})," Notice"]})]}),e.jsxs("div",{className:`step1-indicator ${t>2?"active":""}`,children:[e.jsx("p",{className:`p-number ${t>2?"p-number-active":""}`,children:t>2?e.jsx("span",{className:"span-number",children:"2"}):e.jsx("span",{className:"span-number",children:"2"})})," ",e.jsxs("p",{className:"mx-2 p-line",children:[" Add Details of ",e.jsx("br",{})," the Deceased "]})]}),e.jsxs("div",{className:`step1-indicator ${t>=3?"active":""}`,children:[e.jsx("p",{className:`p-number ${t>3?"p-number-active":""}`,children:t>3?e.jsx("span",{className:"span-number",children:"3"}):e.jsx("span",{className:"span-number",children:"3"})})," ",e.jsx("p",{className:"mx-2 p-line",children:" Add Content "})]}),e.jsxs("div",{className:`step1-indicator ${t>4?"active":""}`,children:[e.jsx("p",{className:`p-number mx-2   ${t>4?"p-number-active":""}`,children:t>4?e.jsx("span",{className:"span-number",children:"4"}):e.jsx("span",{className:"span-number",children:"4"})})," ",e.jsx("p",{className:"mx-2 p-line",children:" Pay & Publish "})]})]}),e.jsx("div",{className:"card cus-card-shadow",children:e.jsxs("div",{className:"card-body",children:[t===1&&e.jsxs("div",{children:[e.jsxs("div",{className:"select-heading-div my-5",children:[e.jsx("h2",{className:"select-type text-center",children:"Select Type of Notice"}),e.jsx("p",{className:"select-type-para text-center",children:"Select any of the following notice types. Click the ‘Create Family Notice’ button to continue"})]}),e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row ",children:p.map((x,B)=>e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"form-check",children:[e.jsxs("div",{className:"frist-from-div my-3",children:[e.jsx("input",{className:"form-check-input cus-check-input",style:{marginRight:"10px"},type:"radio",id:`item-${x.id}`,name:"noticeItem",checked:x.id,onChange:()=>Is(x)}),e.jsxs("label",{className:"form-check-label",htmlFor:`item-${x.id}`,children:[x.item," ",e.jsx("br",{})," ",e.jsxs("label",{className:"item-price",children:["€",x.price.toFixed(2)]})]})]}),e.jsx("p",{className:"info-icon",children:"i"})]},x.id)}))})})})]}),t===2&&e.jsxs("div",{children:[e.jsxs("div",{className:"shadow-div",children:[e.jsxs("div",{className:"select-heading-div my-5",children:[e.jsx("h2",{className:"select-type text-center",children:"Add Details of the Deceased"}),e.jsx("p",{className:"select-type-para text-center",children:"Select whether the deceased’s death has been listed here, then continue. Select otherwise to create a new entry "})]}),e.jsxs("div",{className:"deceased-div my-5",children:[e.jsx("h4",{className:"text-center",children:"Has the deceased's death notice been listed on endoflife.ie?"}),e.jsxs("div",{className:"d-flex",children:[" ",e.jsx("button",{onClick:()=>{ve(!0)},className:`d-btn py-1 px-4 mx-2 ${re?"d-active":""}`,children:"Yes"}),e.jsx("button",{onClick:()=>{ve(!1)},className:`d-btn py-1 px-4 ${re?"":"d-active"}`,children:"NO"})]})]})]}),re?e.jsxs("div",{className:"container",children:[e.jsx(Ge,{search:"Search For Family Notices",onSearch:Zs,nothome:!0,insetp:!0,para:"Use the search box below to find the death notice you want to link this Acknowledgement to"}),N&&e.jsx("p",{children:"Loading..."}),e.jsxs("table",{className:"table table-hover custom-table",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Surname"}),e.jsx("th",{children:"Nee"}),e.jsx("th",{children:"Item"})]})}),e.jsx("tbody",{children:y.map(x=>e.jsxs("tr",{onClick:()=>Xs(x),children:[e.jsx("td",{children:x.name}),e.jsx("td",{children:x.surname}),e.jsx("td",{children:x.nee}),e.jsx("td",{children:x.item})]},x.id))})]}),e.jsx("div",{className:"pagination",children:e.jsxs("div",{className:"pagination-container mt-3",children:[e.jsx("button",{onClick:()=>ms(g-1),className:"btn btn-outline-secondary btn-sm",disabled:g===1,children:"Previous"}),e.jsxs("span",{className:"mx-3",children:[g," / ",m]}),e.jsx("button",{onClick:()=>ms(g+1),className:"btn btn-outline-secondary btn-sm",disabled:g===m,children:"Next"})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"container my-5",children:[e.jsx("h1",{className:"text-center select-type",children:"Add Information"}),e.jsx("p",{className:"select-type-para text-center",children:"Add information about the deceased"}),e.jsxs("div",{className:"row cus-form ",children:[e.jsx("div",{className:"col-lg-4 col-md-6 col-sm-12",children:e.jsx("div",{className:"mb-3",children:e.jsx("input",{placeholder:"Name",type:"text",className:"form-control",value:$,onChange:x=>_(x.target.value)})})}),e.jsx("div",{className:"col-lg-4 col-md-6 col-sm-12",children:e.jsx("div",{className:"mb-3",children:e.jsx("input",{placeholder:"Surname",type:"text",className:"form-control",value:E,onChange:x=>D(x.target.value)})})}),e.jsx("div",{className:"col-lg-4 col-md-6 col-sm-12",children:e.jsx("div",{className:"mb-3",children:e.jsx("input",{placeholder:"Nee",type:"text",className:"form-control",value:k,onChange:x=>O(x.target.value)})})}),e.jsx("div",{className:"col-lg-4",children:e.jsx("div",{className:"mb-3",children:e.jsxs("select",{className:"form-control",name:"county",value:T.county,onChange:os,children:[e.jsx("option",{value:"",children:"Select County"}),ue.map((x,B)=>e.jsx("option",{value:x.county,children:x.county},B))]})})}),e.jsx("div",{className:"col-lg-4",children:e.jsx("div",{className:"mb-3",children:e.jsxs("select",{className:"form-control",name:"town",value:T.town,onChange:os,disabled:T.county==="",children:[e.jsx("option",{value:"",children:"Select Town"}),us.map((x,B)=>e.jsx("option",{value:x,children:x},B))]})})}),e.jsx("div",{className:"col-lg-4 col-md-6 col-sm-12",children:e.jsx("div",{className:"mb-3",children:e.jsx("input",{placeholder:"Street",type:"text",className:"form-control",value:X,onChange:x=>se(x.target.value)})})})]}),e.jsx("div",{className:"row cus-row cus-form align-items-center",children:ee&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"county-text1",children:"Would you like this notice to display in another county?"}),L.map((x,B)=>{var Y;return e.jsxs(ns.Fragment,{children:[e.jsx("div",{className:"col-lg-5",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"County"}),e.jsxs("select",{className:"form-control",name:"county",value:x.county,onChange:H=>rs(B,"county",H.target.value),children:[e.jsx("option",{value:"",children:"Select County"}),ue.map((H,G)=>e.jsx("option",{value:H.county,children:H.county},G))]})]})}),e.jsx("div",{className:"col-lg-5",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Town"}),e.jsxs("select",{className:"form-control",name:"town",value:x.town,onChange:H=>rs(B,"town",H.target.value),disabled:!x.county,children:[e.jsx("option",{value:"",children:"Select Town"}),(Y=ue.find(H=>H.county===x.county))==null?void 0:Y.towns.map((H,G)=>e.jsx("option",{value:H,children:H},G))]})]})}),e.jsx("div",{className:"col-lg-2",children:e.jsx("button",{className:"btn-icon-cus ml-2",onClick:()=>Hs(B),children:e.jsx(Ue,{size:24,color:"black"})})})]},B)})]})})]}),e.jsxs("button",{className:"btn mb-3 cus-from-butt",onClick:Us,children:["Add Another County ",e.jsx("span",{children:e.jsx(le,{})})]}),n&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"row cus-form align-items-center",children:[e.jsx("div",{className:"col-lg-10 col-md-10 col-sm-10",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Town"}),e.jsxs("select",{className:"form-control",name:"town",value:q.town,onChange:x=>Gs(x.target.value),disabled:T.county==="",children:[e.jsx("option",{value:"",children:"Select Town"}),us.map((x,B)=>e.jsx("option",{value:x,children:x},B))]})]})}),e.jsx("div",{className:"col-lg-2 col-md-2 col-sm-2",children:e.jsx("button",{className:"btn-icon-cus ml-2",onClick:()=>zs(),children:e.jsx(Ue,{size:24,color:"black"})})})]})}),e.jsxs("button",{className:"btn mb-3 cus-from-butt",onClick:Os,children:["Add Another Town ",e.jsx("span",{children:e.jsx(le,{})})]})]})]}),t===3&&e.jsxs("div",{children:[e.jsxs("div",{className:"shadow-div",children:[e.jsxs("div",{className:"step-3-heading",children:[e.jsx("h3",{className:"text-center",children:"Add Content"}),e.jsx("p",{className:"text-center",children:"Add all the information here. Select templates and verses. Add Photos and Church Map. View the notice by clicking Preview Notice"})]}),e.jsxs("div",{className:"row conten-info-main mx-3",children:[e.jsxs("div",{className:"col-lg-6 col-md-6 col-sm-6 content-info",children:[e.jsx("h1",{children:(r==null?void 0:r.name)||""}),e.jsx("h3",{children:`${$+" "+E+`(${k})`}`||""}),e.jsx("p",{children:`${T.county+" "+T.town}`})]}),e.jsxs("div",{className:"col-lg-6 col-md-6 col-sm-6 check-div",children:[e.jsxs("div",{className:"toggle-check",children:[e.jsx("p",{children:"Show Checklist"}),e.jsxs("label",{className:"switch",children:[e.jsx("input",{onChange:ea,type:"checkbox"}),e.jsx("span",{className:`slider round ${De?"ac":""}`})]})]}),e.jsxs("div",{className:"btn-sample-div",children:[e.jsxs("button",{className:"btn-sample",children:["Text Sample ",e.jsx("span",{children:"+"})]}),e.jsxs("button",{className:"btn-sample",children:["Sample Verses ",e.jsx("span",{children:"+"})]})]})]})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{children:[Fe&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50",children:e.jsxs("div",{className:"bg-[#f8f5e4] rounded-lg shadow-lg p-6 w-[650px] border border-gray-300",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-[#64492b]",children:"A sincere thank you to (include those that apply from each list) and simply write this as a continuous paragraph, separating each group with a semi-colon (;)"}),e.jsx("ul",{className:"list-none space-y-2 text-[#64492b]",children:["kind neighbours, relatives, friends, carers;","those who sent flowers, Mass cards, letters of sympathy, messages of condolence, memorial gifts;","the doctors, matron, nurses and staff of (name of hospital or hospice);","the management, nurses and staff of (name of nursing home or residential care centre) for their care and respect shown at all times;","those who travelled long distances, called to the house, attended the wake, rosary, removal, Mass, service, burial, cremation;","the (name any associations or charity you would like to acknowledge) for their help and support;","the (name any local clubs or groups) for their guard of honour;","all those who participated in the (Mass / service / celebration of life), including (name of celebrant, musicians / soloist);","parking marshals and those who managed the flow of traffic during the wake and funeral;","funeral directors, for their sensitive and professional handling of arrangements;"].map((x,B)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-[#64492b]",children:"✔"}),e.jsx("span",{children:x})]},B))}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:()=>$e(!1),className:"px-4 py-2 bg-transparent text-[#64492b] border border-[#64492b] rounded hover:bg-[#64492b] hover:text-white",children:"Close"})})]})}),e.jsx(ls,{apiKey:"imcj5lcwtj7zoi1bcf6gwnbkzzkgvxnkso4u0f340egont3p",onInit:(x,B)=>Be.current=B,initialValue:z,init:{height:500,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"},onChange:x=>qs(x.target.getContent())})]})})]}),e.jsxs("div",{className:"photo-upload-section",children:[e.jsx("h4",{className:"upload-title",children:"Add up to 3 Photos"}),e.jsx("div",{className:"upload-grid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-4",children:e.jsx("div",{className:"upload-card",children:e.jsxs("label",{className:"upload-label",children:[e.jsx("input",{type:"file",className:"d-none",accept:"image/*",multiple:!0,onChange:Vs}),e.jsxs("div",{className:"upload-box",children:[he&&e.jsx("img",{src:URL.createObjectURL(he[0]),alt:"Upload 1",className:"upload-preview"}),xe.frist_img&&e.jsx("p",{style:{color:"red"},children:xe.frist_img})]}),e.jsxs("span",{className:"upload-caption cus-from-butt",children:["Add Photo ",e.jsx(le,{})]})]})})}),e.jsx("div",{className:"col-lg-4",children:e.jsx("div",{className:"upload-card",children:e.jsxs("label",{className:"upload-label",children:[e.jsx("input",{type:"file",className:"d-none",accept:"image/*",multiple:!0,onChange:Ws}),e.jsxs("div",{className:"upload-box",children:[ye&&e.jsx("img",{src:URL.createObjectURL(ye[0]),alt:"Upload 2",className:"upload-preview"}),xe.sceond_img&&e.jsx("p",{style:{color:"red"},children:xe.sceond_img})]}),e.jsxs("span",{className:"upload-caption cus-from-butt",children:["Add Photo ",e.jsx(le,{})]})]})})}),e.jsx("div",{className:"col-lg-4",children:e.jsx("div",{className:"upload-card",children:e.jsxs("label",{className:"upload-label",children:[e.jsx("input",{type:"file",className:"d-none",accept:"image/*",multiple:!0,onChange:Ks}),e.jsxs("div",{className:"upload-box",children:[we&&e.jsx("img",{src:URL.createObjectURL(we[0]),alt:"Upload 3",className:"upload-preview"}),xe.third_img&&e.jsx("p",{style:{color:"red"},children:xe.third_img})]}),e.jsxs("span",{className:"upload-caption cus-from-butt",children:["Add Photo ",e.jsx(le,{})]})]})})})]})})]}),e.jsxs("div",{className:"charch-div",children:[e.jsx("h1",{children:" Church MAP "}),Pe&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-3",children:e.jsxs("select",{className:"form-control",name:"category",value:te.category,onChange:qe,children:[e.jsx("option",{value:"",children:"Select Map Category"}),e.jsx("option",{value:"Mass",children:"Mass"}),e.jsx("option",{value:"Service",children:"Service"})]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("select",{className:"form-control",name:"county",value:te.county,onChange:qe,children:[e.jsx("option",{value:"",children:"Select County"}),ue.map((x,B)=>e.jsx("option",{value:x.county,children:x.county},B))]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("select",{className:"form-control",name:"church",value:te.church,onChange:qe,children:[e.jsx("option",{value:"",children:"Select Church"}),e.jsx("option",{value:"Church 1",children:"Church 1"}),e.jsx("option",{value:"Church 2",children:"Church 2"})]})})]}),e.jsx("button",{className:"btn btn-secondary mb-3 cus-from-butt",onClick:()=>{Ke(!Pe)},children:Pe?e.jsxs("p",{children:["Remove Church Map ",e.jsx("span",{children:e.jsx(ws,{})})," "]}):e.jsxs("p",{children:[" Add Church MAP ",e.jsx("span",{children:e.jsx(le,{})})," "]})})]})]}),t===4&&e.jsxs("div",{children:[e.jsxs("div",{className:"shadow-div",children:[e.jsxs("div",{className:"select-heading-div  my-5",children:[e.jsx("h2",{className:"select-type text-center",children:"Publish"}),e.jsx("p",{className:"select-type-para text-center",children:"Choose The Publish Period and continue to the payment for finalization."})]}),e.jsx("div",{className:"container  my-5",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-4 col-md-4",children:[e.jsx("h4",{className:"select-type4",children:"Publishing Period"}),e.jsxs("div",{className:"rightboder",children:[e.jsx("div",{className:"searchinputdiv my-2",children:e.jsx(Ce,{value:W.From,placeholderText:"Select From Date",selected:W.From,onChange:x=>Re(x,"From"),className:"secondRowinput"})}),e.jsx("div",{className:"searchinputdiv my-2",children:e.jsx(Ce,{value:W.To,placeholderText:"Select To Date",selected:W.To,onChange:x=>Re(x,"To"),className:"secondRowinput"})})]})]}),e.jsx("div",{className:"com-lg-8 col-md-8",children:e.jsxs("div",{children:[e.jsxs("p",{className:"list-para",children:[" ",e.jsx("span",{children:e.jsx(ge,{color:"black"})})," Notices are published for up to 5 weeks in the Family Notice Section"]}),e.jsxs("p",{className:"list-para",children:[" ",e.jsx("span",{children:e.jsx(ge,{})}),"Where a Month's Mind notice has been added, a link to it also shows on the",e.jsx("br",{}),e.jsx("span",{className:"brack-span",children:" death notice for up to 5 weeks "})]}),e.jsxs("p",{className:"list-para",children:["  ",e.jsx("span",{children:e.jsx(ge,{})}),"Acknowledgements are linked permanently to the death notice"]}),e.jsxs("p",{className:"list-para",children:[" ",e.jsx("span",{children:e.jsx(ge,{})})," You can edit your Family Notices in the Member’s Area"]})]})})]})})]}),e.jsxs("div",{className:"container  my-5",children:[e.jsx("div",{className:"select-heading-div  my-5",children:e.jsx("h4",{className:"summery text-center my-5",children:"Summary"})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6 col-md-6",children:e.jsx("h4",{className:"showname",children:$+" "+E})}),e.jsxs("div",{className:"col-lg-6 col-md-6 my-3",children:[e.jsxs("div",{className:"sum-item-div my-2",children:[e.jsxs("h4",{children:[r.item," "]}),e.jsxs("h4",{children:[" ",`€ ${r.price}`]})]}),e.jsxs("div",{className:"sum-total-div my-2",children:[e.jsx("h4",{className:"total-price",children:"Total "}),e.jsxs("h4",{children:[" ",`€ ${r.price}`]})]}),e.jsxs("label",{className:"term",children:[e.jsx("input",{className:"term-check",type:"checkbox",name:"termsAccepted",checked:J,onChange:x=>K(x.target.value)}),"I accept the terms and conditions"]})]})]})]})]}),e.jsxs("div",{className:"mt-3 cus-btn-div-next",children:[t>1&&e.jsx("button",{className:"link_btn",onClick:Bs,children:e.jsxs("p",{children:[e.jsx("span",{children:"<-"}),"  Previous "]})}),t===4&&e.jsx("button",{className:"link_btn",onClick:Ys,children:e.jsxs("p",{children:["Preview",e.jsx("span",{children:e.jsx(is,{})})," "]})}),t<4&&e.jsx("button",{className:"link_btn",onClick:Rs,children:t===1?e.jsxs("p",{children:["Create Family Notice ",e.jsx("span",{children:"->"})," "]}):e.jsxs("p",{children:["Next",e.jsx("span",{children:"->"})," "]})}),t===4&&e.jsx("button",{className:"link_btn",onClick:Qs,children:e.jsxs("p",{children:["Pay & Publish ",e.jsx("span",{children:"->"})," "]})})]})]})}),t===1&&e.jsxs("div",{className:"notice-feature",children:[e.jsx("h1",{className:"text-center ",children:"Family Notice Features"}),e.jsx(Za,{})]})]}),!be&&e.jsx(de,{show:ne,onConfirm:()=>ae(!1),onCancel:()=>{ae(!1)},message:fe,title:"Error"}),be&&e.jsx(de,{show:ne,onConfirm:hs,onCancel:hs,message:fe,title:"Error"}),P&&Ae&&e.jsx(Xa,{previewData:Ae,onClose:()=>{V(!1)}})]})}const st=()=>e.jsx("div",{className:"App",style:{marginTop:"165px"},children:e.jsx(Te,{})}),Je=()=>{var $;const[l,t]=s.useState([]),[a,u]=s.useState("grid"),[n,i]=s.useState(1),[p,b]=s.useState(!1),[r,f]=s.useState(!0),[y,c]=s.useState(1),[g,v]=s.useState({}),C=($=pe().state)==null?void 0:$.data,{countydata:w}=He(),j=ie();s.useEffect(()=>{!w&&!C&&j("/deathnotice")},[w,j]),s.useEffect(()=>{if(C)t([]),i(1),m(1,!0,C);else if(w){const _={county:w,name:"",surname:"",nee:"",town:"",createdAt:"",updatedAt:""};t([]),i(1),m(1,!0,_)}else Object.keys(g).length===0&&(t([]),i(1),m(1,!0,{}))},[C,w]),s.useEffect(()=>{!C&&Object.keys(g).length>0&&(t([]),i(1),m(1,!0,g))},[g]);const m=async(_,z=!1,F)=>{b(!0);try{const E=await I.get("http://192.168.1.15:5000/directore/notices/pagination",{params:{page:_,limit:10,...F}});if(z)t(E.data.notices),c(E.data.totalPages);else{const D=E.data.notices.filter(k=>!l.some(O=>O.id===k.id));t(k=>[...k,...D])}f(E.data.notices.length>0)}catch(E){console.error(E)}finally{b(!1)}};s.useEffect(()=>{n>1&&m(n,!1,C||g)},[n,C,g]);const A=()=>{if(a==="list")return;const _=document.documentElement.scrollTop,z=document.documentElement.scrollHeight,F=window.innerHeight;_/(z-F)*100>=55&&!p&&r&&i(D=>D+1)};s.useEffect(()=>(a==="grid"?window.addEventListener("scroll",A):window.removeEventListener("scroll",A),()=>window.removeEventListener("scroll",A)),[p,r,a]);const M=_=>{_<1||_>y||i(_)},h=_=>{v(_),t([]),i(1),m(1,!0,_)},d=(_=>{const z=[..._].sort((D,k)=>new Date(k.period_from)-new Date(D.period_from)),F=[];let E=null;return z.forEach(D=>{const k=new Date(D.period_from),O=new Date(k);O.setDate(k.getDate()-k.getDay()+(k.getDay()===0?-6:1)),O.setHours(0,0,0,0);const T=new Date(O);T.setDate(O.getDate()+6),T.setHours(23,59,59,999),(!E||O.getTime()!==E.startDate.getTime())&&(E={startDate:O,endDate:T,notices:[]},F.push(E)),E.notices.push(D)}),F})(l);return e.jsxs("div",{className:"container  cus-mt-170",children:[e.jsx("div",{className:"row my-2",children:e.jsx(Ge,{search:"Search For Death Notices",onSearch:h,nothome:!0})}),e.jsxs("div",{className:"tab-heading-row",children:[e.jsx("p",{children:"Viwe As"}),e.jsxs("div",{className:"list-icon",children:[e.jsx(Ss,{size:24,className:"bs-icon",onClick:()=>u("grid")}),e.jsx(cs,{size:24,className:"bs-icon",onClick:()=>u("list")})]})]}),e.jsxs("div",{className:"container notice-container",children:[a==="grid"?e.jsx("div",{className:"row g-4",children:d.map((_,z)=>e.jsxs("div",{className:"col-12",children:[e.jsx("div",{className:"group-header p-3 mb-4 bg-light rounded",children:e.jsxs("h5",{className:"mb-0 text-secondary",children:["Notices published from ",_.startDate.toLocaleDateString()," to ",_.endDate.toLocaleDateString()]})}),e.jsx("div",{className:"row g-4",children:_.notices.map(F=>e.jsx("div",{className:"col-lg-3 col-md-6",children:e.jsx(o,{to:`/noticesview/${encodeURIComponent(F.name)}-${encodeURIComponent(F.surname)}-${encodeURIComponent(F.notice_number)}`,children:e.jsxs("div",{className:"card shadow-sm h-100 transition-all",children:[e.jsx("div",{className:"card-header bg-dark text-white p-3",children:e.jsx("h5",{className:"card-title mb-0 text-center",children:F.name})}),e.jsx("div",{className:"card-img-container",children:e.jsx("img",{src:`http://192.168.1.15:5000/${F.frist_image.slice(7).replace(/\\/g,"/")}`,className:"card-img-top object-fit-cover",alt:F.item,style:{height:"200px"}})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex flex-column gap-2",children:[e.jsx("p",{className:"mb-0 my-2 fw-medium text-center",children:`${F.name} ${F.surname} ${F.nee}`}),e.jsx("div",{className:"align-items-center gap-1 text-center",children:e.jsx("p",{className:"text-muted my-2 text-center",children:F.county})})]})})]})})},F.id))})]},z))}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"ps-4",children:"Name"}),e.jsx("th",{children:"Town"}),e.jsx("th",{children:"County"}),e.jsx("th",{className:"pe-4",children:"Published"})]})}),e.jsx("tbody",{children:l.map(_=>e.jsxs("tr",{className:"transition-all",children:[e.jsx("td",{className:"ps-4 fw-medium",children:_.name}),e.jsx("td",{children:_.town}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-secondary bg-opacity-10 text-secondary",children:_.county})}),e.jsx("td",{className:"pe-4 text-muted",children:new Date(_.createdAt).toLocaleDateString()})]},_.id))})]})}),a!=="grid"&&e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-5",children:[e.jsxs("button",{className:"btn btn-outline-primary px-4 py-2 d-flex align-items-center gap-2",onClick:()=>M(n-1),disabled:n===1,children:[e.jsx("i",{className:"bi bi-chevron-left"}),"Previous"]}),e.jsxs("span",{className:"mx-3 text-muted",children:["Page ",e.jsx("strong",{children:n})," of ",e.jsx("strong",{children:y})]}),e.jsxs("button",{className:"btn btn-outline-primary px-4 py-2 d-flex align-items-center gap-2",onClick:()=>M(n+1),disabled:n===y,children:["Next",e.jsx("i",{className:"bi bi-chevron-right"})]})]}),p&&e.jsx("div",{className:"d-flex justify-content-center my-5",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),!r&&e.jsx("div",{className:"text-center my-5 text-muted",children:e.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-center py-4 shadow-sm rounded",children:[e.jsx("i",{className:"bi bi-info-circle me-3 fs-2 text-warning"}),e.jsx("span",{className:"fw-medium",children:"No more notices to load"})]})})]})]})},at=()=>e.jsxs("div",{style:{textAlign:"center",padding:"200px"},children:[e.jsx("h1",{children:"404 - Page Not Found"}),e.jsx("p",{children:"The page you are looking for does not exist."})]}),tt=({formData:l})=>e.jsxs("div",{className:"intro-div",children:[e.jsx("p",{className:"text-justfiy into-para",children:"End of Life is Ireland's trusted platform for connecting families with essential services during life's most challenging moments. By adding your business to our directory, you'll gain visibility among those actively seeking the expertise and care you provide."}),e.jsxs("ul",{children:[" ",e.jsx("span",{children:" Why List Your Service? "}),e.jsx("li",{children:"Reach a targeted audience actively seeking your services"}),e.jsx("li",{children:"Gain visibility and credibility through our trusted platform"}),e.jsx("li",{children:"Enhance your online presence and drive more leads"})]}),e.jsxs("ul",{children:[" ",e.jsx("span",{children:"  One-Time Fee "}),e.jsx("li",{children:`For only €${l.payment} your business will be featured in our directory under the category and location of your choice.`})]}),e.jsxs("ul",{children:[" ",e.jsx("span",{children:" One-Time Fee "}),e.jsx("li",{children:"Dedicated service listing with detailed information."}),e.jsx("li",{children:"High-quality profile picture and logo upload."}),e.jsx("li",{children:"Direct contact information and map integration."}),e.jsx("li",{children:"Ability to add contact details, website, and custom content."}),e.jsx("li",{children:"Accessible to families across Ireland 24/7."})]})]}),nt=({formData:l,setFormData:t})=>{const a=s.useRef(null),[u,n]=s.useState("<p>This is the initial information of the editor.</p>"),[i,p]=s.useState({logo:"",banner:""}),b=c=>{const{name:g,value:v}=c.target;t({...l,[g]:v})},r=c=>{const{name:g,files:v}=c.target,N=v[0];if(N){const C=N.name.split(".").pop().toLowerCase();if(g==="logo"){if(N.size>2*1024*1024){p(w=>({...w,logo:"Logo file size exceeds 2MB. Please upload a smaller file."}));return}if(C!=="png"&&C!=="jpg"&&C!=="jpeg"){p(w=>({...w,logo:"Logo file must be a PNG or JPG image."}));return}p(w=>({...w,logo:""}))}if(g==="banner"){if(N.size>5*1024*1024){p(w=>({...w,banner:"Banner file size exceeds 5MB. Please upload a smaller file."}));return}if(C!=="png"&&C!=="jpg"&&C!=="jpeg"){p(w=>({...w,banner:"Banner file must be a PNG or JPG image."}));return}p(w=>({...w,banner:""}))}t({...l,[g]:N})}},f=c=>{n(c),console.log(c),t({...l,information:c})},y=c=>{c.preventDefault(),t({...l,information:u}),console.log("Form Data:",l)};return e.jsx("div",{className:"container",children:e.jsx("form",{onSubmit:y,children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-12 col-md-12 col-sm-12",children:e.jsxs("div",{className:"form-group my-2 s-inpit-div",children:[e.jsx("label",{children:"Business Name"}),e.jsx("input",{required:!0,type:"text",name:"business_name",className:"form-s-control",placeholder:"Enter Your business name",value:l.business_name,onChange:b})]})}),e.jsx("div",{className:"col-lg-12 col-md-12 col-sm-12",children:e.jsxs("div",{className:"form-group my-2 s-inpit-div",children:[e.jsx("label",{children:"Location Details"}),e.jsx("input",{type:"text",name:"location_details",className:"form-s-control",placeholder:"Enter Your location details ",value:l.location_details,onChange:b})]})}),e.jsx("div",{className:"col-lg-6 col-md-6 col-sm-12",children:e.jsxs("div",{className:"form-group my-2 s-inpit-div",children:[e.jsx("label",{children:"County"}),e.jsxs("select",{name:"county",value:l.county,onChange:b,className:"form-s-control",children:[e.jsx("option",{value:"",children:"Select County"}),ue.map((c,g)=>e.jsx("option",{value:c.county,children:c.county},g))]})]})}),e.jsx("div",{className:"col-lg-6 col-md-6 col-sm-12",children:e.jsxs("div",{className:"form-group my-2 s-inpit-div",children:[e.jsx("label",{children:"Business Type"}),e.jsxs("select",{name:"business_type",value:l.business_type,onChange:b,className:"form-s-control",children:[e.jsx("option",{value:"",children:"Select Business Type"}),e.jsx("option",{value:"Auctioneers & Valuers",children:"Auctioneers & Valuers"}),e.jsx("option",{value:"Bereavement Counselling",children:"Bereavement Counselling"}),e.jsx("option",{value:"Caterers",children:"Caterers"}),e.jsx("option",{value:"Cemeteries & Memorial Parks",children:"Cemeteries & Memorial Parks"}),e.jsx("option",{value:"Charities",children:"Charities"}),e.jsx("option",{value:"Civil & Humanist Funerals",children:"Civil & Humanist Funerals"}),e.jsx("option",{value:"Florists",children:"Florists"}),e.jsx("option",{value:"Funeral Directors",children:"Funeral Directors"})]})]})}),e.jsx("div",{className:"col-lg-6 col-md-6 col-sm-12",children:e.jsxs("div",{className:"form-group my-2 s-inpit-div",children:[e.jsx("label",{children:"Phone"}),e.jsx("input",{type:"number",name:"phone",className:"form-s-control",placeholder:"Enter Your Phone Number ",value:l.phone,onChange:b})]})}),e.jsx("div",{className:"col-lg-6 col-md-6 col-sm-12",children:e.jsxs("div",{className:"form-group my-2 s-inpit-div",children:[e.jsx("label",{children:"Website"}),e.jsx("input",{type:"text",name:"website",className:"form-s-control",placeholder:"Enter Your Webside url ",value:l.website,onChange:b})]})}),e.jsx("div",{className:"col-lg-12 col-md-12 col-sm-12",children:e.jsxs("div",{className:"form-group my-2 s-inpit-div",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",name:"email",className:"form-s-control",placeholder:"Enter Your Email ",value:l.email,onChange:b})]})}),e.jsx("div",{className:"photo-upload-section",children:e.jsx("div",{className:"upload-grid",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-2 col-md-21 d-flex flex-column",children:[e.jsx("h4",{className:"img-head",children:"Add Logo"}),e.jsxs("p",{className:"img-para",children:["File requirements: JPG, ",e.jsx("br",{}),"PNG, 2MB max size."]}),i.logo&&e.jsx("p",{style:{color:"red"},children:i.logo})]}),e.jsx("div",{className:"col-lg-4 col-md-5 ",children:e.jsx("div",{className:"upload-card",children:e.jsxs("label",{className:"upload-label",children:[e.jsx("input",{type:"file",name:"logo",className:"d-none",accept:"image/*",multiple:!0,onChange:r}),e.jsx("div",{className:"upload-box",children:(l==null?void 0:l.logo)&&e.jsx("img",{type:"file",name:"banner",src:URL.createObjectURL(l.logo),alt:"Upload 1",className:"upload-preview"})}),e.jsxs("span",{className:"upload-caption cus-from-butt",children:["Add Photo ",e.jsx(le,{})]})]})})}),e.jsxs("div",{className:"col-lg-2 col-md-11 d-flex flex-column",children:[e.jsx("h4",{className:"img-head",children:"Add Banner (Optional)"}),e.jsxs("p",{className:"img-para",children:["File requirements: JPG, ",e.jsx("br",{}),"PNG, 5MB max size."]}),i.banner&&e.jsx("p",{style:{color:"red"},children:i.banner})]}),e.jsx("div",{className:"col-lg-4 col-md-5",children:e.jsx("div",{className:"upload-card",children:e.jsxs("label",{className:"upload-label",children:[e.jsx("input",{type:"file",name:"banner",className:"d-none",accept:"image/*",multiple:!0,onChange:r}),e.jsx("div",{className:"upload-box",children:(l==null?void 0:l.banner)&&e.jsx("img",{src:URL.createObjectURL(l==null?void 0:l.banner),alt:"Upload 2",className:"upload-preview"})}),e.jsxs("span",{className:"upload-caption cus-from-butt",children:["Add Photo ",e.jsx(le,{})]})]})})})]})})}),e.jsx("div",{className:"col-lg-12 col-md-12 col-sm-12",children:e.jsx(ls,{apiKey:"imcj5lcwtj7zoi1bcf6gwnbkzzkgvxnkso4u0f340egont3p",onInit:(c,g)=>a.current=g,initialValue:u,init:{height:500,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",information_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"},onChange:c=>f(c.target.getContent())})})]})})})},it=({formData:l})=>e.jsxs("div",{className:"pay-container",children:[e.jsx("h3",{className:"text-center select-type",children:"Review and Confirm Your Listing"}),e.jsx("p",{className:"select-type-para text-center",children:"Provide the information families need to find your business."}),e.jsx("hr",{}),e.jsxs("div",{className:"pay-text-center",children:[l.logo&&e.jsx("img",{src:URL.createObjectURL(l.logo),alt:"Business Logo",className:"logo-img"}),e.jsx("h3",{className:"prv-b-name",children:l.business_name}),e.jsxs("p",{className:"prv-b-address",children:[e.jsxs("span",{children:[" ",l.business_type]})," in the county of ",e.jsxs("span",{children:[" ",l.county]})]}),e.jsx("p",{className:"pay-location",children:l.location_details}),e.jsxs("div",{className:"pay-row my-5",children:[e.jsxs("p",{className:"pay-location",children:[e.jsx("strong",{children:"+"})," ",l.phone]}),e.jsxs("p",{className:"pay-location",children:[e.jsx("strong",{})," ",l.website]}),e.jsxs("p",{className:"pay-location",children:[e.jsx("strong",{})," ",l.email]})]})]}),e.jsxs("div",{className:"pay-info-section",children:[e.jsx("h4",{className:"text-center info-he",children:"Information"}),e.jsx("div",{className:"border p-3",dangerouslySetInnerHTML:{__html:l.information}})]}),e.jsxs("div",{className:"pay-pricing-section",children:[e.jsx("h4",{className:"text-center price_de my-4",children:"Pricing Details"}),e.jsxs("p",{className:"py-price-para",children:[e.jsx("span",{className:"btw",children:" Service Listing Fee:"}),"  ",e.jsxs("span",{className:"btw",children:["  €",l.payment," "]})]}),e.jsxs("p",{className:"py-price-para",children:[e.jsx("span",{className:"btw",children:" Taxes (No VAT Included):"}),"   ",e.jsx("span",{className:"btw",children:" €0"})]}),e.jsxs("p",{className:" py-price-paramy-3 ",children:[e.jsx("span",{className:"btw",children:" Total:"}),"   ",e.jsxs("span",{className:"btw",children:[" €",l.payment]})]})]})]}),ct=({token:l})=>{const t=ie(),[a,u]=s.useState({business_name:"",location_details:"",county:"",business_type:"",phone:"",website:"",email:"",logo:null,banner:null,information:"",payment:0}),[n,i]=s.useState(1),[p,b]=s.useState(!1),[r,f]=s.useState(),[y,c]=s.useState(!1),g=async()=>{try{const m=await I.get("http://192.168.1.15:5000/service/price",{headers:{Authorization:`Bearer ${l}`}});u(A=>({...A,payment:m.data.price[0].price}))}catch(m){console.error("Error fetching settings:",m)}};s.useEffect(()=>{g()},[]);const v=()=>{if(n===1){i(n+1);return}n===2&&a.business_name&&a.business_type&&a.county&&a.email&&a.location_details&&a.phone&&a.logo?i(n+1):(a.logo||f("Upload the logo"),a.business_name||f("Enter The Business Name"),a.business_type||f("Enter the Business Type"),a.county||f("Select the County"),a.email||f("Enter your Email"),a.location_details||f("Enter Location Details"),a.phone||f("Enter the Phone Number"),a.logo&&f("Upload the logo"),b(!0))},N=()=>{i(n-1)},C=async(m,A,M)=>{const h=parseInt(A,10);if(isNaN(h)){console.error("Invalid amount:",A);return}console.log(typeof h,h);try{const S=await fetch("http://192.168.1.15:5000/service/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({noticeId:m,amount:h,item:M})}),d=await S.json();if(!S.ok){console.error("Payment error:",d.error);return}console.log(d.sessionUrl),window.location.href=d.sessionUrl}catch(S){console.error("Payment request failed:",S)}},w=async()=>{const m=new FormData;Object.keys(a).forEach(A=>{m.append(A,a[A])});try{const A=await fetch("http://192.168.1.15:5000/service/add",{method:"POST",body:m,headers:{Authorization:`Bearer ${l}`}}),M=await A.json();if(!A.ok){f(M.error),b(!0);return}console.log("Response:",M.service),C(M.service.id,M.service.payment,M.service.business_type)}catch{alert("Request failed. Please try again."),console.error("Request failed")}},j=()=>{t("/"),c(!1),b(!1)};return e.jsxs("div",{className:"notice-from",children:[e.jsxs("div",{className:"container my-4",children:[e.jsx("h1",{className:"text-center my-5 add-famaily",children:"Add Your Service"}),e.jsx("p",{className:"text-center mb-5 death-heading-para",children:"Join hundreds of trusted service providers across ireland"}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:"d-flex justify-content-evenly mb-4 line-hide",children:[e.jsxs("div",{className:`step-indicator ${n>=1?"active":""}`,children:[e.jsx("p",{className:`p-number ${n>0?"p-number-active":""}`,children:e.jsx("span",{className:"span-number",children:"1"})})," ",e.jsx("p",{className:"mx-2 p-line",children:" Introduction"})]}),e.jsxs("div",{className:`step-indicator ${n>2?"active":""}`,children:[e.jsx("p",{className:`p-number ${n>1?"p-number-active":""}`,children:e.jsx("span",{className:"span-number",children:"2"})})," ",e.jsx("p",{className:"mx-2 p-line",children:" Add Details "})]}),e.jsxs("div",{className:`step-indicator ${n>=3?"active":""}`,children:[e.jsx("p",{className:`p-number ${n>2?"p-number-active":""}`,children:e.jsx("span",{className:"span-number",children:"3"})})," ",e.jsx("p",{className:"mx-2 p-line",children:" Pay And Finalize"})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[n===1&&e.jsx(tt,{formData:a}),n===2&&e.jsx(nt,{formData:a,setFormData:u}),n===3&&e.jsx(it,{formData:a}),e.jsxs("div",{className:"mt-3 cus-btn-div-next",children:[n>1&&e.jsxs("button",{className:"link_btn",onClick:N,children:[e.jsx("span",{children:"<-"}),"  Previous"]}),n===3&&e.jsxs("button",{className:"link_btn",onClick:w,children:["Proceed to Payment  ",e.jsx("span",{children:"->"})]}),n===2&&e.jsxs("button",{className:"link_btn",onClick:v,children:["Next  ",e.jsx("span",{children:"->"})]}),n===1&&e.jsxs("button",{className:"link_btn",onClick:v,children:["Get Started    ",e.jsx("span",{children:"->"})]})]})]})})]}),!y&&e.jsx(de,{show:p,onConfirm:()=>b(!1),onCancel:()=>{b(!1)},message:r,title:"Error"}),y&&e.jsx(de,{show:p,onConfirm:j,onCancel:j,message:r,title:"Error"})]})},Fs=({})=>{const[l,t]=s.useState(""),[a,u]=s.useState(""),[n,i]=s.useState([]),p=async()=>{try{const c=await I.get("http://192.168.1.15:5000/user/service/category");i(c.data.notices)}catch(c){console.log(c)}};s.useEffect(()=>{p()},[]);const b=ie(),r=c=>{t(c.target.value)},f=c=>{u(c.target.value)},y=async()=>{b(`/service-list/${l||"all"}/${a||"all"}`)};return e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"text-center cus-service",children:"Services Directory"}),e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-lg-3 col-md-6 col-sm-12",children:e.jsx("p",{className:"cat-search",children:"Search For A Service"})}),e.jsx("div",{className:"col-lg-3 col-md-6 col-sm-12",children:e.jsxs("select",{className:"form-control cus-drop-cat",name:"county",value:l,onChange:r,children:[e.jsx("option",{value:"",children:"County"}),ue.map((c,g)=>e.jsx("option",{value:c.county,children:c.county},g))]})}),e.jsx("div",{className:"col-lg-3 col-md-6 col-sm-12",children:e.jsxs("select",{className:"form-control cus-drop-cat",name:"businessType",value:a,onChange:f,children:[e.jsx("option",{value:"",children:"Select Business Type"}),n.map((c,g)=>e.jsx("option",{value:c.serviceName,children:c.serviceName},g))]})}),e.jsx("div",{className:"col-lg-3 col-md-6 col-sm-12",children:e.jsx("div",{className:"d-flex align-items-center justify-content-between cus-search-btn-div",children:e.jsxs("button",{className:"sarch-cat-btn",onClick:y,children:[e.jsx("span",{children:" Search "})," ",e.jsx("span",{style:{padding:"0px",fontSize:"30px"},children:"->"})]})})})]})]})},Qe=()=>{var j;const[l,t]=s.useState(""),[a,u]=s.useState([]),[n,i]=s.useState(!1),[p,b]=s.useState(!0),[r,f]=s.useState(1),y=ie(),g=(j=pe().state)==null?void 0:j.category;s.useEffect(()=>{g&&w("",g)},[g]),s.useEffect(()=>{v(r,!0)},[]),s.useEffect(()=>(window.addEventListener("scroll",N),()=>window.removeEventListener("scroll",N)),[n,p]);const v=async(m,A=!1)=>{if(!n){i(!0);try{const M=await I.get("http://192.168.1.15:5000/user/services/pagination",{params:{page:m,limit:10}});u(A?M.data.data:h=>[...h,...M.data.data]),b(M.data.data.length>0)}catch(M){console.error(M)}finally{i(!1)}}},N=()=>{const m=document.documentElement.scrollTop,A=document.documentElement.scrollHeight,M=window.innerHeight;m/(A-M)*100>=55&&!n&&p&&f(S=>{const d=S+1;return v(d),d})},C=m=>{t(m),w("all",m)},w=async(m,A)=>{y(`/service-list/${m||"all"}/${A||"all"}`)};return e.jsxs("div",{className:"cus-mt-170",children:[e.jsx(Fs,{services:a}),e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row my-5",children:a.map(m=>e.jsx("div",{className:"col-lg-3 col-md-4 col-sm-12",children:e.jsx("div",{className:"service-card",children:e.jsx("div",{className:"main-service-card",children:e.jsxs("div",{className:"service-card-body",onClick:()=>C(m.serviceName),children:[e.jsx("img",{src:`http://192.168.1.15:5000/${m.icon.slice(7).replace(/\\/g,"/")}`,alt:m.serviceName,className:"card-img-top"}),e.jsxs("div",{className:"service-card-body",children:[e.jsx("h5",{className:"srevice-card-title",children:m.serviceName}),e.jsxs("p",{className:"service-offer",children:[" ",m.offers," Offers"]}),e.jsxs("button",{className:"service-card-btn",children:[m.viewMoreText,e.jsx("p",{className:"service-btn-para",children:"->"})]})]})]})})})},m.id))}),n&&e.jsx("p",{children:"Loading..."})]})]})},Oe=({token:l,role:t})=>{const{county:a,businessType:u}=He(),[n,i]=s.useState([]),p=ie(),b=y=>y.replace(/<[^>]+>/g,"").split(`
`).slice(0,1).join(`
`),r=()=>{t!=="service provider"&&p("/login",{state:{user:"service provider"}}),t==="service provider"&&p("/servics/servicefrom")},f=async(y,c)=>{try{const g=await I.post("http://192.168.1.15:5000/service/list",{county:y,business_type:c});i(g.data.service)}catch(g){console.error("Error fetching services:",g)}};return s.useEffect(()=>{f(a!=="all"?a:"",u!=="all"?u:"")},[a,u]),e.jsxs("div",{className:"service-all-list cus-mt-170",children:[e.jsx(Fs,{}),e.jsx("section",{className:"serv_inner",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"all_services",children:e.jsx("div",{className:"row",children:n.length>0?n.map((y,c)=>e.jsx("div",{className:"col-md-6 my-3",children:e.jsx("div",{className:"serv_card",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-5",children:e.jsx("div",{className:"img_serv",children:e.jsx("img",{src:`http://192.168.1.15:5000/${y.logo.slice(7).replace(/\\/g,"/")}`,alt:y.business_name})})}),e.jsxs("div",{className:"col-md-7",children:[e.jsxs("div",{className:"serv_text",children:[e.jsx("span",{children:y.business_type})," ",e.jsx("h2",{children:y.business_name})," ",e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx(Cs,{size:20,style:{margin:"2px"}}),y.location_details]})," "]})]}),e.jsxs("div",{className:"serv_details",children:[e.jsxs("ul",{children:[e.jsx("li",{children:b(y.information)})," "]}),e.jsxs(o,{to:`/service-single/${y.service_number}/${y.business_name}`,children:["read more ",e.jsx("span",{children:"->"})]})]})]})]})})},c)):e.jsx("div",{className:"text-center my-5 text-muted",children:e.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-center py-4 shadow-sm rounded",children:[e.jsx("i",{className:"bi bi-info-circle me-3 fs-2 text-warning"}),e.jsx("span",{className:"fw-medium",children:"No services found."})]})})})}),e.jsxs("div",{className:"add_service",children:[e.jsx("h3",{children:"Add Your Service Listing"}),e.jsx("p",{children:"Create a listing in minutes! Highlight your expertise, choose your location, and let customers find you effortlessly"}),l&&e.jsxs(o,{to:"/service/servicefrom",className:"link_btn",children:[" Proceed",e.jsx("span",{children:"->"})]}),!l&&e.jsxs("button",{onClick:r,className:"link_btn",children:[" Login",e.jsx("span",{children:"->"})]})]}),e.jsx(Ms,{ata:!0})]})})]})},lt="/End_OFlifeTestBuild/assets/dummybanar-D8TFg-pM.png",rt=({token:l,role:t})=>{var c;const a=ie(),[u,n]=s.useState(!0),[i,p]=s.useState(null),{id:b}=He(),[r,f]=s.useState(null);s.useEffect(()=>{b&&(async()=>{try{const v=await I.get(`http://192.168.1.15:5000/service/service/${b}`);f(v.data)}catch{p("Failed to load service details"),a("*")}finally{n(!1)}})()},[b]);const y=()=>{t!=="service provider"&&a("/login",{state:{user:"service provider"}}),t==="service provider"&&a("/service/servicefrom")};return u?e.jsx("p",{children:"Loading..."}):i?e.jsx("p",{children:i}):e.jsx("div",{className:"cus-mt-170",children:r&&e.jsx("section",{className:"business_details ",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"heading_page text-center",children:e.jsx("h1",{children:r.business_name})}),e.jsxs("div",{className:"business_details_box",children:[e.jsx("div",{className:"business_box_header",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-7",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3",children:e.jsx("div",{className:"business_logo_section",children:e.jsx("img",{className:"logo-service",src:`http://192.168.1.15:5000/${r.logo.slice(7).replace(/\\/g,"/")}`,alt:r.business_name})})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"business_deatils",children:[e.jsx("span",{children:r.business_type}),e.jsx("p",{children:r.business_name}),e.jsx("ul",{children:e.jsxs("li",{children:[" ",e.jsx(Cs,{size:20,style:{margin:"2px"}}),r.location_details]})})]})})]})}),e.jsx("div",{className:"col-md-5",children:e.jsx("div",{className:"contact_info",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsxs("a",{href:r.website,target:"_blank",children:[e.jsx(aa,{size:20,style:{marginRight:"10px"},className:"fa-solid fa-globe"}),r.website]})}),e.jsx("li",{children:e.jsxs("a",{href:`mailto:${r.email}`,children:[e.jsx(ta,{size:20,style:{marginRight:"10px"},className:"fa-solid fa-envelope"}),r.email]})}),e.jsx("li",{children:e.jsxs("a",{href:`tel:${r.phone}`,children:[e.jsx(na,{size:20,style:{marginRight:"10px"},className:"fa-solid fa-phone"})," ",r.phone]})})]})})})]})}),e.jsxs("div",{className:"business_content_box",children:[e.jsx("div",{className:"image_business",children:e.jsx("img",{className:"banner-service",src:`http://192.168.1.15:5000/${r.banner?(c=r.banner)==null?void 0:c.slice(7).replace(/\\/g,"/"):lt}`,alt:r.business_name})}),e.jsx("div",{className:"content_business",children:e.jsx("div",{className:"border p-3",dangerouslySetInnerHTML:{__html:r.information}})})]})]}),e.jsxs("div",{className:"add_service",children:[e.jsx("h3",{children:"Add Your Service Listing"}),e.jsx("p",{children:"Create a listing in minutes! Highlight your expertise, choose your location, and let customers find you effortlessly."}),e.jsxs("button",{onClick:y,className:"link_btn",children:[" Proceed",e.jsx("span",{children:"->"})]})]})]})})})},ot=()=>{var h,S;const[l,t]=s.useState([]),[a,u]=s.useState([]),[n,i]=s.useState("All Family Notices"),[p,b]=s.useState("grid"),[r,f]=s.useState({page:1,totalPages:1,hasMore:!0}),[y,c]=s.useState(!1),[g,v]=s.useState({}),[N,C]=s.useState(!0),w=pe();(h=w.state)!=null&&h.data;const j=((S=w.state)==null?void 0:S.Tab)||"";s.useEffect(()=>{j&&i(j),(async()=>{try{const $=await I.get("http://192.168.1.15:5000/user/service/type");t($.data.data)}catch($){console.error("Error fetching notice categories:",$)}})()},[]);const m=s.useCallback(async(d=1,$=!1)=>{c(!0);try{const _={page:d,limit:10,item:n==="All Family Notices"&&N?j:n==="All Family Notices"?"":n,...g},z=await I.get("http://192.168.1.15:5000/user/notices/pagination",{params:_});f({totalPages:z.data.totalPages,hasMore:z.data.notices.length>0,page:d}),u(F=>$?z.data.notices:[...F,...z.data.notices.filter(E=>!F.some(D=>D.id===E.id))])}catch(_){console.error("Error fetching notices:",_)}finally{c(!1)}},[n,g]);s.useEffect(()=>{u([]),m(1,!0)},[m]);const A=s.useCallback(()=>{if(p!=="grid"||y||!r.hasMore)return;const d=window.scrollY+window.innerHeight,$=document.documentElement.scrollHeight;d>=$*.55&&f(_=>({..._,page:_.page+1}))},[p,y,r.hasMore]);s.useEffect(()=>(p==="grid"&&window.addEventListener("scroll",A),()=>window.removeEventListener("scroll",A)),[p,A]),s.useEffect(()=>{r.page>1&&m(r.page)},[r.page,m]),s.useEffect(()=>(p==="grid"&&window.addEventListener("scroll",A),()=>window.removeEventListener("scroll",A)),[p,A]),s.useEffect(()=>{p==="list"&&r.page>1&&m(r.page)},[r.page,p,m]);const M=a.reduce((d,$)=>{const _=new Date($.period_from),z=new Date(_);z.setDate(_.getDate()-_.getDay()+(_.getDay()===0?-6:1)),z.setHours(0,0,0,0);const F=d.find(E=>E.startDate.getTime()===z.getTime());if(F)F.notices.push($);else{const E=new Date(z);E.setDate(z.getDate()+6),d.push({startDate:z,endDate:E,notices:[$]})}return d},[]).sort((d,$)=>$.startDate-d.startDate);return e.jsxs("div",{className:"container cus-mt-170",children:[e.jsx("div",{className:"row my-2",children:e.jsx(Ge,{search:"Search For Family Notices",onSearch:d=>{v(d),i("All Family Notices")},nothome:!0})}),e.jsxs("div",{className:"tab-row",children:[e.jsx("button",{onClick:()=>{i("All Family Notices"),C(!1)},className:`btn-tab ${n==="All Family Notices"?"btn-tab-active":""}`,children:"All Family Notices"}),l.map(d=>e.jsx("button",{onClick:()=>i(d.item),className:`btn-tab ${n===d.item?"btn-tab-active":""}`,children:d.item},d.item))]}),e.jsxs("div",{className:"tab-heading-row",children:[e.jsx("p",{children:"Viwe As"}),e.jsxs("div",{className:"list-icon",children:[e.jsx(Ss,{onClick:()=>b("grid"),size:24,className:"bs-icon"}),e.jsx(cs,{onClick:()=>b("list"),size:24,className:"bs-icon"})]})]}),e.jsxs("div",{className:"container notice-container",children:[p==="grid"?e.jsx("div",{className:"row g-4",children:M.map((d,$)=>e.jsxs("div",{className:"col-12",children:[e.jsx("div",{className:"group-header p-3 mb-4 bg-light rounded",children:e.jsxs("h5",{className:"mb-0 text-secondary",children:["Notices published from ",d.startDate.toLocaleDateString()," to ",d.endDate.toLocaleDateString()]})}),e.jsx("div",{className:"row g-4",children:d.notices.map(_=>e.jsx("div",{className:"col-lg-3 col-md-6",children:e.jsx(o,{to:`/noticesview/${encodeURIComponent(_.name)}-${encodeURIComponent(_.surname)}-${encodeURIComponent(_.notice_number)}`,state:{data:_},children:e.jsxs("div",{className:"card shadow-sm h-100 transition-all",children:[e.jsx("div",{className:"card-header bg-dark text-white p-3",children:e.jsx("h5",{className:"card-title mb-0 text-center",children:_.item})}),e.jsx("div",{className:"card-img-container",children:e.jsx("img",{src:`http://192.168.1.15:5000/${_.frist_image.slice(7).replace(/\\/g,"/")}`,className:"card-img-top object-fit-cover",alt:_.item,style:{height:"200px"}})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex flex-column gap-2",children:[e.jsx("p",{className:"mb-0 my-2 fw-medium text-center",children:`${_.name} ${_.surname} ${_.nee}`}),e.jsx("p",{className:"text-muted my-2 text-center",children:_.county})]})})]})})},_.id))})]},$))}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"ps-4",children:"Name"}),e.jsx("th",{children:"Town"}),e.jsx("th",{children:"County"}),e.jsx("th",{children:"Type"}),e.jsx("th",{className:"pe-4",children:"Published"})]})}),e.jsx("tbody",{children:a.map(d=>e.jsxs("tr",{className:"transition-all",children:[e.jsx("td",{className:"ps-4 fw-medium",children:d.name}),e.jsx("td",{children:d.town}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-secondary bg-opacity-10 text-secondary",children:d.county})}),e.jsx("td",{className:"text-primary",children:d.item}),e.jsx("td",{className:"pe-4 text-muted",children:new Date(d.createdAt).toLocaleDateString()})]},d.id))})]})}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-5",children:[e.jsxs("button",{className:"btn btn-outline-primary px-4 py-2 d-flex align-items-center gap-2",onClick:()=>f(d=>({...d,page:d.page-1})),disabled:r.page===1,children:[e.jsx(ia,{})," Previous"]}),e.jsxs("span",{className:"mx-3 text-muted",children:["Page ",e.jsx("strong",{children:r.page})," of ",e.jsx("strong",{children:r.totalPages})]}),e.jsxs("button",{className:"btn btn-outline-primary px-4 py-2 d-flex align-items-center gap-2",onClick:()=>f(d=>({...d,page:d.page+1})),disabled:r.page===r.totalPages,children:["Next ",e.jsx(ca,{})]})]})]}),y&&e.jsx("div",{className:"d-flex justify-content-center my-5",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),!r.hasMore&&e.jsx("div",{className:"text-center my-5 text-muted",children:e.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-center py-4 shadow-sm rounded",children:[e.jsx("i",{className:"bi bi-info-circle me-3 fs-2 text-warning"}),e.jsx("span",{className:"fw-medium",children:"No more notices to load"})]})})]})]})};ya.register(wa,Sa,Ca,ka,_a,Pa,Da,$a,Aa,Ta);const dt=({token:l})=>{const[t,a]=s.useState("all"),[u,n]=s.useState([]),[i,p]=s.useState([]),[b,r]=s.useState(!0),[f,y]=s.useState(!1),[c,g]=s.useState(!1),[v,N]=s.useState({name:"",username:"",role:"directory",email:"",password:""}),[C,w]=s.useState({name:"",description:""}),j=async k=>{k.preventDefault(),y(!1);try{const O={headers:{Authorization:`Bearer ${l}`}},T=await I.post("http://192.168.1.15:5000/admin/register/users",v,O);alert("Registration successful!")}catch(O){console.error("Error during registration:",O),alert("There was an error during registration. Please try again.")}N({name:"",username:"",role:"directory",email:"",password:""})},m=k=>{k.preventDefault(),g(!1),w({name:"",description:""})};s.useEffect(()=>{(async()=>{try{const O={headers:{Authorization:`Bearer ${l}`}},[T,Z]=await Promise.all([I.get("http://192.168.1.15:5000/admin/notices",O),I.get("http://192.168.1.15:5000/admin/services",O)]);n(T.data.familyNotices),p(Z.data.services)}catch(O){console.error("Error fetching data:",O)}finally{r(!1)}})()},[]);const A=k=>{const O=new Date,T=new Date(O);switch(t){case"today":T.setHours(0,0,0,0);break;case"week":T.setDate(T.getDate()-7);break;case"month":T.setMonth(T.getMonth()-1);break;case"year":T.setFullYear(T.getFullYear()-1);break;default:T.setFullYear(2e3)}return k.filter(Z=>new Date(Z.createdAt)>=T)},M=A(u),h=A(i),S=M.length,d=h.length,$=M.reduce((k,O)=>k+(O.payment||0),0),_=h.reduce((k,O)=>k+(O.payment||0),0),z=k=>{const O=new Date,T=t==="week"?"day":"month",Z=[],X=[];if(T==="day")for(let se=6;se>=0;se--){const q=new Date(O);q.setDate(q.getDate()-se),Z.push(q.toLocaleDateString()),X.push(k.filter(Q=>new Date(Q.createdAt).toDateString()===q.toDateString()).reduce((Q,L)=>Q+(L.payment||0),0))}else for(let se=11;se>=0;se--){const q=new Date(O);q.setMonth(q.getMonth()-se),Z.push(q.toLocaleString("default",{month:"short"})),X.push(k.filter(Q=>new Date(Q.createdAt).getMonth()===q.getMonth()&&new Date(Q.createdAt).getFullYear()===q.getFullYear()).reduce((Q,L)=>Q+(L.payment||0),0))}return{labels:Z,values:X}},F=z(u),E=z(i),D={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Payment Trends"}},scales:{y:{beginAtZero:!0}}};return b?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"container-fluid ",children:[e.jsx("h1",{className:"mb-4 admin-title",children:"Admin Dashboard"}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("select",{className:"form-control",value:t,onChange:k=>a(k.target.value),children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"Last Week"}),e.jsx("option",{value:"month",children:"Last Month"}),e.jsx("option",{value:"year",children:"Last Year"})]})})}),e.jsx("div",{className:"row mb-4",children:[{title:"Family Notices",value:S,payment:$.toLocaleString("en-US",{style:"currency",currency:"EUR"}),color:"primary"},{title:"Services",value:d,payment:_.toLocaleString("en-US",{style:"currency",currency:"EUR"}),color:"success"}].map((k,O)=>e.jsx("div",{className:"col-md-6 mb-3",children:e.jsxs("div",{className:`card bg-${k.color} text-white p-3`,children:[e.jsx("h5",{children:k.title}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("h2",{children:k.value}),e.jsx("small",{children:"Total Count"})]}),e.jsxs("div",{children:[e.jsx("h2",{children:k.payment}),e.jsx("small",{children:"Total Payments"})]})]})]})},O))}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-6 mb-4",children:e.jsxs("div",{className:"card p-3 h-100",children:[e.jsx("h4",{children:"Family Notices Payments"}),e.jsx("div",{className:"chart-container",children:e.jsx(fa,{data:{labels:F.labels,datasets:[{label:"Payments",data:F.values,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.2)",tension:.4}]},options:D})})]})}),e.jsx("div",{className:"col-md-6 mb-4",children:e.jsxs("div",{className:"card p-3 h-100",children:[e.jsx("h4",{children:"Services Payments"}),e.jsx("div",{className:"chart-container",children:e.jsx(ba,{data:{labels:E.labels,datasets:[{label:"Payments",data:E.values,backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgba(54, 162, 235, 1)"}]},options:D})})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6 mb-4",children:e.jsxs("div",{className:"card p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h4",{children:"Funeral Director"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>y(!f),children:f?"Cancel":"Add Director"})]}),f&&e.jsxs("form",{onSubmit:j,children:[["name","username","email","password"].map(k=>e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:k==="email"?"email":k==="password"?"password":"text",className:"form-control",placeholder:`${k.charAt(0).toUpperCase()+k.slice(1)}`,value:v[k],onChange:O=>N({...v,[k]:O.target.value}),required:!0})},k)),e.jsx("button",{type:"submit",className:"btn btn-success",children:"Add Director"})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h4",{children:"Service Categories"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>g(!c),children:c?"Cancel":"Add Category"})]}),c&&e.jsxs("form",{onSubmit:m,children:[e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Category Name",value:C.name,onChange:k=>w({...C,name:k.target.value}),required:!0})}),e.jsx("div",{className:"mb-3",children:e.jsx("textarea",{className:"form-control",placeholder:"Description",value:C.description,onChange:k=>w({...C,description:k.target.value}),required:!0})}),e.jsx("button",{type:"submit",className:"btn btn-success",children:"Add Category"})]})]})})]})]})},mt=()=>e.jsx("div",{className:"App",style:{marginTop:"165px"},children:e.jsx(Te,{})}),ht=()=>e.jsx("div",{className:"directory-dashboard",children:e.jsx("h1",{children:"Directory Dashboard"})});function ut({token:l}){var Ee;const t=ie(),[a,u]=s.useState(1),[n,i]=s.useState(!1),[p,b]=s.useState(),[r,f]=s.useState(""),[y,c]=s.useState("<p>This is the initial content of the editor.</p>"),[g,v]=s.useState(""),[N,C]=s.useState(""),[w,j]=s.useState({county:"",town:""}),[m,A]=s.useState(""),[M,h]=s.useState({town:"Town 1"}),[S,d]=s.useState([{county:"",town:""}]),[$,_]=s.useState(!1),[z,F]=s.useState(!1),[E,D]=s.useState(),[k,O]=s.useState(!1),[T,Z]=s.useState({From:"",To:""}),[X,se]=s.useState(),[q,Q]=s.useState(),[L,R]=s.useState(),[ee,ce]=s.useState({category:"",county:"",church:""}),[re,ve]=s.useState(!1),[ne,ae]=s.useState({frist_img:"",sceond_img:"",third_img:""}),fe=s.useRef(null),me=async()=>{try{const P=await I.get("http://192.168.1.15:5000/directore/price",{headers:{Authorization:`Bearer ${l}`}});b(P.data.price[0].price)}catch(P){console.error("Error fetching settings:",P)}};s.useEffect(()=>{me()},[]);const be=(P,V)=>{if(P){const J=new Date(Date.UTC(P.getFullYear(),P.getMonth(),P.getDate()));Z(K=>({...K,[V]:J}))}},ke=()=>{if(a===1){u(a+1);return}if(r&&g&&w.county&&w.town&&X&&a===2){u(a+1);return}else!r&&a===2&&D("Enter the Name "),!g&&a===2&&D("Enter Surname"),!w.county&&a===2&&D("Select County"),!w.town&&a===2&&D("Select Town"),!X&&a===2&&D("Upload Images"),F(!0)},he=()=>{u(a-1)},_e=()=>{i(!0),n&&M.length<2&&h([...M,{town:""}])},ye=P=>{h({town:""}),i(!1)},Ve=()=>{_(!0),$&&S.length<2&&d([...S,{county:"",town:""}])},we=P=>{const V=S.filter((J,K)=>K!==P);d(V)},Me=(P,V,J)=>{const K=[...S];K[P][V]=J,d(K)},te=P=>{h({town:P})},We=P=>{const{files:V}=P.target,J=V[0];if(J){const K=J.name.split(".").pop().toLowerCase();if(J.size>2*1024*1024){ae(W=>({...W,frist_img:"file size exceeds 2MB. Please upload a smaller file."}));return}if(K!=="png"&&K!=="jpg"&&K!=="jpeg"){ae(W=>({...W,frist_img:" file must be a PNG or JPG image."}));return}ae(W=>({...W,frist_img:""}))}se(P.target.files)},Pe=P=>{const{files:V}=P.target,J=V[0];if(J){const K=J.name.split(".").pop().toLowerCase();if(J.size>2*1024*1024){ae(W=>({...W,sceond_img:" file size exceeds 2MB. Please upload a smaller file."}));return}if(K!=="png"&&K!=="jpg"&&K!=="jpeg"){ae(W=>({...W,sceond_img:" file must be a PNG or JPG image."}));return}ae(W=>({...W,sceond_img:""}))}Q(P.target.files)},Ke=P=>{const{files:V}=P.target,J=V[0];if(J){const K=J.name.split(".").pop().toLowerCase();if(J.size>2*1024*1024){ae(W=>({...W,third_img:"file size exceeds 2MB. Please upload a smaller file."}));return}if(K!=="png"&&K!=="jpg"&&K!=="jpeg"){ae(W=>({...W,third_img:" file must be a PNG or JPG image."}));return}ae(W=>({...W,third_img:""}))}R(P.target.files)},xe=P=>{const{name:V,value:J}=P.target;j({...w,[V]:J})},oe=P=>{const{name:V,value:J}=P.target;ce({...ee,[V]:J})},De=P=>{c(P)},Ye=async()=>{var V,J,K;if(!p){D("Someting is Worng to Add Notice"),F(!0);return}const P={name:r||"",nee:N||"",surname:g||"",price:p,content:y,status:!0,town:w.town,county:w.county,frist_another_town:((V=S==null?void 0:S[0])==null?void 0:V.town)||"",sceond_another_town:((J=S==null?void 0:S[1])==null?void 0:J.town)||"",frist_another_county:((K=S==null?void 0:S[0])==null?void 0:K.county)||"",another_town:(M==null?void 0:M.town)||"",street:m,category:(ee==null?void 0:ee.category)||"",church_county:ee.county,church:(ee==null?void 0:ee.church)||"",period_from:T.From,period_to:T.To};try{const W=new FormData;Object.keys(P).forEach(Be=>{W.append(Be,P[Be])}),X&&W.append("first_image",X[0]),q&&W.append("second_image",q[0]),L&&W.append("third_image",L[0]);const Le=await fetch("http://192.168.1.15:5000/directore/add",{method:"POST",body:W,headers:{Authorization:`Bearer ${l}`}}),Re=await Le.json();if(!Le.ok){D(Re.error),F(!0);return}O(!0),F(!0),D("Death notice added successfully!")}catch(W){console.log(W)}},Fe=()=>{t("/"),O(!1),F(!1)},$e=T.From?Ma(new Date(T.From),"MMMM dd, yyyy"):"Select From Date",Ae=((Ee=ue.find(P=>P.county===w.county))==null?void 0:Ee.towns)||[];return e.jsxs("div",{className:"notice-from cus-mt-170",children:[e.jsxs("div",{className:"container mt-5",children:[e.jsx("h2",{className:"text-center my-5 add-famaily",children:" Add Death Notice"}),e.jsx("p",{className:"text-center mb-5 death-heading-para",children:" Follow the steps to create a respectful and detailed notice."}),e.jsxs("div",{className:"d-flex justify-content-evenly mb-4 .line-hide",children:[e.jsxs("div",{className:`step-indicator ${a>=1?"active":""}`,children:[e.jsxs("p",{className:`p-number ${a>=1?"p-number-active":""}`,children:[" ",a>1?e.jsx("span",{className:"span-number",children:"1"}):e.jsx("span",{className:"span-number",children:"1"})]})," ",e.jsx("p",{className:"mx-2 p-line",children:" Introduction"})]}),e.jsxs("div",{className:`step-indicator ${a>2?"active":""}`,children:[e.jsx("p",{className:`p-number ${a>2?"p-number-active":""}`,children:a>2?e.jsx("span",{className:"span-number",children:"2"}):e.jsx("span",{className:"span-number",children:"2"})})," ",e.jsx("p",{className:"mx-2 p-line",children:"Add Details "})]}),e.jsxs("div",{className:`step-indicator ${a>=3?"active":""}`,children:[e.jsx("p",{className:`p-number ${a>3?"p-number-active":""}`,children:a>3?e.jsx("span",{className:"span-number",children:"3"}):e.jsx("span",{className:"span-number",children:"3"})})," ",e.jsx("p",{className:"mx-2 p-line",children:" Pay and Finalize "})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[a===1&&e.jsxs("div",{className:" intro-div",children:[e.jsx("p",{className:"text-justfiy into-para",children:"As a Funeral Director, your role in publishing a death notice is critical in informing communities and loved ones respectfully and efficiently. This platform is designed to streamline the process for you, allowing notices to be shared with precision and professionalism."}),e.jsxs("ul",{children:[" ",e.jsx("span",{children:"  What You’ll Need to Provide?"}),e.jsxs("li",{children:[" ",e.jsx("b",{children:" Deceased’s Full Name:"})," Ensure the spelling and order are correct."]}),e.jsxs("li",{children:[" ",e.jsx("b",{children:"Location: Provide"})," the area associated with the deceased or their family."]}),e.jsxs("li",{children:[" ",e.jsx("b",{children:"County and Town:"})," Select from our dropdown menus to ensure proper categorization."]}),e.jsxs("li",{children:[" ",e.jsx("b",{children:"Publishing Date:"})," Choose the date on which the notice will go live."]}),e.jsxs("li",{children:[e.jsx("b",{children:"Optional Details:"})," You may also add a short message if necessary (e.g., ceremony details or family preferences)."]})]}),e.jsxs("ul",{children:[" ",e.jsx("span",{children:"Why Use Our Platform?"}),e.jsxs("li",{children:[" ",e.jsx("b",{children:"Efficient Workflow:"})," Save time with our intuitive interface."]}),e.jsxs("li",{children:[e.jsx("b",{children:" Wide Reach:"})," Notices are displayed on an interactive map, ensuring visibility for the relevant region."]}),e.jsxs("li",{children:[" ",e.jsx("b",{children:"Respect and Professionalism:"})," Our system is tailored for the solemn nature of these announcements."]})]})]}),a===2&&e.jsxs("div",{children:[e.jsxs("div",{className:"select-heading-div my-5",children:[e.jsx("h2",{className:"select-type text-center",children:"Add Information"}),e.jsx("p",{className:"select-type-para text-center",children:"Add information about the deceased: "})]}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"row cus-form",children:[e.jsx("div",{className:"col-lg-4 col-md-6 col-sm-12",children:e.jsx("div",{className:"mb-3",children:e.jsx("input",{placeholder:"Name",type:"text",className:"form-control",value:r,onChange:P=>f(P.target.value)})})}),e.jsx("div",{className:"col-lg-4 col-md-6 col-sm-12",children:e.jsx("div",{className:"mb-3",children:e.jsx("input",{placeholder:"Surname",type:"text",className:"form-control",value:g,onChange:P=>v(P.target.value)})})}),e.jsx("div",{className:"col-lg-4 col-md-6 col-sm-12",children:e.jsx("div",{className:"mb-3",children:e.jsx("input",{placeholder:"Nee",type:"text",className:"form-control",value:N,onChange:P=>C(P.target.value)})})}),e.jsx("div",{className:"col-lg-4",children:e.jsx("div",{className:"mb-3",children:e.jsxs("select",{className:"form-control",name:"county",value:w.county,onChange:xe,children:[e.jsx("option",{value:"",children:"Select County"}),ue.map((P,V)=>e.jsx("option",{value:P.county,children:P.county},V))]})})}),e.jsx("div",{className:"col-lg-4",children:e.jsx("div",{className:"mb-3",children:e.jsxs("select",{className:"form-control",name:"town",value:w.town,onChange:xe,disabled:w.county==="",children:[e.jsx("option",{value:"",children:"Select Town"}),Ae.map((P,V)=>e.jsx("option",{value:P,children:P},V))]})})}),e.jsx("div",{className:"col-lg-4 col-md-6 col-sm-12",children:e.jsx("div",{className:"mb-3",children:e.jsx("input",{placeholder:"Street",type:"text",className:"form-control",value:m,onChange:P=>A(P.target.value)})})})]}),e.jsx("div",{className:"row cus-row cus-form align-items-center",children:$&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"county-text1",children:"Would you like this notice to display in another county?"}),S.map((P,V)=>{var J;return e.jsxs(ns.Fragment,{children:[e.jsx("div",{className:"col-lg-5",children:e.jsx("div",{children:e.jsxs("select",{className:"form-control",name:"county",value:P.county,onChange:K=>Me(V,"county",K.target.value),children:[e.jsx("option",{value:"",children:"Select County"}),ue.map((K,W)=>e.jsx("option",{value:K.county,children:K.county},W))]})})}),e.jsx("div",{className:"col-lg-5",children:e.jsx("div",{children:e.jsxs("select",{className:"form-control",name:"town",value:P.town,onChange:K=>Me(V,"town",K.target.value),disabled:!P.county,children:[e.jsx("option",{value:"",children:"Select Town"}),(J=ue.find(K=>K.county===P.county))==null?void 0:J.towns.map((K,W)=>e.jsx("option",{value:K,children:K},W))]})})}),e.jsx("div",{className:"col-lg-2",children:e.jsx("button",{className:"btn-icon-cus",onClick:()=>we(V),children:e.jsx(Ue,{size:24,color:"black"})})})]},V)})]})})]}),e.jsxs("button",{className:"btn mb-3 cus-from-butt",onClick:Ve,children:["Add Another County ",e.jsx("span",{children:e.jsx(le,{})})]}),n&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"row cus-form align-items-center",children:[e.jsx("div",{className:"col-lg-10 col-md-10 col-sm-10",children:e.jsx("div",{children:e.jsxs("select",{className:"form-control",name:"town",value:M.town,onChange:P=>te(P.target.value),disabled:w.county==="",children:[e.jsx("option",{value:"",children:"Select Town"}),Ae.map((P,V)=>e.jsx("option",{value:P,children:P},V))]})})}),e.jsx("div",{className:"col-lg-2 col-md-2 col-sm-2",children:e.jsx("button",{className:"btn-icon-cus ml-2",onClick:()=>ye(),children:e.jsx(Ue,{size:24,color:"black"})})})]})}),e.jsxs("button",{className:"btn  mb-3 cus-from-butt",onClick:_e,children:["Add Another Town ",e.jsx("span",{children:e.jsx(le,{})})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-3",children:e.jsx("div",{children:e.jsx(ls,{apiKey:"imcj5lcwtj7zoi1bcf6gwnbkzzkgvxnkso4u0f340egont3p",onInit:(P,V)=>fe.current=V,initialValue:y,init:{height:500,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"},onChange:P=>De(P.target.getContent())})})}),e.jsxs("div",{className:"photo-upload-section",children:[e.jsx("h4",{className:"upload-title text-center",children:"Add up to 3 Photos"}),e.jsx("div",{className:"upload-grid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-4",children:e.jsx("div",{className:"upload-card",children:e.jsxs("label",{className:"upload-label",children:[e.jsx("input",{type:"file",className:"d-none",accept:"image/*",multiple:!0,onChange:We}),e.jsxs("div",{className:"upload-box",children:[X&&e.jsx("img",{src:URL.createObjectURL(X[0]),alt:"Upload 1",className:"upload-preview"}),ne.frist_img&&e.jsx("p",{style:{color:"red"},children:ne.frist_img})]}),e.jsxs("span",{className:"upload-caption cus-from-butt",children:["Add Photo ",e.jsx(le,{})]})]})})}),e.jsx("div",{className:"col-lg-4",children:e.jsx("div",{className:"upload-card",children:e.jsxs("label",{className:"upload-label",children:[e.jsx("input",{type:"file",className:"d-none",accept:"image/*",multiple:!0,onChange:Pe}),e.jsxs("div",{className:"upload-box",children:[q&&e.jsx("img",{src:URL.createObjectURL(q[0]),alt:"Upload 2",className:"upload-preview"}),ne.sceond_img&&e.jsx("p",{style:{color:"red"},children:ne.sceond_img})]}),e.jsxs("span",{className:"upload-caption cus-from-butt",children:["Add Photo ",e.jsx(le,{})]})]})})}),e.jsx("div",{className:"col-lg-4",children:e.jsx("div",{className:"upload-card",children:e.jsxs("label",{className:"upload-label",children:[e.jsx("input",{type:"file",className:"d-none",accept:"image/*",multiple:!0,onChange:Ke}),e.jsxs("div",{className:"upload-box",children:[L&&e.jsx("img",{src:URL.createObjectURL(L[0]),alt:"Upload 3",className:"upload-preview"}),ne.third_img&&e.jsx("p",{style:{color:"red"},children:ne.third_img})]}),e.jsxs("span",{className:"upload-caption cus-from-butt",children:["Add Photo ",e.jsx(le,{})]})]})})})]})})]}),e.jsxs("div",{className:"charch-div",children:[e.jsx("h1",{children:" Church MAP "}),re&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-3",children:e.jsxs("select",{className:"form-control",name:"category",value:ee.category,onChange:oe,children:[e.jsx("option",{value:"",children:"Select Map Category"}),e.jsx("option",{value:"Mass",children:"Mass"}),e.jsx("option",{value:"Service",children:"Service"})]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("select",{className:"form-control",name:"county",value:ee.county,onChange:oe,children:[e.jsx("option",{value:"",children:"Select County"}),ue.map((P,V)=>e.jsx("option",{value:P.county,children:P.county},V))]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("select",{className:"form-control",name:"church",value:ee.church,onChange:oe,children:[e.jsx("option",{value:"",children:"Select Church"}),e.jsx("option",{value:"Church 1",children:"Church 1"}),e.jsx("option",{value:"Church 2",children:"Church 2"})]})})]}),e.jsx("button",{className:"btn btn-secondary mb-3 cus-from-butt",onClick:()=>{ve(!re)},children:re?e.jsxs("p",{children:["Remove Church Map ",e.jsx("span",{children:e.jsx(ws,{})})," "]}):e.jsxs("p",{children:[" Add Church MAP ",e.jsx("span",{children:e.jsx(le,{})})," "]})})]})]})]}),a===3&&e.jsxs("div",{children:[e.jsxs("div",{className:"shadow-div",children:[e.jsxs("div",{className:"select-heading-div  my-5",children:[e.jsx("h2",{className:"select-type text-center",children:"Publish"}),e.jsx("p",{className:"select-type-para text-center",children:"Choose The Publish Period and continue to the payment for finalization."})]}),e.jsx("div",{className:"container mx-5 my-5",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-4 col-md-4",children:[e.jsx("h4",{className:"select-type4",children:"Publishing Period"}),e.jsxs("div",{className:"rightboder",children:[e.jsx("div",{className:"searchinputdiv my-2",children:e.jsx(Ce,{value:T.From,placeholderText:"Select From Date",selected:T.From,onChange:P=>be(P,"From"),className:"secondRowinput"})}),e.jsx("div",{className:"searchinputdiv my-2",children:e.jsx(Ce,{value:T.To,placeholderText:"Select To Date",selected:T.To,onChange:P=>be(P,"To"),className:"secondRowinput"})})]})]}),e.jsx("div",{className:"com-lg-8 col-md-8",children:e.jsxs("div",{children:[e.jsxs("p",{className:"list-para",children:[" ",e.jsx("span",{children:e.jsx(ge,{color:"black"})})," Notices are published for up to 5 weeks in the Family Notice Section"]}),e.jsxs("p",{className:"list-para",children:[" ",e.jsx("span",{children:e.jsx(ge,{})}),"Where a Month's Mind notice has been added, a link to it also shows on the",e.jsx("br",{}),e.jsx("span",{className:"brack-span",children:" death notice for up to 5 weeks "})]}),e.jsxs("p",{className:"list-para",children:["  ",e.jsx("span",{children:e.jsx(ge,{})}),"Acknowledgements are linked permanently to the death notice"]}),e.jsxs("p",{className:"list-para",children:[" ",e.jsx("span",{children:e.jsx(ge,{})})," You can edit your Family Notices in the Member’s Area"]})]})})]})})]}),e.jsxs("div",{className:"container  my-5",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-center sum-heading py-4",children:r+" "+g}),e.jsx("p",{className:"text-center p-town-color",children:w==null?void 0:w.town}),e.jsx("p",{className:"text-center p-town-county-date",children:(w==null?void 0:w.town)+", "+w.county}),e.jsxs("p",{className:"text-center p-town-county-date",children:["Publish Date: ",$e]})]}),e.jsx("div",{className:"my-5",children:e.jsx("div",{className:"border p-3",dangerouslySetInnerHTML:{__html:y}})}),e.jsx("div",{className:"ny-5 text-center mx-5",children:e.jsx("p",{className:"p-last",children:'Once you click "Publish Notice", your announcement will be live and visible to those who may need to view it. The notice will remain active for the selected duration, and you will be able to make any necessary updates or modifications through your dashboard. We aim to make this process as seamless as possible while ensuring every detail is handled with respect and care.'})})]})]}),e.jsxs("div",{className:"mt-3 cus-btn-div-next",children:[a>1&&e.jsx("button",{className:"link_btn ",onClick:he,children:e.jsxs("p",{children:[" Previous",e.jsx("span",{children:"<-"})," "]})}),a<3&&e.jsx("button",{className:"link_btn",onClick:ke,children:a===1?e.jsxs("p",{children:["Create Death Notice ",e.jsx("span",{children:"->"})," "]}):e.jsxs("p",{children:["Next",e.jsx("span",{children:"->"})," "]})}),a===3&&e.jsx("button",{className:"link_btn",onClick:Ye,children:e.jsxs("p",{children:["Publish ",e.jsx("span",{children:"->"})," "]})})]})]})})]}),!k&&e.jsx(de,{show:z,onConfirm:()=>F(!1),onCancel:()=>{F(!1)},message:E,title:"Error"}),k&&e.jsx(de,{show:z,onConfirm:Fe,onCancel:Fe,message:E,title:"Error"})]})}const xt=()=>e.jsx("div",{className:"App",style:{marginTop:"165px"},children:e.jsx(Te,{})}),bs=({token:l,role:t})=>{const[a,u]=s.useState(!1),[n,i]=s.useState({data:[],selectedRows:[],currentPage:1,totalPages:1,loading:!1,error:"",showModal:!1,message:"",deleteId:null,searchTerm:"",sortBy:"createdAt",sortOrder:"desc"}),p=[{key:"name",label:"Name"},{key:"county",label:"County"},{key:"surname",label:"Surname"},{key:"status",label:"Status"},{key:"createdAt",label:"Created At"}],b=s.useCallback(async()=>{try{i(m=>({...m,loading:!0,error:""}));const j=await I.get(`http://192.168.1.15:5000/${t==="directory"?"directore/family-notices/user/by/get":"user/family-notices/user/by/get"}`,{params:{page:n.currentPage,pageSize:10,search:n.searchTerm,sortBy:n.sortBy,sortOrder:n.sortOrder},headers:{Authorization:`Bearer ${l}`}});i(m=>({...m,data:j.data.notices,totalPages:j.data.totalPages,loading:!1})),console.log(j)}catch(j){console.error("Fetch error:",j),i(m=>{var A,M;return{...m,error:((M=(A=j.response)==null?void 0:A.data)==null?void 0:M.error)||"Failed to fetch notices",loading:!1}})}},[n.currentPage,n.sortBy,a,n.sortOrder,l]);s.useEffect(()=>{b()},[b]);const r=()=>{u(!a),i(j=>({...j,currentPage:1})),b()},f=j=>{j.key==="Enter"&&r()},y=j=>{i(m=>({...m,sortBy:j,sortOrder:m.sortBy===j&&m.sortOrder==="asc"?"desc":"asc"}))},c=j=>{i(m=>({...m,selectedRows:m.selectedRows.includes(j)?m.selectedRows.filter(A=>A!==j):[...m.selectedRows,j]}))},g=()=>{i(j=>({...j,selectedRows:j.selectedRows.length===j.data.length?[]:j.data.map(m=>m.id)}))},v=(j=null)=>{i(m=>({...m,deleteId:j,message:j?"Are you sure you want to delete this notice?":`Are you sure you want to delete ${m.selectedRows.length} notice(s)?`,showModal:!0}))},N=async()=>{try{const j=n.deleteId?[n.deleteId]:n.selectedRows;await I.delete(`http://192.168.1.15:5000/${t==="directory"?"directore/family-notices/deleted":"user/family-notices/deleted"}`,{data:{ids:j},headers:{Authorization:`Bearer ${l}`}}),i(m=>({...m,selectedRows:[],deleteId:null,showModal:!1})),b()}catch(j){console.error("Delete error:",j),i(m=>({...m,showModal:!1}))}},C=j=>n.sortBy!==j?e.jsx(Ps,{className:"text-muted"}):n.sortOrder==="asc"?e.jsx(Ds,{}):e.jsx($s,{}),w=()=>e.jsx("nav",{children:e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{className:`page-item ${n.currentPage===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>i(j=>({...j,currentPage:j.currentPage-1})),children:"Previous"})}),Array.from({length:n.totalPages},(j,m)=>e.jsx("li",{className:`page-item ${n.currentPage===m+1?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>i(A=>({...A,currentPage:m+1})),children:m+1})},m+1)),e.jsx("li",{className:`page-item ${n.currentPage===n.totalPages?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>i(j=>({...j,currentPage:j.currentPage+1})),children:"Next"})})]})});return n.loading?e.jsx("div",{className:"text-center my-5",children:"Loading..."}):n.error?e.jsx("div",{className:"alert alert-danger my-5",children:n.error}):e.jsxs("div",{className:"container py-4",children:[e.jsx("h1",{className:"mb-4 cus-h1",children:"My Notices"}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-md-6 mb-2",children:e.jsxs("div",{className:"input-group",children:[e.jsx("span",{onClick:r,className:"input-group-text bg-light",children:e.jsx(ks,{})}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Search notices...",value:n.searchTerm,onChange:j=>i(m=>({...m,searchTerm:j.target.value})),onKeyPress:f})]})})}),e.jsx("div",{className:"d-flex justify-content-end mb-4",children:e.jsx("button",{onClick:()=>v(),disabled:n.selectedRows.length===0,className:"btn btn-danger",children:"Delete Selected"})}),e.jsx("div",{className:"table-responsive rounded-3 shadow-sm",children:e.jsxs("table",{className:"table table-hover mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"50px"},children:e.jsx("input",{type:"checkbox",checked:!!n.data.length&&n.selectedRows.length===n.data.length,onChange:g,className:"form-check-input"})}),p.map(({key:j,label:m})=>e.jsx("th",{onClick:()=>y(j),style:{cursor:"pointer",minWidth:"120px"},children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[m,e.jsx("span",{className:"ms-2",children:C(j)})]})},j)),e.jsx("th",{style:{width:"120px"},children:"Actions"})]})}),e.jsx("tbody",{children:n.data.map(j=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:n.selectedRows.includes(j.id),onChange:()=>c(j.id),className:"form-check-input"})}),p.map(({key:m})=>e.jsx("td",{children:m==="createdAt"?new Date(j[m]).toLocaleDateString():m==="status"?e.jsx("span",{className:`badge ${j[m]?"bg-success text-white":"bg-danger text-white"} px-3 py-2 rounded`,children:j[m]?"Active":"Inactive"}):j[m]},m)),e.jsx("td",{children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{onClick:()=>v(j.id),className:"btn btn-sm btn-danger",children:e.jsx(_s,{})}),e.jsx(o,{className:"btn btn-sm",to:`/noticesview/${encodeURIComponent(j.name)}-${encodeURIComponent(j.surname)}-${encodeURIComponent(j.notice_number)}`,style:{background:"#b1824d"},children:e.jsx(is,{color:"white"})})]})})]},j.id))})]})}),!n.data.length&&!n.loading&&e.jsx("div",{className:"text-center my-5 text-muted",children:"No notices found"}),e.jsx("div",{className:"d-flex justify-content-center mt-4",children:e.jsx(w,{})}),e.jsx(de,{show:n.showModal,onConfirm:N,onCancel:()=>i(j=>({...j,showModal:!1})),message:n.message})]})},pt=()=>{const{pathname:l}=pe();return s.useEffect(()=>{window.scrollTo(0,0)},[l]),null},ys=()=>{var v;const{name:l}=He(),[t,a]=s.useState(""),[u,n]=s.useState(""),[i,p]=s.useState(""),[b,r]=s.useState(null),[f,y]=s.useState(!0),[c,g]=s.useState(null);return s.useEffect(()=>{if(l){const N=l.split("-");N.length===3&&(a(N[0]),n(N[1]),p(N[2]))}},[l]),s.useEffect(()=>{t&&u&&i&&(async()=>{try{const C=await I.get(`http://192.168.1.15:5000/user/noticeview/${t}/${u}/${i}`);r(C.data.notice)}catch(C){g("Failed to load notice data"),console.error(C)}finally{y(!1)}})()},[t,u,i]),f?e.jsx("div",{children:"Loading..."}):c?e.jsx("div",{children:c}):b?e.jsx("section",{className:"acknowledgement cus-mt-180",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"box",children:[e.jsxs("div",{className:"top-panel",children:[e.jsx("h3",{className:"acknowledgement-title",children:b.item||"Death Notice"}),e.jsx("div",{className:"user-img",children:e.jsx("div",{className:"photo",children:e.jsx("img",{src:`http://192.168.1.15:5000/${(v=b.frist_image)==null?void 0:v.slice(7).replace(/\\/g,"/")}`,alt:"User"})})})]}),e.jsxs("div",{className:"middle-panel",children:[e.jsxs("h3",{className:"acknowledgement-title",children:[b.name," ",b.surname]}),e.jsx("p",{children:b.county})]}),e.jsx("div",{className:"bottom-panel",dangerouslySetInnerHTML:{__html:b.content}})]})})}):e.jsx("div",{children:"No notice data available"})},Es=s.createContext(),jt=({children:l})=>{const[t,a]=s.useState(!1),u=()=>{a(!t),console.log(t)};return e.jsx(Es.Provider,{value:{isOpen:t,toggleSidebar:u},children:l})},Ls=()=>s.useContext(Es),gt=({setToken:l})=>{const{toggleSidebar:t}=Ls(),a=ie();return e.jsx(vs,{bg:"dark",variant:"dark",expand:"lg",className:"fixed-top",children:e.jsxs(Ts,{fluid:!0,children:[e.jsx(vs.Brand,{className:"d-flex align-items-center",children:e.jsx(la,{onClick:t,style:{cursor:"pointer",marginLeft:"20px"}})}),e.jsx("div",{className:"ms-auto d-flex align-items-center",children:e.jsxs(Ne,{align:"end",children:[e.jsxs(Ne.Toggle,{variant:"dark",id:"dropdown-basic",children:[e.jsx(Ze,{className:"me-2"})," Admin"]}),e.jsxs(Ne.Menu,{variant:"dark",children:[e.jsx(Ne.Item,{href:"#/profile",children:"Profile"}),e.jsx(Ne.Item,{href:"#/settings",children:"Settings"}),e.jsx(Ne.Divider,{}),e.jsx(Ne.Item,{onClick:()=>{sessionStorage.removeItem("token"),l(""),a("/")},children:"Logout"})]})]})})]})})},vt=({setOpen:l})=>{const{isOpen:t}=Ls(),a=pe(),[u,n]=s.useState(!1);return s.useEffect(()=>{t||n(!1)},[t]),s.useEffect(()=>{a.pathname.startsWith("/admin/notices")&&n(!0)},[a.pathname]),s.useEffect(()=>{l(t)},[t]),e.jsxs("nav",{id:"sidebar",className:`  text-black vh-100 fixed-left ${t?"active":"deactive"}`,children:[e.jsx("div",{className:`sidebar-header p-3 ${t?"":"d-lg-none"}`,children:e.jsx("h3",{className:"text-center",children:"End Of Life"})}),e.jsxs(Fa,{className:"flex-column p-3",children:[e.jsxs(o,{to:"/admin/dashboard",className:`admin-nav-link ${a.pathname==="/admin/dashboard"?"admin-nav-link-active":""}`,end:!0,children:[e.jsx(ra,{className:"me-2"}),"  ",e.jsx("span",{className:`${t?"":"d-lg-none"}`,children:"Dashboard"})]}),e.jsxs("div",{className:`admin-nav-link ${a.pathname.startsWith("/admin/notices")?"admin-nav-link-active":""}`,onClick:()=>n(!u),style:{cursor:"pointer"},children:[e.jsx(Xe,{size:22,className:"me-2"}),e.jsx("span",{className:`${t?"":"d-lg-none"}`,children:"Notices"})]}),u&&e.jsxs("div",{className:"sub-links",children:[e.jsxs(o,{to:"/admin/notices/family",className:`admin-nav-link ${a.pathname==="/admin/notices/family"?"admin-nav-link-active":""}`,style:{paddingLeft:"2rem"},children:[e.jsx(cs,{className:"me-2"}),e.jsx("span",{className:`${t?"":"d-lg-none"}`,children:"Family Notice"})]}),e.jsxs(o,{to:"/admin/notices/death",className:`admin-nav-link ${a.pathname==="/admin/notices/death"?"admin-nav-link-active":""}`,style:{paddingLeft:"2rem"},children:[e.jsx(oa,{className:"me-2"}),e.jsx("span",{className:`${t?"":"d-lg-none"}`,children:"Death Notice"})]}),e.jsxs(o,{to:"/admin/notices/types",className:`admin-nav-link ${a.pathname==="/admin/notices/types"?"admin-nav-link-active":""}`,style:{paddingLeft:"2rem"},children:[e.jsx(da,{className:"me-2"}),e.jsx("span",{className:`${t?"":"d-lg-none"}`,children:"Notice Types"})]})]}),e.jsxs(o,{to:"/admin/service-directory",className:`admin-nav-link ${a.pathname==="/admin/service-directory"?"admin-nav-link-active":""}`,children:[e.jsx(es,{className:"me-2",size:22}),e.jsx("span",{className:`${t?"":"d-lg-none"}`,children:"Service Directory"})]}),e.jsxs(o,{to:"/admin/invoice",className:`admin-nav-link ${a.pathname==="/admin/invoice"?"admin-nav-link-active":""}`,children:[e.jsx(ma,{size:22}),e.jsx("span",{className:`${t?"":"d-lg-none"}`,children:"Invoices"})]}),e.jsxs(o,{to:"/admin/setting",className:`admin-nav-link ${a.pathname==="/admin/setting"?"admin-nav-link-active":""}`,children:[e.jsx(ha,{size:24}),e.jsx("span",{className:`${t?"":"d-lg-none"}`,children:"Setting"})]})]})]})},Nt=({setToken:l})=>{const[t,a]=s.useState(!1);return e.jsx(jt,{children:e.jsxs("div",{className:"d-flex",children:[e.jsx(vt,{setOpen:a}),e.jsxs("div",{id:"content",className:`w-100 ${t?"content-m-250":"content-m-100"}`,children:[e.jsx(gt,{setToken:l}),e.jsx(Ts,{fluid:!0,className:"p-4",children:e.jsx("div",{className:"main-content",children:e.jsx(Te,{})})})]})]})})},ze=({token:l,family:t,death:a})=>{const[u,n]=s.useState([]),[i,p]=s.useState(1),[b,r]=s.useState(!1),[f,y]=s.useState(1);s.useState("family");const[c,g]=s.useState(""),[v,N]=s.useState(!1),[C,w]=s.useState(!1),[j,m]=s.useState({item:"",price:0}),[A,M]=s.useState(!1),[h,S]=s.useState(0),[d,$]=s.useState(!1),[_,z]=s.useState({}),[F,E]=s.useState(""),[D,k]=s.useState(""),O=R=>{z(R),$(!0)},T=async(R,ee=!1)=>{r(!0);try{const ce=await I.get(`http://192.168.1.15:5000/${t?"admin/notices/list":a?"admin/death/list":"admin/notice/type/list"}`,{headers:{Authorization:`Bearer ${l}`},params:{page:R,limit:10,search:c}});n(ee?ce.data.notices:re=>[...re,...ce.data.notices]),y(ce.data.totalPages)}catch(ce){console.error(ce)}finally{r(!1)}};s.useEffect(()=>{T(i,!0)},[i,c,t,a]);const Z=R=>{R<1||R>f||p(R)},X=R=>{const{name:ee,value:ce}=R.target;m(re=>({...re,[ee]:ce}))},se=async()=>{try{const R=await I.post(`http://192.168.1.15:5000/${t?"admin/status/chang":a?"admin/death/chang":""}`,{status:C,id:_.id},{headers:{Authorization:`Bearer ${l}`}});E("Status updated successfully."),k("success"),T(i,!0),$(!1)}catch(R){console.error(R),E("Failed to update status."),k("danger")}},q=async()=>{try{const R=await I.post("http://192.168.1.15:5000/admin/notice/type",j,{headers:{Authorization:`Bearer ${l}`}});N(!1),E("Notice Type added successfully."),k("success"),N(!1)}catch{E("Failed to add notice type."),k("danger")}},Q=R=>{M(!0),S(R)},L=async()=>{try{await I.delete(`http://192.168.1.15:5000/${t?"admin/famaliy/delete":a?"admin/death/deleted":"admin/notice/type/deleted"}`,{data:{ids:h},headers:{Authorization:`Bearer ${l}`}}),E("Notice deleted successfully."),k("success"),M(!1),T(i,!0)}catch(R){console.error("Delete error:",R),E("Failed to delete notice."),k("danger")}};return e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"mb-4 admin-title",children:t?"Family Notices":a?"Death Notices":" Notices Type "}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("input",{type:"text",placeholder:"Search notices...",className:"form-control w-50",value:c,onChange:R=>g(R.target.value)}),e.jsx("button",{className:"d-btn a-btn",onClick:()=>N(!0),children:"Add Notice Type"})]}),e.jsxs("div",{className:"table-responsive",children:[F&&e.jsx("div",{className:`alert alert-${D} mt-3`,role:"alert",children:F}),e.jsxs("table",{className:"table table-hover custom-table",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[!t&&!a&&e.jsx("th",{children:"Item"}),(t||a)&&e.jsx("th",{children:"Name"}),(t||a)&&e.jsx("th",{children:"Town"}),(t||a)&&e.jsx("th",{children:"County"}),t&&e.jsx("th",{children:"Type of Notice"}),(t||a)&&e.jsx("th",{children:"Published"}),(t||a)&&e.jsx("th",{children:"Payment"}),(t||a)&&e.jsx("th",{children:"Status"}),!t&&!a&&e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:b?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",children:"Loading notices..."})}):u.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",children:"No notices found"})}):u.map((R,ee)=>e.jsxs("tr",{children:[!t&&!a&&e.jsx("td",{children:R.item}),(t||a)&&e.jsx("td",{children:R.name}),(t||a)&&e.jsx("td",{children:R.town}),(t||a)&&e.jsx("td",{children:R.county}),!t&&!a&&e.jsx("td",{children:R.price}),t&&e.jsx("td",{children:R.item}),(t||a)&&e.jsx("td",{children:new Date(R.createdAt).toLocaleDateString()}),(t||a)&&e.jsx("td",{className:R.payment?"text-success fw-bold":"text-danger fw-bold",children:R.payment?"Paid":"Unpaid"}),(t||a)&&e.jsx("td",{className:R.status?"text-success fw-bold":"text-danger fw-bold",children:R.status?"Active":"Deactivate"}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-warning btn-sm me-2",onClick:()=>O(R),children:"Edit"}),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>Q(R.id),children:"Delete"})]})]},ee))})]}),e.jsxs("div",{className:"pagination-container mt-3",children:[e.jsx("button",{onClick:()=>Z(i-1),className:"btn btn-outline-secondary btn-sm",disabled:i===1,children:"Previous"}),e.jsxs("span",{className:"mx-3",children:[i," / ",f]}),e.jsx("button",{onClick:()=>Z(i+1),className:"btn btn-outline-secondary btn-sm",disabled:i===f,children:"Next"})]})]}),v&&e.jsx("div",{className:"custom-modal__overlay",children:e.jsx("div",{className:"custom-modal__container",children:e.jsxs("div",{className:"custom-modal__content custom-modal__content--primary",children:[e.jsxs("div",{className:"custom-modal__header",children:[e.jsx("i",{className:"custom-modal__icon bi bi-file-earmark-plus"}),e.jsx("h3",{className:"custom-modal__title",children:"Create New Notice Type"}),e.jsx("button",{className:"custom-modal__close",onClick:()=>N(!1),children:"×"})]}),e.jsxs("div",{className:"custom-modal__body",children:[e.jsxs("div",{className:"custom-modal__input-group",children:[e.jsx("label",{className:"custom-modal__label",children:"Notice Type Name"}),e.jsx("input",{type:"text",name:"item",onChange:X,className:"custom-modal__input",placeholder:"Ex: Legal Notice"})]}),e.jsxs("div",{className:"custom-modal__input-group",children:[e.jsx("label",{className:"custom-modal__label",children:"Pricing"}),e.jsxs("div",{className:"custom-modal__input-prefix",children:[e.jsx("span",{className:"custom-modal__currency",children:"€"}),e.jsx("input",{type:"number",name:"price",onChange:X,className:"custom-modal__input",placeholder:"0.00",step:"0.01"})]})]})]}),e.jsxs("div",{className:"custom-modal__footer",children:[e.jsx("button",{className:"custom-modal__btn custom-modal__btn--secondary",onClick:()=>N(!1),children:"Discard"}),e.jsxs("button",{className:"custom-modal__btn custom-modal__btn--primary",onClick:q,children:[e.jsx("i",{className:"bi bi-check2-circle me-2"}),"Create Notice Type"]})]})]})})}),d&&e.jsx("div",{className:"custom-modal__overlay",children:e.jsx("div",{className:"custom-modal__container",children:e.jsxs("div",{className:"custom-modal__content custom-modal__content--warning",children:[e.jsxs("div",{className:"custom-modal__header",children:[e.jsx("i",{className:"custom-modal__icon bi bi-toggle-on"}),e.jsx("h3",{className:"custom-modal__title",children:"Update Status Settings"}),e.jsx("button",{className:"custom-modal__close",onClick:()=>$(!1),children:"×"})]}),e.jsx("div",{className:"custom-modal__body",children:e.jsxs("div",{className:"custom-modal__input-group",children:[e.jsx("label",{className:"custom-modal__label",children:"Current Status"}),e.jsxs("div",{className:"custom-modal__select-wrapper",children:[e.jsxs("select",{className:"custom-modal__select",value:C,onChange:R=>w(R.target.value),children:[e.jsx("option",{value:!0,children:"🟢 Active"}),e.jsx("option",{value:!1,children:"🔴 Archived"})]}),e.jsx("i",{className:"custom-modal__select-arrow bi bi-chevron-down"})]})]})}),e.jsxs("div",{className:"custom-modal__footer",children:[e.jsx("button",{className:"custom-modal__btn custom-modal__btn--secondary",onClick:()=>$(!1),children:"Cancel"}),e.jsxs("button",{className:"custom-modal__btn custom-modal__btn--warning",onClick:se,children:[e.jsx("i",{className:"bi bi-save2 me-2"}),"Save Changes"]})]})]})})}),A&&e.jsx("div",{className:"custom-modal__overlay",children:e.jsx("div",{className:"custom-modal__container",children:e.jsxs("div",{className:"custom-modal__content custom-modal__content--danger",children:[e.jsxs("div",{className:"custom-modal__header",children:[e.jsx("i",{className:"custom-modal__icon bi bi-exclamation-octagon"}),e.jsx("h3",{className:"custom-modal__title",children:"Confirm Deletion"}),e.jsx("button",{className:"custom-modal__close",onClick:()=>M(!1),children:"×"})]}),e.jsx("div",{className:"custom-modal__body",children:e.jsxs("div",{className:"custom-modal__delete-content",children:[e.jsx("div",{className:"custom-modal__delete-icon",children:e.jsx("i",{className:"bi bi-trash3"})}),e.jsxs("p",{className:"custom-modal__delete-text",children:["You're about to permanently delete this notice type and all related data.",e.jsx("br",{}),e.jsx("strong",{children:"This action cannot be undone!"})]})]})}),e.jsxs("div",{className:"custom-modal__footer",children:[e.jsxs("button",{className:"custom-modal__btn custom-modal__btn--secondary",onClick:()=>M(!1),children:[e.jsx("i",{className:"bi bi-x-circle me-2"}),"Cancel"]}),e.jsxs("button",{className:"custom-modal__btn custom-modal__btn--danger",onClick:L,children:[e.jsx("i",{className:"bi bi-trash3 me-2"}),"Delete Permanently"]})]})]})})})]})},ft=({token:l})=>{const[t,a]=s.useState([]),[u,n]=s.useState(1),[i,p]=s.useState(!1),[b,r]=s.useState(1),[f,y]=s.useState("Services"),[c,g]=s.useState(""),[v,N]=s.useState(!1),[C,w]=s.useState({serviceName:"",icon:null}),[j,m]=s.useState([]),A=async(d,$=!1)=>{p(!0);try{let _=f==="Services"?"http://192.168.1.15:5000/admin/services/pagination":"http://192.168.1.15:5000/admin/category/service";if(f==="Services"){const z=await I.get(_,{params:{page:d,limit:10,search:c}});a($?z.data.services:F=>[...F,...z.data.services]),r(z.data.totalPages)}else{const z=await I.get(_,{params:{page:d,limit:10,search:c}});m(z.data.data)}}catch(_){console.error(_)}finally{p(!1)}};s.useEffect(()=>{A(u,!0)},[u,f,c]);const M=d=>{d<1||d>b||n(d)},h=d=>{const{name:$,value:_,files:z}=d.target;if($==="icon"){const F=z[0];F&&F.type==="image/svg+xml"?w(E=>({...E,icon:F})):alert("Please upload a valid SVG file.")}else w(F=>({...F,[$]:_}))},S=async()=>{if(!C.serviceName||!C.icon){alert("Please fill all fields and upload a valid SVG icon.");return}const d=new FormData;d.append("serviceName",C.serviceName),d.append("icon",C.icon);try{await I.post("http://192.168.1.15:5000/admin/service/category",d,{headers:{Authorization:`Bearer ${l}`,"Content-Type":"multipart/form-data"}}),N(!1),A(u,!0)}catch($){console.error("Error adding service category:",$)}};return e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"mb-4 admin-title",children:"Services"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("select",{className:"form-select w-25 cus-drop-cat mat",value:f,onChange:d=>y(d.target.value),children:[e.jsx("option",{value:"Services",children:"Services"}),e.jsx("option",{value:"Service Category",children:"Service Category"})]}),e.jsx("input",{type:"text",placeholder:"Search...",className:"form-control w-50",value:c,onChange:d=>g(d.target.value)}),e.jsx("button",{className:"d-btn a-btn",onClick:()=>N(!0),children:"Add Category"})]}),e.jsxs("div",{className:"table-responsive",children:[f==="Services"&&e.jsxs("table",{className:"table table-hover custom-table",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Business Name"}),e.jsx("th",{children:"County"}),e.jsx("th",{children:"Location"}),e.jsx("th",{children:"Service Category"}),e.jsx("th",{children:"Published"}),e.jsx("th",{children:"Payment"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"Loading..."})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"No data found"})}):t.map((d,$)=>e.jsxs("tr",{children:[e.jsx("td",{children:d.business_name||d.serviceName}),e.jsx("td",{children:d.county||"N/A"}),e.jsx("td",{children:d.location_details?d.location_details.length>10?d.location_details.slice(0,10)+"...":d.location_details:"N/A"}),e.jsx("td",{children:d.business_type||"N/A"}),e.jsx("td",{children:d.createdAt?new Date(d.createdAt).toLocaleDateString():"N/A"}),e.jsx("td",{className:d.payment_status?"text-success fw-bold":"text-danger fw-bold",children:d.payment_status?"Paid":"Unpaid"}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-warning btn-sm me-2",children:"Edit"}),e.jsx("button",{className:"btn btn-danger btn-sm",children:"Delete"})]})]},$))})]}),f!=="Services"&&e.jsxs("table",{className:"table table-hover custom-table",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"serviceName"}),e.jsx("th",{children:"offers"}),e.jsx("th",{children:"Published"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"Loading..."})}):j.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"No data found"})}):j.map((d,$)=>e.jsxs("tr",{children:[e.jsx("td",{children:d.serviceName}),e.jsx("td",{children:d.offers||"N/A"}),e.jsx("td",{children:d.createdAt?new Date(d.createdAt).toLocaleDateString():"N/A"}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-warning btn-sm me-2",children:"Edit"}),e.jsx("button",{className:"btn btn-danger btn-sm",children:"Delete"})]})]},$))})]}),e.jsxs("div",{className:"pagination-container mt-3",children:[e.jsx("button",{onClick:()=>M(u-1),className:"btn btn-outline-secondary btn-sm",disabled:u===1,children:"Previous"}),e.jsxs("span",{className:"mx-3",children:[u," / ",b]}),e.jsx("button",{onClick:()=>M(u+1),className:"btn btn-outline-secondary btn-sm",disabled:u===b,children:"Next"})]})]}),v&&e.jsx("div",{className:"modal show d-block",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title admin-m-title",children:"Add Service Category"}),e.jsx("button",{className:"btn-close",onClick:()=>N(!1)})]}),e.jsx("div",{className:"modal-body",children:e.jsx("input",{type:"text",name:"serviceName",onChange:h,className:"form-control",placeholder:"Enter Service Category Name"})}),e.jsx("div",{className:"modal-body",children:e.jsx("input",{type:"file",name:"icon",onChange:h,className:"form-control",accept:".svg"})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>N(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:S,children:"Save"})]})]})})})]})},bt=()=>{const[l]=xa(),t=l.get("session_id"),a=l.get("service")==="true",[u,n]=s.useState("Processing payment..."),[i,p]=s.useState(!1),[b,r]=s.useState(0),f=ie();s.useEffect(()=>{let c=!0,g=!1;return(async()=>{if(!t||g)return;g=!0,console.log("Updating payment status...");const C=`http://192.168.1.15:5000/${a?"service":"user"}/update-payment/${t}`;try{let w=0;const j=setInterval(()=>{w+=10,w<=90?r(w):clearInterval(j)},300),m=await fetch(C,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_status:1,status:1})});if(clearInterval(j),m.ok&&c){r(100),p(!0),n("Payment Successful! 🎉"),console.log("Downloading PDF...");const A=await m.blob(),M=window.URL.createObjectURL(A),h=document.createElement("a");h.href=M,h.download="receipt.pdf",document.body.appendChild(h),h.click(),document.body.removeChild(h),window.URL.revokeObjectURL(M)}else if(c){const A=await m.json();p(!0),n(A.error||"Payment failed. Please try again.")}}catch{c&&(p(!0),n("Error updating payment. Please check your connection."))}})(),()=>{c=!1}},[t,a]);const y=()=>{f("/home")};return e.jsxs("div",{className:"payment-success-container",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress",style:{width:`${b}%`}})}),e.jsx("p",{className:"processing-message",children:u}),e.jsx(de,{message:u,show:i,onConfirm:y,onCancel:y})]})},yt=({token:l})=>{const[t,a]=s.useState(),[u,n]=s.useState(),[i,p]=s.useState(),[b,r]=s.useState();s.useState({deathNoticePrice:0,publicationDurations:[],paymentMethods:[],notificationSettings:{},newPrice:"",newDuration:"",editingPrice:null,showPriceModal:!1,showDurationModal:!1}),s.useEffect(()=>{f(),y()},[]);const f=async()=>{try{const v=await I.get("http://192.168.1.15:5000/admin/price",{headers:{Authorization:`Bearer ${l}`}});console.log(v.data.price),a(v.data.price[0].price),n(v.data.price[0].id)}catch(v){console.error("Error fetching settings:",v)}},y=async()=>{try{const v=await I.get("http://192.168.1.15:5000/admin/service/price",{headers:{Authorization:`Bearer ${l}`}});console.log(v.data.price),p(v.data.price[0].price),r(v.data.price[0].id)}catch(v){console.error("Error fetching settings:",v)}},c=async v=>{v.preventDefault();try{await I.put("http://192.168.1.15:5000/admin/update/price",{price:t,id:u},{headers:{Authorization:`Bearer ${l}`}}),alert("Price updated successfully")}catch(N){console.error("Error updating price:",N)}},g=async v=>{v.preventDefault();try{await I.put("http://192.168.1.15:5000/admin/service/update/price",{price:i,id:b},{headers:{Authorization:`Bearer ${l}`}}),alert("Price updated successfully")}catch(N){console.error("Error updating price:",N)}};return e.jsxs("div",{className:"admin-settings-container",children:[e.jsxs("div",{className:"settings-section",children:[e.jsx("h2",{className:"section-title",children:"Death Notice Pricing"}),e.jsxs("form",{onSubmit:c,className:"price-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Current Price (€)"}),e.jsx("input",{type:"number",value:t,onChange:v=>{a(v.target.value)},className:"prime-input",min:"0",step:"0.01"})]}),e.jsx("button",{type:"submit",onClick:c,className:"prime-btn primary",children:"Update Price"})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsx("h2",{className:"section-title",children:"Service Pricing"}),e.jsxs("form",{onSubmit:c,className:"price-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Current Price (€)"}),e.jsx("input",{type:"number",value:i,onChange:v=>{p(v.target.value)},className:"prime-input",min:"0",step:"0.01"})]}),e.jsx("button",{type:"submit",onClick:g,className:"prime-btn primary",children:"Update Service Price"})]})]}),e.jsx("div",{className:"settings-section",children:e.jsx("h2",{className:"section-title",children:"Home Page Setting"})})]})},wt=({token:l})=>{s.useState([]);const[t,a]=s.useState(1),[u,n]=s.useState(!1),[i,p]=s.useState(1),[b,r]=s.useState([]),[f,y]=s.useState(!1),[c,g]=s.useState({id:0,username:"",email:""}),[v,N]=s.useState(""),[C,w]=s.useState(""),[j,m]=s.useState(null),[A,M]=s.useState(""),[h,S]=s.useState(!1),[d,$]=s.useState([]);s.useEffect(()=>{(async()=>{try{const k=await I.get("http://192.168.1.15:5000/admin/get/directore",{headers:{Authorization:`Bearer ${l}`}});r(k.data)}catch(k){console.error("Error fetching directors:",k)}})()},[l]);const _=async()=>{if(!(!c||!v||!C)){n(!0);try{const D=await I.get("http://192.168.1.15:5000/admin/get/death-notices",{params:{directorId:c.id,startDate:v,endDate:C},headers:{Authorization:`Bearer ${l}`}});m(D.data)}catch(D){console.error("Preview error:",D),alert("Error generating preview")}finally{n(!1)}}},z=()=>{S(!0),F()},F=async()=>{if(!j||j.notices.length===0){alert("No data to generate invoice");return}const D=9,k=j.notices,O=[];let T=0;for(let L=0;L<k.length;L+=D)O.push(k.slice(L,L+D));const Z=new Ea("p","mm","a4");let X=!0;for(const[L,R]of O.entries()){const ee=L===O.length-1,ce=R.reduce((he,_e)=>he+_e.price,0),re=ce;T+=ce;const ve=E(R,ce,re,T,X,ee),ne=document.createElement("div");ne.style.position="absolute",ne.style.left="-9999px",ne.innerHTML=ve,document.body.appendChild(ne);const ae=await La(ne,{scale:1.5}),fe=ae.toDataURL("image/jpeg",.6),me=210,ke=Math.min(ae.height*me/ae.width,297);X||Z.addPage(),X=!1,Z.addImage(fe,"JPEG",0,0,me,ke),document.body.removeChild(ne)}const se=Math.round(T),q=Z.output("blob",{compress:!0}),Q=new FormData;Q.append("invoice",q,`invoice-${new Date().toISOString().slice(0,10)}.pdf`),Q.append("startDate",v),Q.append("endDate",C),Q.append("username",c.username),Q.append("total",se),Q.append("email",c.email),Q.append("directorId",c.id),Z.save(`invoice-${new Date().toISOString().slice(0,10)}.pdf`);try{const L={startDate:v,endDate:C,username:c.username,total:Math.round(T),email:c.email,directorId:c.id};await I.post("http://192.168.1.15:5000/admin/add/invoice",L,{headers:{Authorization:`Bearer ${l}`}}),h&&await I.post("http://192.168.1.15:5000/admin/send-invoice-email",Q,{headers:{Authorization:`Bearer ${l}`}})}catch(L){console.log(L)}};s.useEffect(()=>{(async()=>{try{const k=await I.get("http://192.168.1.15:5000/admin/get/invoice",{headers:{Authorization:`Bearer ${l}`},params:{page:t,limit:10}});$(k.data.invoices),console.log(k.data.invoices)}catch(k){console.error("Error fetching invoices:",k)}})()},[l]);const E=(D,k,O,T,Z,X)=>`
        <div class="invoice-preview">
            ${Z?`  
            <div class="text-center mb-4">
                <h2 class="mb-0">END OF LIFE</h2>
                <p class="mb-0">77 Test Address<br/>Test Address</p>
            </div>
            <hr style="border-top: 2px solid black;"/>
            <div class="row mb-4">
                <div class="col-md-6">
                    <h5 class="mb-1">Bill To</h5>
                    <p class="mb-0">${c.username}<br/>27, Dif City, Gupta<br/>Delhi, Delhi 40003</p>
                </div>
            </div>
            <div class="row mb-4">
                <div class="col-md-4">
                    <strong>Invoice Date:</strong> ${new Date().toLocaleDateString()}
                </div>
                <div class="col-md-4">
                    <strong>Invoice From</strong> ${v}
                </div>
                <div class="col-md-4">
                    <strong>Invoice To:</strong> ${C}
                </div>
            </div>
            `:""}
    
            <table class="table">
                <thead class="table-dark">
                    <tr>
                        <th style="width: 20%">NOTICE ID</th>
                        <th style="width: 40%">DEATH NOTICE NAME</th>
                        <th style="width: 20%"> PRICE</th>
                        <th style="width: 20%">AMOUNT</th>
                    </tr>
                </thead>
                <tbody>
                    ${D.map(se=>`  
                        <tr>
                            <td>${se.id}</td>
                            <td>${se.name} ${se.surname||""}</td>
                            <td class="text-end">€${se.price.toFixed(2)}</td>
                            <td class="text-end">€${se.price.toFixed(2)}</td>
                        </tr>
                    `).join("")}
                    
                    ${X?`
                    <tr>
                        <td colspan="2" rowspan="3">
                            ${Z?`
                            <div class="mt-4">
                                <p class="mb-1"><strong>Terms:</strong> Payment due within 15 days</p>
                                <div class="mt-3">
                                    <p class="mb-0"><strong>Bank Details:</strong></p>
                                    <p class="mb-0">Account #: 12345678</p>
                                    <p class="mb-0">Routing #: 09876543210</p>
                                </div>
                            </div>
                            `:""}
                        </td>
                        <td class="text-end"><strong>Subtotal</strong></td>
                        <td class="text-end">€${T.toFixed(2)}</td>
                    </tr>
                    <tr>
                        <td class="text-end"><strong> VAT </strong></td>
                        <td class="text-end">€ 0%</td>
                    </tr>
                    <tr>
                        <td class="text-end"><strong>TOTAL</strong></td>
                        <td class="text-end">€${T.toFixed(2)}</td>
                    </tr>
                    `:""}
                </tbody>
            </table>
        </div>
        `;return e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"mb-4 admin-title",children:"Invoice"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("input",{type:"text",placeholder:"Search Invoices...",className:"form-control w-50",value:A,onChange:D=>M(D.target.value)}),e.jsx("button",{className:"d-btn a-btn",onClick:()=>y(!0),children:"Generate Invoice"})]}),e.jsxs("div",{className:"table-responsive",children:[e.jsxs("table",{className:"table table-hover custom-table",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Directory"}),e.jsx("th",{children:"From"}),e.jsx("th",{children:"To"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Payment Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:u?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"Loading notices..."})}):d.length<0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",children:"No notices found"})}):d.map((D,k)=>e.jsxs("tr",{children:[e.jsx("td",{children:D.id}),e.jsx("td",{children:D.username}),e.jsx("td",{children:new Date(D.invoce_from).toLocaleDateString()}),e.jsx("td",{children:new Date(D.invoce_to).toLocaleDateString()}),e.jsxs("td",{children:["€",D.totalprice]}),e.jsx("td",{className:D.payment_status?"text-success fw-bold":"text-danger fw-bold",children:D.payment_status?"Paid":"Unpaid"}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-warning btn-sm me-2",onClick:()=>handelEdite(D),children:"Edit"}),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>handleDelete(D.id),children:"Delete"})]})]},k))})]}),e.jsxs("div",{className:"pagination-container mt-3",children:[e.jsx("button",{className:"btn btn-outline-secondary btn-sm",disabled:t===1,children:"Previous"}),e.jsxs("span",{className:"mx-3",children:[t," / ",i]}),e.jsx("button",{className:"btn btn-outline-secondary btn-sm",disabled:t===i,children:"Next"})]})]}),f&&e.jsx("div",{className:"modal fade show d-block custom-modal",children:e.jsx("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content shadow-lg",children:[e.jsx("div",{className:"modal-header bg-primary text-white",children:e.jsxs("div",{className:"d-flex align-items-center w-100",children:[e.jsx("i",{className:"bi bi-receipt-cutoff fs-4 me-2"}),e.jsx("h5",{className:"modal-title mb-0 fw-bold",children:"Generate Invoice"}),e.jsx("button",{className:"btn-close btn-close-white ms-auto",onClick:()=>y(!1)})]})}),e.jsxs("div",{className:"modal-body custom-modal-scroll",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"form-label fw-bold ",children:"Select Director"}),e.jsxs("select",{className:"form-select form-select-lg border-primary",value:c.id,onChange:D=>{const k=b.find(O=>O.id===parseInt(D.target.value));g(k||{id:0,username:"",email:""})},children:[e.jsx("option",{value:"",children:"Choose a Director..."}),b.map(D=>e.jsx("option",{value:D.id,children:D.username},D.id))]})]}),e.jsxs("div",{className:"row g-3 mb-4",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label fw-bold ",children:"Start Date"}),e.jsx("input",{type:"date",className:"form-control form-control-lg border-primary",value:v,onChange:D=>N(D.target.value)})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label fw-bold ",children:"End Date"}),e.jsx("input",{type:"date",className:"form-control form-control-lg border-primary",value:C,onChange:D=>w(D.target.value)})]})]}),e.jsxs("button",{className:"btn btn-primary btn-sm w-50 mb-4",onClick:_,disabled:u,children:[u?e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}):e.jsx("i",{className:"bi bi-eye me-2"}),u?"Generating Preview...":"Preview Invoice"]}),j&&e.jsxs("div",{className:"invoice-preview border rounded-3 p-4 bg-light",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-3",children:[e.jsx("i",{className:"bi bi-hospital-fill fs-1  me-3"}),e.jsx("h1",{className:"display-6 fw-bold  mb-0",children:"END OF LIFE"})]}),e.jsx("p",{className:"text-muted mb-0",children:"123 Memorial Street"}),e.jsx("p",{className:"text-muted mb-0",children:"London, United Kingdom"})]}),e.jsx("hr",{className:"border-primary opacity-100",style:{height:"2px"}}),e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h5",{className:"fw-bold  mb-3",children:"Bill To:"}),e.jsx("div",{className:"card border-primary",children:e.jsxs("div",{className:"card-body",children:[e.jsx("p",{className:"mb-0 fw-bold",children:c==null?void 0:c.username}),e.jsx("p",{className:"mb-0 text-muted",children:c==null?void 0:c.email})]})})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h5",{className:"fw-bold  mb-3",children:"Invoice Details:"}),e.jsx("div",{className:"card border-primary",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("p",{className:"mb-1",children:e.jsx("strong",{children:"Invoice Date:"})}),e.jsx("p",{className:"mb-0",children:new Date().toLocaleDateString()})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("p",{className:"mb-1",children:e.jsx("strong",{children:"Period:"})}),e.jsxs("p",{className:"mb-0",children:[v," - ",C]})]})]})})})]})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-bordered",children:[e.jsx("thead",{className:"bg-primary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"20%"},children:"Notice ID"}),e.jsx("th",{style:{width:"40%"},children:"Deceased Name"}),e.jsx("th",{style:{width:"20%"},className:"text-end",children:"Unit Price"}),e.jsx("th",{style:{width:"20%"},className:"text-end",children:"Amount"})]})}),e.jsx("tbody",{children:j.notices.map(D=>e.jsxs("tr",{children:[e.jsxs("td",{className:"fw-bold",children:["#",D.id]}),e.jsxs("td",{children:[D.name," ",D.surname]}),e.jsxs("td",{className:"text-end",children:["€",D.price]}),e.jsxs("td",{className:"text-end",children:["€",D.price]})]},D.id))})]})}),e.jsxs("div",{className:"row mt-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card border-primary",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"fw-bold  mb-3",children:"Payment Details:"}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Bank Name:"})," State Bank"]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Account #:"})," 12345678"]}),e.jsxs("p",{className:"mb-0",children:[e.jsx("strong",{children:"Routing #:"})," 09876543210"]})]})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:"Subtotal"}),e.jsxs("td",{className:"text-end",children:["€",j.total]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:"VAT (0%)"}),e.jsx("td",{className:"text-end",children:"€0.00"})]}),e.jsxs("tr",{className:"table-active",children:[e.jsx("td",{className:"fw-bold",children:"TOTAL DUE"}),e.jsxs("td",{className:"text-end fw-bold ",children:["€",j.total]})]})]})})})]})]})]}),e.jsx("div",{className:"modal-footer bg-light",children:e.jsxs("div",{className:"d-flex gap-2 w-100",children:[e.jsxs("button",{className:"btn btn-danger btn-sm flex-grow-1",onClick:()=>y(!1),children:[e.jsx("i",{className:"bi bi-x-circle me-2"}),"Cancel"]}),e.jsxs("button",{className:"btn btn-success btn-sm flex-grow-1",onClick:F,disabled:!j||u,children:[e.jsx("i",{className:"bi bi-file-earmark-pdf me-2"}),"Generate PDF"]}),e.jsxs("button",{className:"btn btn-primary btn-sm flex-grow-1",onClick:z,disabled:u,children:[e.jsx("i",{className:"bi bi-envelope me-2"}),"Send Email"]})]})})]})})})]})},St=({token:l,role:t})=>{const[a,u]=s.useState(!1),[n,i]=s.useState({data:[],selectedRows:[],currentPage:1,totalPages:1,loading:!1,error:"",showModal:!1,message:"",deleteId:null,searchTerm:"",sortBy:"createdAt",sortOrder:"desc"}),[p,b]=s.useState(),r=[{key:"business_name",label:"Business Name"},{key:"county",label:"County"},{key:"location_details",label:"Location"},{key:"status",label:"Status"},{key:"valid_to",label:"Valid From"}],f=async()=>{try{const h=await I.get("http://192.168.1.15:5000/service/price",{headers:{Authorization:`Bearer ${l}`}});b(h.data.price[0].price)}catch(h){console.error("Error fetching settings:",h)}},y=s.useCallback(async()=>{try{i(S=>({...S,loading:!0,error:""}));const h=await I.get("http://192.168.1.15:5000/service/family-notices/user/by/get",{params:{page:n.currentPage,pageSize:10,search:n.searchTerm,sortBy:n.sortBy,sortOrder:n.sortOrder},headers:{Authorization:`Bearer ${l}`}});i(S=>({...S,data:h.data.notices,totalPages:h.data.totalPages,loading:!1})),console.log(h)}catch(h){console.error("Fetch error:",h),i(S=>{var d,$;return{...S,error:(($=(d=h.response)==null?void 0:d.data)==null?void 0:$.error)||"Failed to fetch notices",loading:!1}})}},[n.currentPage,n.sortBy,a,n.sortOrder,l]);s.useEffect(()=>{y(),f()},[y]);const c=()=>{u(!a),i(h=>({...h,currentPage:1})),y()},g=h=>{h.key==="Enter"&&c()},v=h=>{i(S=>({...S,sortBy:h,sortOrder:S.sortBy===h&&S.sortOrder==="asc"?"desc":"asc"}))},N=h=>{i(S=>({...S,selectedRows:S.selectedRows.includes(h)?S.selectedRows.filter(d=>d!==h):[...S.selectedRows,h]}))},C=()=>{i(h=>({...h,selectedRows:h.selectedRows.length===h.data.length?[]:h.data.map(S=>S.id)}))},w=(h=null)=>{i(S=>({...S,deleteId:h,message:h?"Are you sure you want to delete this notice?":`Are you sure you want to delete ${S.selectedRows.length} notice(s)?`,showModal:!0}))},j=async()=>{try{const h=n.deleteId?[n.deleteId]:n.selectedRows;await I.delete("http://192.168.1.15:5000/service/family-notices/deleted",{data:{ids:h},headers:{Authorization:`Bearer ${l}`}}),i(S=>({...S,selectedRows:[],deleteId:null,showModal:!1})),y()}catch(h){console.error("Delete error:",h),i(S=>({...S,showModal:!1}))}},m=h=>n.sortBy!==h?e.jsx(Ps,{className:"text-muted"}):n.sortOrder==="asc"?e.jsx(Ds,{}):e.jsx($s,{}),A=()=>e.jsx("nav",{children:e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{className:`page-item ${n.currentPage===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>i(h=>({...h,currentPage:h.currentPage-1})),children:"Previous"})}),Array.from({length:n.totalPages},(h,S)=>e.jsx("li",{className:`page-item ${n.currentPage===S+1?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>i(d=>({...d,currentPage:S+1})),children:S+1})},S+1)),e.jsx("li",{className:`page-item ${n.currentPage===n.totalPages?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>i(h=>({...h,currentPage:h.currentPage+1})),children:"Next"})})]})}),M=async(h,S)=>{const d=parseInt(p,10);if(isNaN(d)){console.error("Invalid amount:",p);return}console.log(typeof d,d);try{const $=await fetch("http://192.168.1.15:5000/service/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({noticeId:h,amount:d,item:S})}),_=await $.json();if(!$.ok){console.error("Payment error:",_.error);return}console.log(_.sessionUrl),window.location.href=_.sessionUrl}catch($){console.error("Payment request failed:",$)}};return n.loading?e.jsx("div",{className:"text-center my-5",children:"Loading..."}):n.error?e.jsx("div",{className:"alert alert-danger my-5",children:n.error}):e.jsxs("div",{className:"container py-4",children:[e.jsx("h1",{className:"mb-4 cus-h1",children:"My Services"}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-md-6 mb-2",children:e.jsxs("div",{className:"input-group",children:[e.jsx("span",{onClick:c,className:"input-group-text bg-light",children:e.jsx(ks,{})}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Search notices...",value:n.searchTerm,onChange:h=>i(S=>({...S,searchTerm:h.target.value})),onKeyPress:g})]})})}),e.jsx("div",{className:"d-flex justify-content-end mb-4",children:e.jsx("button",{onClick:()=>w(),disabled:n.selectedRows.length===0,className:"btn btn-danger",children:"Delete Selected"})}),e.jsx("div",{className:"table-responsive rounded-3 shadow-sm",children:e.jsxs("table",{className:"table table-hover mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"50px"},children:e.jsx("input",{type:"checkbox",checked:!!n.data.length&&n.selectedRows.length===n.data.length,onChange:C,className:"form-check-input"})}),r.map(({key:h,label:S})=>e.jsx("th",{onClick:()=>v(h),style:{cursor:"pointer",minWidth:"120px"},children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[S,e.jsx("span",{className:"ms-2",children:m(h)})]})},h)),e.jsx("th",{style:{width:"120px"},children:"Actions"})]})}),e.jsx("tbody",{children:n.data.map(h=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:n.selectedRows.includes(h.id),onChange:()=>N(h.id),className:"form-check-input"})}),r.map(({key:S})=>e.jsx("td",{children:S==="valid_to"?new Date(h[S]).toLocaleDateString():S==="status"?e.jsx("span",{className:`badge ${h[S]?"bg-success text-white":"bg-danger text-white"} px-3 py-2 rounded`,children:h[S]?"Active":"Inactive"}):h[S]},S)),e.jsx("td",{children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{onClick:()=>w(h.id),className:"btn btn-sm btn-danger",children:e.jsx(_s,{})}),e.jsx(o,{className:"btn btn-sm",to:`/service-single/${h.service_number}/${h.business_name}`,style:{background:"#b1824d"},children:e.jsx(is,{color:"white"})}),!h.status&&!h.payment_status&&e.jsx(o,{className:"btn btn-sm",style:{background:"#b1824d"},children:e.jsx(ua,{color:"white",onClick:()=>M(h.id,h.business_type)})})]})})]},h.id))})]})}),!n.data.length&&!n.loading&&e.jsx("div",{className:"text-center my-5 text-muted",children:"No notices found"}),e.jsx("div",{className:"d-flex justify-content-center mt-4",children:e.jsx(A,{})}),e.jsx(de,{show:n.showModal,onConfirm:j,onCancel:()=>i(h=>({...h,showModal:!1})),message:n.message})]})};function Ct(){const[l,t]=s.useState(null),[a,u]=s.useState(null),[n,i]=s.useState("null"),[p,b]=s.useState(!0);return s.useEffect(()=>{const r=performance.now();return()=>console.log("Page Load Time:",performance.now()-r,"ms")},[]),e.jsxs(pa,{children:[n!=="admin"&&e.jsx(Ba,{token:a,user:l,role:n,setToken:u,setUser:t,setRole:i}),e.jsx(pt,{}),e.jsxs(ja,{children:[e.jsxs(U,{path:"/",element:e.jsx(Ka,{}),children:[e.jsx(U,{path:"",element:e.jsx(fs,{setToken:u,setUser:t,setRole:i,token:a,role:n})}),e.jsx(U,{path:"home",element:e.jsx(fs,{})}),e.jsx(U,{path:"login",element:e.jsx(Wa,{setUser:t,setToken:u})}),e.jsx(U,{path:"register",element:e.jsx(Qa,{})}),e.jsx(U,{path:"service-directory",element:e.jsx(Qe,{})}),e.jsx(U,{path:"service-list/:county?/:businessType?",element:e.jsx(Oe,{token:a,role:n})}),e.jsx(U,{path:"service-single/:id/:service",element:e.jsx(rt,{token:a,role:n})}),e.jsx(U,{path:"familynotices",element:e.jsx(ot,{})}),e.jsx(U,{path:"noticesview/:name",element:e.jsx(ys,{})}),e.jsx(U,{path:"deathnotice",element:e.jsx(Je,{})}),e.jsx(U,{path:"deathnotice/:countydata",element:e.jsx(Je,{})}),e.jsx(U,{path:"/payment-success",element:e.jsx(bt,{})}),n==="user"&&e.jsxs(U,{path:"user",element:e.jsx(xt,{}),children:[e.jsx(U,{path:"addnotice",element:e.jsx(et,{token:a})}),e.jsx(U,{path:"myfamilynotices",element:e.jsx(bs,{token:a})}),e.jsx(U,{path:"noticesview/:name",element:e.jsx(ys,{})})]}),n==="service provider"&&e.jsxs(U,{path:"service",element:e.jsx(st,{}),children:[e.jsx(U,{path:"deathnotice",element:e.jsx(Je,{})}),e.jsx(U,{path:"servicefrom",element:e.jsx(ct,{token:a})}),e.jsx(U,{path:"service-directory",element:e.jsx(Qe,{})}),e.jsx(U,{path:"service-list",element:e.jsx(Oe,{token:a})}),e.jsx(U,{path:"myservice",element:e.jsx(St,{token:a,role:n})})]}),n==="admin"&&e.jsxs(U,{path:"admin",element:e.jsx(Nt,{nav:p}),children:[e.jsx(U,{path:"dashboard",element:e.jsx(dt,{token:a})}),e.jsx(U,{path:"notices",element:e.jsx(ze,{token:a})}),e.jsx(U,{path:"notices/family",element:e.jsx(ze,{token:a,role:n,family:!0})}),e.jsx(U,{path:"notices/death",element:e.jsx(ze,{token:a,role:n,death:!0})}),e.jsx(U,{path:"notices/types",element:e.jsx(ze,{token:a,role:n,death:!1,family:!1})}),e.jsx(U,{path:"service-directory",element:e.jsx(ft,{token:a})}),e.jsx(U,{path:"service-list",element:e.jsx(Oe,{token:a,role:n})}),e.jsx(U,{path:"setting",element:e.jsx(yt,{token:a,role:n})}),e.jsx(U,{path:"invoice",element:e.jsx(wt,{token:a,role:n})})]}),n==="directory"&&e.jsxs(U,{path:"directory",element:e.jsx(mt,{}),children:[e.jsx(U,{path:"dashboard",element:e.jsx(ht,{})}),e.jsx(U,{path:"deatnotice",element:e.jsx(ut,{token:a})}),e.jsx(U,{path:"service-directory",element:e.jsx(Qe,{})}),e.jsx(U,{path:"service-list",element:e.jsx(Oe,{token:a})}),e.jsx(U,{path:"mydeathnotices",element:e.jsx(bs,{token:a,role:n})})]})]}),e.jsx(U,{path:"*",element:e.jsx(at,{})})]}),n!=="admin"&&e.jsx(Ja,{})]})}sa.createRoot(document.getElementById("root")).render(e.jsx(s.StrictMode,{children:e.jsx(Ct,{})}));
