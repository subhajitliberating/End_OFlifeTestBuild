/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var re=function(r,t){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,i){h.__proto__=i}||function(h,i){for(var p in i)Object.prototype.hasOwnProperty.call(i,p)&&(h[p]=i[p])})(r,t)};function te(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function h(){this.constructor=r}re(r,t),r.prototype=t===null?Object.create(t):(h.prototype=t.prototype,new h)}function se(r){var t="";Array.isArray(r)||(r=[r]);for(var h=0;h<r.length;h++){var i=r[h];if(i.type===c.CLOSE_PATH)t+="z";else if(i.type===c.HORIZ_LINE_TO)t+=(i.relative?"h":"H")+i.x;else if(i.type===c.VERT_LINE_TO)t+=(i.relative?"v":"V")+i.y;else if(i.type===c.MOVE_TO)t+=(i.relative?"m":"M")+i.x+" "+i.y;else if(i.type===c.LINE_TO)t+=(i.relative?"l":"L")+i.x+" "+i.y;else if(i.type===c.CURVE_TO)t+=(i.relative?"c":"C")+i.x1+" "+i.y1+" "+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===c.SMOOTH_CURVE_TO)t+=(i.relative?"s":"S")+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===c.QUAD_TO)t+=(i.relative?"q":"Q")+i.x1+" "+i.y1+" "+i.x+" "+i.y;else if(i.type===c.SMOOTH_QUAD_TO)t+=(i.relative?"t":"T")+i.x+" "+i.y;else{if(i.type!==c.ARC)throw new Error('Unexpected command type "'+i.type+'" at index '+h+".");t+=(i.relative?"a":"A")+i.rX+" "+i.rY+" "+i.xRot+" "+ +i.lArcFlag+" "+ +i.sweepFlag+" "+i.x+" "+i.y}}return t}function z(r,t){var h=r[0],i=r[1];return[h*Math.cos(t)-i*Math.sin(t),h*Math.sin(t)+i*Math.cos(t)]}function U(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var h=0;h<r.length;h++)if(typeof r[h]!="number")throw new Error("assertNumbers arguments["+h+"] is not a number. "+typeof r[h]+" == typeof "+r[h]);return!0}var Z=Math.PI;function j(r,t,h){r.lArcFlag=r.lArcFlag===0?0:1,r.sweepFlag=r.sweepFlag===0?0:1;var i=r.rX,p=r.rY,m=r.x,d=r.y;i=Math.abs(r.rX),p=Math.abs(r.rY);var e=z([(t-m)/2,(h-d)/2],-r.xRot/180*Z),s=e[0],n=e[1],u=Math.pow(s,2)/Math.pow(i,2)+Math.pow(n,2)/Math.pow(p,2);1<u&&(i*=Math.sqrt(u),p*=Math.sqrt(u)),r.rX=i,r.rY=p;var y=Math.pow(i,2)*Math.pow(n,2)+Math.pow(p,2)*Math.pow(s,2),o=(r.lArcFlag!==r.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(i,2)*Math.pow(p,2)-y)/y)),a=i*n/p*o,l=-p*s/i*o,f=z([a,l],r.xRot/180*Z);r.cX=f[0]+(t+m)/2,r.cY=f[1]+(h+d)/2,r.phi1=Math.atan2((n-l)/p,(s-a)/i),r.phi2=Math.atan2((-n-l)/p,(-s-a)/i),r.sweepFlag===0&&r.phi2>r.phi1&&(r.phi2-=2*Z),r.sweepFlag===1&&r.phi2<r.phi1&&(r.phi2+=2*Z),r.phi1*=180/Z,r.phi2*=180/Z}function K(r,t,h){U(r,t,h);var i=r*r+t*t-h*h;if(0>i)return[];if(i===0)return[[r*h/(r*r+t*t),t*h/(r*r+t*t)]];var p=Math.sqrt(i);return[[(r*h+t*p)/(r*r+t*t),(t*h-r*p)/(r*r+t*t)],[(r*h-t*p)/(r*r+t*t),(t*h+r*p)/(r*r+t*t)]]}var A,X=Math.PI/180;function k(r,t,h){return(1-h)*r+h*t}function G(r,t,h,i){return r+Math.cos(i/180*Z)*t+Math.sin(i/180*Z)*h}function J(r,t,h,i){var p=1e-6,m=t-r,d=h-t,e=3*m+3*(i-h)-6*d,s=6*(d-m),n=3*m;return Math.abs(e)<p?[-n/s]:function(u,y,o){var a=u*u/4-y;if(a<-1e-6)return[];if(a<=o)return[-u/2];var l=Math.sqrt(a);return[-u/2-l,-u/2+l]}(s/e,n/e,p)}function $(r,t,h,i,p){var m=1-p;return r*(m*m*m)+t*(3*m*m*p)+h*(3*m*p*p)+i*(p*p*p)}(function(r){function t(){return p(function(e,s,n){return e.relative&&(e.x1!==void 0&&(e.x1+=s),e.y1!==void 0&&(e.y1+=n),e.x2!==void 0&&(e.x2+=s),e.y2!==void 0&&(e.y2+=n),e.x!==void 0&&(e.x+=s),e.y!==void 0&&(e.y+=n),e.relative=!1),e})}function h(){var e=NaN,s=NaN,n=NaN,u=NaN;return p(function(y,o,a){return y.type&c.SMOOTH_CURVE_TO&&(y.type=c.CURVE_TO,e=isNaN(e)?o:e,s=isNaN(s)?a:s,y.x1=y.relative?o-e:2*o-e,y.y1=y.relative?a-s:2*a-s),y.type&c.CURVE_TO?(e=y.relative?o+y.x2:y.x2,s=y.relative?a+y.y2:y.y2):(e=NaN,s=NaN),y.type&c.SMOOTH_QUAD_TO&&(y.type=c.QUAD_TO,n=isNaN(n)?o:n,u=isNaN(u)?a:u,y.x1=y.relative?o-n:2*o-n,y.y1=y.relative?a-u:2*a-u),y.type&c.QUAD_TO?(n=y.relative?o+y.x1:y.x1,u=y.relative?a+y.y1:y.y1):(n=NaN,u=NaN),y})}function i(){var e=NaN,s=NaN;return p(function(n,u,y){if(n.type&c.SMOOTH_QUAD_TO&&(n.type=c.QUAD_TO,e=isNaN(e)?u:e,s=isNaN(s)?y:s,n.x1=n.relative?u-e:2*u-e,n.y1=n.relative?y-s:2*y-s),n.type&c.QUAD_TO){e=n.relative?u+n.x1:n.x1,s=n.relative?y+n.y1:n.y1;var o=n.x1,a=n.y1;n.type=c.CURVE_TO,n.x1=((n.relative?0:u)+2*o)/3,n.y1=((n.relative?0:y)+2*a)/3,n.x2=(n.x+2*o)/3,n.y2=(n.y+2*a)/3}else e=NaN,s=NaN;return n})}function p(e){var s=0,n=0,u=NaN,y=NaN;return function(o){if(isNaN(u)&&!(o.type&c.MOVE_TO))throw new Error("path must start with moveto");var a=e(o,s,n,u,y);return o.type&c.CLOSE_PATH&&(s=u,n=y),o.x!==void 0&&(s=o.relative?s+o.x:o.x),o.y!==void 0&&(n=o.relative?n+o.y:o.y),o.type&c.MOVE_TO&&(u=s,y=n),a}}function m(e,s,n,u,y,o){return U(e,s,n,u,y,o),p(function(a,l,f,v){var x=a.x1,g=a.x2,N=a.relative&&!isNaN(v),O=a.x!==void 0?a.x:N?0:l,I=a.y!==void 0?a.y:N?0:f;function _(q){return q*q}a.type&c.HORIZ_LINE_TO&&s!==0&&(a.type=c.LINE_TO,a.y=a.relative?0:f),a.type&c.VERT_LINE_TO&&n!==0&&(a.type=c.LINE_TO,a.x=a.relative?0:l),a.x!==void 0&&(a.x=a.x*e+I*n+(N?0:y)),a.y!==void 0&&(a.y=O*s+a.y*u+(N?0:o)),a.x1!==void 0&&(a.x1=a.x1*e+a.y1*n+(N?0:y)),a.y1!==void 0&&(a.y1=x*s+a.y1*u+(N?0:o)),a.x2!==void 0&&(a.x2=a.x2*e+a.y2*n+(N?0:y)),a.y2!==void 0&&(a.y2=g*s+a.y2*u+(N?0:o));var T=e*u-s*n;if(a.xRot!==void 0&&(e!==1||s!==0||n!==0||u!==1))if(T===0)delete a.rX,delete a.rY,delete a.xRot,delete a.lArcFlag,delete a.sweepFlag,a.type=c.LINE_TO;else{var M=a.xRot*Math.PI/180,R=Math.sin(M),P=Math.cos(M),S=1/_(a.rX),H=1/_(a.rY),Q=_(P)*S+_(R)*H,F=2*R*P*(S-H),b=_(R)*S+_(P)*H,D=Q*u*u-F*s*u+b*s*s,V=F*(e*u+s*n)-2*(Q*n*u+b*e*s),Y=Q*n*n-F*e*n+b*e*e,C=(Math.atan2(V,D-Y)+Math.PI)%Math.PI/2,E=Math.sin(C),w=Math.cos(C);a.rX=Math.abs(T)/Math.sqrt(D*_(w)+V*E*w+Y*_(E)),a.rY=Math.abs(T)/Math.sqrt(D*_(E)-V*E*w+Y*_(w)),a.xRot=180*C/Math.PI}return a.sweepFlag!==void 0&&0>T&&(a.sweepFlag=+!a.sweepFlag),a})}function d(){return function(e){var s={};for(var n in e)s[n]=e[n];return s}}r.ROUND=function(e){function s(n){return Math.round(n*e)/e}return e===void 0&&(e=1e13),U(e),function(n){return n.x1!==void 0&&(n.x1=s(n.x1)),n.y1!==void 0&&(n.y1=s(n.y1)),n.x2!==void 0&&(n.x2=s(n.x2)),n.y2!==void 0&&(n.y2=s(n.y2)),n.x!==void 0&&(n.x=s(n.x)),n.y!==void 0&&(n.y=s(n.y)),n.rX!==void 0&&(n.rX=s(n.rX)),n.rY!==void 0&&(n.rY=s(n.rY)),n}},r.TO_ABS=t,r.TO_REL=function(){return p(function(e,s,n){return e.relative||(e.x1!==void 0&&(e.x1-=s),e.y1!==void 0&&(e.y1-=n),e.x2!==void 0&&(e.x2-=s),e.y2!==void 0&&(e.y2-=n),e.x!==void 0&&(e.x-=s),e.y!==void 0&&(e.y-=n),e.relative=!0),e})},r.NORMALIZE_HVZ=function(e,s,n){return e===void 0&&(e=!0),s===void 0&&(s=!0),n===void 0&&(n=!0),p(function(u,y,o,a,l){if(isNaN(a)&&!(u.type&c.MOVE_TO))throw new Error("path must start with moveto");return s&&u.type&c.HORIZ_LINE_TO&&(u.type=c.LINE_TO,u.y=u.relative?0:o),n&&u.type&c.VERT_LINE_TO&&(u.type=c.LINE_TO,u.x=u.relative?0:y),e&&u.type&c.CLOSE_PATH&&(u.type=c.LINE_TO,u.x=u.relative?a-y:a,u.y=u.relative?l-o:l),u.type&c.ARC&&(u.rX===0||u.rY===0)&&(u.type=c.LINE_TO,delete u.rX,delete u.rY,delete u.xRot,delete u.lArcFlag,delete u.sweepFlag),u})},r.NORMALIZE_ST=h,r.QT_TO_C=i,r.INFO=p,r.SANITIZE=function(e){e===void 0&&(e=0),U(e);var s=NaN,n=NaN,u=NaN,y=NaN;return p(function(o,a,l,f,v){var x=Math.abs,g=!1,N=0,O=0;if(o.type&c.SMOOTH_CURVE_TO&&(N=isNaN(s)?0:a-s,O=isNaN(n)?0:l-n),o.type&(c.CURVE_TO|c.SMOOTH_CURVE_TO)?(s=o.relative?a+o.x2:o.x2,n=o.relative?l+o.y2:o.y2):(s=NaN,n=NaN),o.type&c.SMOOTH_QUAD_TO?(u=isNaN(u)?a:2*a-u,y=isNaN(y)?l:2*l-y):o.type&c.QUAD_TO?(u=o.relative?a+o.x1:o.x1,y=o.relative?l+o.y1:o.y2):(u=NaN,y=NaN),o.type&c.LINE_COMMANDS||o.type&c.ARC&&(o.rX===0||o.rY===0||!o.lArcFlag)||o.type&c.CURVE_TO||o.type&c.SMOOTH_CURVE_TO||o.type&c.QUAD_TO||o.type&c.SMOOTH_QUAD_TO){var I=o.x===void 0?0:o.relative?o.x:o.x-a,_=o.y===void 0?0:o.relative?o.y:o.y-l;N=isNaN(u)?o.x1===void 0?N:o.relative?o.x:o.x1-a:u-a,O=isNaN(y)?o.y1===void 0?O:o.relative?o.y:o.y1-l:y-l;var T=o.x2===void 0?0:o.relative?o.x:o.x2-a,M=o.y2===void 0?0:o.relative?o.y:o.y2-l;x(I)<=e&&x(_)<=e&&x(N)<=e&&x(O)<=e&&x(T)<=e&&x(M)<=e&&(g=!0)}return o.type&c.CLOSE_PATH&&x(a-f)<=e&&x(l-v)<=e&&(g=!0),g?[]:o})},r.MATRIX=m,r.ROTATE=function(e,s,n){s===void 0&&(s=0),n===void 0&&(n=0),U(e,s,n);var u=Math.sin(e),y=Math.cos(e);return m(y,u,-u,y,s-s*y+n*u,n-s*u-n*y)},r.TRANSLATE=function(e,s){return s===void 0&&(s=0),U(e,s),m(1,0,0,1,e,s)},r.SCALE=function(e,s){return s===void 0&&(s=e),U(e,s),m(e,0,0,s,0,0)},r.SKEW_X=function(e){return U(e),m(1,0,Math.atan(e),1,0,0)},r.SKEW_Y=function(e){return U(e),m(1,Math.atan(e),0,1,0,0)},r.X_AXIS_SYMMETRY=function(e){return e===void 0&&(e=0),U(e),m(-1,0,0,1,e,0)},r.Y_AXIS_SYMMETRY=function(e){return e===void 0&&(e=0),U(e),m(1,0,0,-1,0,e)},r.A_TO_C=function(){return p(function(e,s,n){return c.ARC===e.type?function(u,y,o){var a,l,f,v;u.cX||j(u,y,o);for(var x=Math.min(u.phi1,u.phi2),g=Math.max(u.phi1,u.phi2)-x,N=Math.ceil(g/90),O=new Array(N),I=y,_=o,T=0;T<N;T++){var M=k(u.phi1,u.phi2,T/N),R=k(u.phi1,u.phi2,(T+1)/N),P=R-M,S=4/3*Math.tan(P*X/4),H=[Math.cos(M*X)-S*Math.sin(M*X),Math.sin(M*X)+S*Math.cos(M*X)],Q=H[0],F=H[1],b=[Math.cos(R*X),Math.sin(R*X)],D=b[0],V=b[1],Y=[D+S*Math.sin(R*X),V-S*Math.cos(R*X)],C=Y[0],E=Y[1];O[T]={relative:u.relative,type:c.CURVE_TO};var w=function(q,W){var B=z([q*u.rX,W*u.rY],u.xRot),ie=B[0],ue=B[1];return[u.cX+ie,u.cY+ue]};a=w(Q,F),O[T].x1=a[0],O[T].y1=a[1],l=w(C,E),O[T].x2=l[0],O[T].y2=l[1],f=w(D,V),O[T].x=f[0],O[T].y=f[1],u.relative&&(O[T].x1-=I,O[T].y1-=_,O[T].x2-=I,O[T].y2-=_,O[T].x-=I,O[T].y-=_),I=(v=[O[T].x,O[T].y])[0],_=v[1]}return O}(e,e.relative?0:s,e.relative?0:n):e})},r.ANNOTATE_ARCS=function(){return p(function(e,s,n){return e.relative&&(s=0,n=0),c.ARC===e.type&&j(e,s,n),e})},r.CLONE=d,r.CALCULATE_BOUNDS=function(){var e=function(o){var a={};for(var l in o)a[l]=o[l];return a},s=t(),n=i(),u=h(),y=p(function(o,a,l){var f=u(n(s(e(o))));function v(E){E>y.maxX&&(y.maxX=E),E<y.minX&&(y.minX=E)}function x(E){E>y.maxY&&(y.maxY=E),E<y.minY&&(y.minY=E)}if(f.type&c.DRAWING_COMMANDS&&(v(a),x(l)),f.type&c.HORIZ_LINE_TO&&v(f.x),f.type&c.VERT_LINE_TO&&x(f.y),f.type&c.LINE_TO&&(v(f.x),x(f.y)),f.type&c.CURVE_TO){v(f.x),x(f.y);for(var g=0,N=J(a,f.x1,f.x2,f.x);g<N.length;g++)0<(C=N[g])&&1>C&&v($(a,f.x1,f.x2,f.x,C));for(var O=0,I=J(l,f.y1,f.y2,f.y);O<I.length;O++)0<(C=I[O])&&1>C&&x($(l,f.y1,f.y2,f.y,C))}if(f.type&c.ARC){v(f.x),x(f.y),j(f,a,l);for(var _=f.xRot/180*Math.PI,T=Math.cos(_)*f.rX,M=Math.sin(_)*f.rX,R=-Math.sin(_)*f.rY,P=Math.cos(_)*f.rY,S=f.phi1<f.phi2?[f.phi1,f.phi2]:-180>f.phi2?[f.phi2+360,f.phi1+360]:[f.phi2,f.phi1],H=S[0],Q=S[1],F=function(E){var w=E[0],q=E[1],W=180*Math.atan2(q,w)/Math.PI;return W<H?W+360:W},b=0,D=K(R,-T,0).map(F);b<D.length;b++)(C=D[b])>H&&C<Q&&v(G(f.cX,T,R,C));for(var V=0,Y=K(P,-M,0).map(F);V<Y.length;V++){var C;(C=Y[V])>H&&C<Q&&x(G(f.cY,M,P,C))}}return o});return y.minX=1/0,y.maxX=-1/0,y.minY=1/0,y.maxY=-1/0,y}})(A||(A={}));var L,ne=function(){function r(){}return r.prototype.round=function(t){return this.transform(A.ROUND(t))},r.prototype.toAbs=function(){return this.transform(A.TO_ABS())},r.prototype.toRel=function(){return this.transform(A.TO_REL())},r.prototype.normalizeHVZ=function(t,h,i){return this.transform(A.NORMALIZE_HVZ(t,h,i))},r.prototype.normalizeST=function(){return this.transform(A.NORMALIZE_ST())},r.prototype.qtToC=function(){return this.transform(A.QT_TO_C())},r.prototype.aToC=function(){return this.transform(A.A_TO_C())},r.prototype.sanitize=function(t){return this.transform(A.SANITIZE(t))},r.prototype.translate=function(t,h){return this.transform(A.TRANSLATE(t,h))},r.prototype.scale=function(t,h){return this.transform(A.SCALE(t,h))},r.prototype.rotate=function(t,h,i){return this.transform(A.ROTATE(t,h,i))},r.prototype.matrix=function(t,h,i,p,m,d){return this.transform(A.MATRIX(t,h,i,p,m,d))},r.prototype.skewX=function(t){return this.transform(A.SKEW_X(t))},r.prototype.skewY=function(t){return this.transform(A.SKEW_Y(t))},r.prototype.xSymmetry=function(t){return this.transform(A.X_AXIS_SYMMETRY(t))},r.prototype.ySymmetry=function(t){return this.transform(A.Y_AXIS_SYMMETRY(t))},r.prototype.annotateArcs=function(){return this.transform(A.ANNOTATE_ARCS())},r}(),ae=function(r){return r===" "||r==="	"||r==="\r"||r===`
`},ee=function(r){return 48<=r.charCodeAt(0)&&r.charCodeAt(0)<=57},oe=function(r){function t(){var h=r.call(this)||this;return h.curNumber="",h.curCommandType=-1,h.curCommandRelative=!1,h.canParseCommandOrComma=!0,h.curNumberHasExp=!1,h.curNumberHasExpDigits=!1,h.curNumberHasDecimal=!1,h.curArgs=[],h}return te(t,r),t.prototype.finish=function(h){if(h===void 0&&(h=[]),this.parse(" ",h),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return h},t.prototype.parse=function(h,i){var p=this;i===void 0&&(i=[]);for(var m=function(y){i.push(y),p.curArgs.length=0,p.canParseCommandOrComma=!0},d=0;d<h.length;d++){var e=h[d],s=!(this.curCommandType!==c.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),n=ee(e)&&(this.curNumber==="0"&&e==="0"||s);if(!ee(e)||n)if(e!=="e"&&e!=="E")if(e!=="-"&&e!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(e!=="."||this.curNumberHasExp||this.curNumberHasDecimal||s){if(this.curNumber&&this.curCommandType!==-1){var u=Number(this.curNumber);if(isNaN(u))throw new SyntaxError("Invalid number ending at "+d);if(this.curCommandType===c.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>u)throw new SyntaxError('Expected positive number, got "'+u+'" at index "'+d+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+d+'"')}this.curArgs.push(u),this.curArgs.length===ce[this.curCommandType]&&(c.HORIZ_LINE_TO===this.curCommandType?m({type:c.HORIZ_LINE_TO,relative:this.curCommandRelative,x:u}):c.VERT_LINE_TO===this.curCommandType?m({type:c.VERT_LINE_TO,relative:this.curCommandRelative,y:u}):this.curCommandType===c.MOVE_TO||this.curCommandType===c.LINE_TO||this.curCommandType===c.SMOOTH_QUAD_TO?(m({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),c.MOVE_TO===this.curCommandType&&(this.curCommandType=c.LINE_TO)):this.curCommandType===c.CURVE_TO?m({type:c.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===c.SMOOTH_CURVE_TO?m({type:c.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===c.QUAD_TO?m({type:c.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===c.ARC&&m({type:c.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!ae(e))if(e===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(e!=="+"&&e!=="-"&&e!==".")if(n)this.curNumber=e,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+d+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+e+'" at index '+d+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,e!=="z"&&e!=="Z")if(e==="h"||e==="H")this.curCommandType=c.HORIZ_LINE_TO,this.curCommandRelative=e==="h";else if(e==="v"||e==="V")this.curCommandType=c.VERT_LINE_TO,this.curCommandRelative=e==="v";else if(e==="m"||e==="M")this.curCommandType=c.MOVE_TO,this.curCommandRelative=e==="m";else if(e==="l"||e==="L")this.curCommandType=c.LINE_TO,this.curCommandRelative=e==="l";else if(e==="c"||e==="C")this.curCommandType=c.CURVE_TO,this.curCommandRelative=e==="c";else if(e==="s"||e==="S")this.curCommandType=c.SMOOTH_CURVE_TO,this.curCommandRelative=e==="s";else if(e==="q"||e==="Q")this.curCommandType=c.QUAD_TO,this.curCommandRelative=e==="q";else if(e==="t"||e==="T")this.curCommandType=c.SMOOTH_QUAD_TO,this.curCommandRelative=e==="t";else{if(e!=="a"&&e!=="A")throw new SyntaxError('Unexpected character "'+e+'" at index '+d+".");this.curCommandType=c.ARC,this.curCommandRelative=e==="a"}else i.push({type:c.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=e,this.curNumberHasDecimal=e==="."}else this.curNumber+=e,this.curNumberHasDecimal=!0;else this.curNumber+=e;else this.curNumber+=e,this.curNumberHasExp=!0;else this.curNumber+=e,this.curNumberHasExpDigits=this.curNumberHasExp}return i},t.prototype.transform=function(h){return Object.create(this,{parse:{value:function(i,p){p===void 0&&(p=[]);for(var m=0,d=Object.getPrototypeOf(this).parse.call(this,i);m<d.length;m++){var e=d[m],s=h(e);Array.isArray(s)?p.push.apply(p,s):p.push(s)}return p}}})},t}(ne),c=function(r){function t(h){var i=r.call(this)||this;return i.commands=typeof h=="string"?t.parse(h):h,i}return te(t,r),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var h=A.CALCULATE_BOUNDS();return this.transform(h),h},t.prototype.transform=function(h){for(var i=[],p=0,m=this.commands;p<m.length;p++){var d=h(m[p]);Array.isArray(d)?i.push.apply(i,d):i.push(d)}return this.commands=i,this},t.encode=function(h){return se(h)},t.parse=function(h){var i=new oe,p=[];return i.parse(h,p),i.finish(p),p},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(ne),ce=((L={})[c.MOVE_TO]=2,L[c.LINE_TO]=2,L[c.HORIZ_LINE_TO]=1,L[c.VERT_LINE_TO]=1,L[c.CLOSE_PATH]=0,L[c.QUAD_TO]=4,L[c.SMOOTH_QUAD_TO]=2,L[c.CURVE_TO]=6,L[c.SMOOTH_CURVE_TO]=4,L[c.ARC]=7,L);export{c as _};
